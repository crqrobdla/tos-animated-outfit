var __extends=this&&this.__extends||function(){var o=function(L,m){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])},o(L,m)};return function(L,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");o(L,m);function n(){this.constructor=L}L.prototype=m===null?Object.create(m):(n.prototype=m.prototype,new n)}}(),spine;(function(o){var L=function(){function w(l,E,R){if(l==null)throw new Error("name cannot be null.");if(E==null)throw new Error("timelines cannot be null.");this.name=l,this.timelines=E,this.timelineIds=[];for(var S=0;S<E.length;S++)this.timelineIds[E[S].getPropertyId()]=!0;this.duration=R}return w.prototype.hasTimeline=function(l){return this.timelineIds[l]==!0},w.prototype.apply=function(l,E,R,S,k,A,V,N){if(l==null)throw new Error("skeleton cannot be null.");S&&this.duration!=0&&(R%=this.duration,E>0&&(E%=this.duration));for(var T=this.timelines,v=0,y=T.length;v<y;v++)T[v].apply(l,E,R,k,A,V,N)},w.binarySearch=function(l,E,R){R===void 0&&(R=1);var S=0,k=l.length/R-2;if(k==0)return R;for(var A=k>>>1;;){if(l[(A+1)*R]<=E?S=A+1:k=A,S==k)return(S+1)*R;A=S+k>>>1}},w.linearSearch=function(l,E,R){for(var S=0,k=l.length-R;S<=k;S+=R)if(l[S]>E)return S;return-1},w}();o.Animation=L;var m;(function(w){w[w.setup=0]="setup",w[w.first=1]="first",w[w.replace=2]="replace",w[w.add=3]="add"})(m=o.MixBlend||(o.MixBlend={}));var n;(function(w){w[w.mixIn=0]="mixIn",w[w.mixOut=1]="mixOut"})(n=o.MixDirection||(o.MixDirection={}));var r;(function(w){w[w.rotate=0]="rotate",w[w.translate=1]="translate",w[w.scale=2]="scale",w[w.shear=3]="shear",w[w.attachment=4]="attachment",w[w.color=5]="color",w[w.deform=6]="deform",w[w.event=7]="event",w[w.drawOrder=8]="drawOrder",w[w.ikConstraint=9]="ikConstraint",w[w.transformConstraint=10]="transformConstraint",w[w.pathConstraintPosition=11]="pathConstraintPosition",w[w.pathConstraintSpacing=12]="pathConstraintSpacing",w[w.pathConstraintMix=13]="pathConstraintMix",w[w.twoColor=14]="twoColor"})(r=o.TimelineType||(o.TimelineType={}));var e=function(){function w(l){if(l<=0)throw new Error("frameCount must be > 0: "+l);this.curves=o.Utils.newFloatArray((l-1)*w.BEZIER_SIZE)}return w.prototype.getFrameCount=function(){return this.curves.length/w.BEZIER_SIZE+1},w.prototype.setLinear=function(l){this.curves[l*w.BEZIER_SIZE]=w.LINEAR},w.prototype.setStepped=function(l){this.curves[l*w.BEZIER_SIZE]=w.STEPPED},w.prototype.getCurveType=function(l){var E=l*w.BEZIER_SIZE;if(E==this.curves.length)return w.LINEAR;var R=this.curves[E];return R==w.LINEAR?w.LINEAR:R==w.STEPPED?w.STEPPED:w.BEZIER},w.prototype.setCurve=function(l,E,R,S,k){var A=(-E*2+S)*.03,V=(-R*2+k)*.03,N=((E-S)*3+1)*.006,T=((R-k)*3+1)*.006,v=A*2+N,y=V*2+T,U=E*.3+A+N*.16666667,b=R*.3+V+T*.16666667,Y=l*w.BEZIER_SIZE,D=this.curves;D[Y++]=w.BEZIER;for(var O=U,B=b,X=Y+w.BEZIER_SIZE-1;Y<X;Y+=2)D[Y]=O,D[Y+1]=B,U+=v,b+=y,v+=N,y+=T,O+=U,B+=b},w.prototype.getCurvePercent=function(l,E){E=o.MathUtils.clamp(E,0,1);var R=this.curves,S=l*w.BEZIER_SIZE,k=R[S];if(k==w.LINEAR)return E;if(k==w.STEPPED)return 0;S++;for(var A=0,V=S,N=S+w.BEZIER_SIZE-1;S<N;S+=2)if(A=R[S],A>=E){var T=void 0,v=void 0;return S==V?(T=0,v=0):(T=R[S-2],v=R[S-1]),v+(R[S+1]-v)*(E-T)/(A-T)}var y=R[S-1];return y+(1-y)*(E-A)/(1-A)},w.LINEAR=0,w.STEPPED=1,w.BEZIER=2,w.BEZIER_SIZE=10*2-1,w}();o.CurveTimeline=e;var t=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E<<1),R}return l.prototype.getPropertyId=function(){return(r.rotate<<24)+this.boneIndex},l.prototype.setFrame=function(E,R,S){E<<=1,this.frames[E]=R,this.frames[E+l.ROTATION]=S},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.bones[this.boneIndex];if(!!v.active){if(S<T[0]){switch(V){case m.setup:v.rotation=v.data.rotation;return;case m.first:var y=v.data.rotation-v.rotation;v.rotation+=(y-(16384-(16384.499999999996-y/360|0))*360)*A}return}if(S>=T[T.length-l.ENTRIES]){var U=T[T.length+l.PREV_ROTATION];switch(V){case m.setup:v.rotation=v.data.rotation+U*A;break;case m.first:case m.replace:U+=v.data.rotation-v.rotation,U-=(16384-(16384.499999999996-U/360|0))*360;case m.add:v.rotation+=U*A}return}var b=L.binarySearch(T,S,l.ENTRIES),Y=T[b+l.PREV_ROTATION],D=T[b],O=this.getCurvePercent((b>>1)-1,1-(S-D)/(T[b+l.PREV_TIME]-D)),B=T[b+l.ROTATION]-Y;switch(B=Y+(B-(16384-(16384.499999999996-B/360|0))*360)*O,V){case m.setup:v.rotation=v.data.rotation+(B-(16384-(16384.499999999996-B/360|0))*360)*A;break;case m.first:case m.replace:B+=v.data.rotation-v.rotation;case m.add:v.rotation+=(B-(16384-(16384.499999999996-B/360|0))*360)*A}}},l.ENTRIES=2,l.PREV_TIME=-2,l.PREV_ROTATION=-1,l.ROTATION=1,l}(e);o.RotateTimeline=t;var a=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E*l.ENTRIES),R}return l.prototype.getPropertyId=function(){return(r.translate<<24)+this.boneIndex},l.prototype.setFrame=function(E,R,S,k){E*=l.ENTRIES,this.frames[E]=R,this.frames[E+l.X]=S,this.frames[E+l.Y]=k},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.bones[this.boneIndex];if(!!v.active){if(S<T[0]){switch(V){case m.setup:v.x=v.data.x,v.y=v.data.y;return;case m.first:v.x+=(v.data.x-v.x)*A,v.y+=(v.data.y-v.y)*A}return}var y=0,U=0;if(S>=T[T.length-l.ENTRIES])y=T[T.length+l.PREV_X],U=T[T.length+l.PREV_Y];else{var b=L.binarySearch(T,S,l.ENTRIES);y=T[b+l.PREV_X],U=T[b+l.PREV_Y];var Y=T[b],D=this.getCurvePercent(b/l.ENTRIES-1,1-(S-Y)/(T[b+l.PREV_TIME]-Y));y+=(T[b+l.X]-y)*D,U+=(T[b+l.Y]-U)*D}switch(V){case m.setup:v.x=v.data.x+y*A,v.y=v.data.y+U*A;break;case m.first:case m.replace:v.x+=(v.data.x+y-v.x)*A,v.y+=(v.data.y+U-v.y)*A;break;case m.add:v.x+=y*A,v.y+=U*A}}},l.ENTRIES=3,l.PREV_TIME=-3,l.PREV_X=-2,l.PREV_Y=-1,l.X=1,l.Y=2,l}(e);o.TranslateTimeline=a;var s=function(w){__extends(l,w);function l(E){return w.call(this,E)||this}return l.prototype.getPropertyId=function(){return(r.scale<<24)+this.boneIndex},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.bones[this.boneIndex];if(!!v.active){if(S<T[0]){switch(V){case m.setup:v.scaleX=v.data.scaleX,v.scaleY=v.data.scaleY;return;case m.first:v.scaleX+=(v.data.scaleX-v.scaleX)*A,v.scaleY+=(v.data.scaleY-v.scaleY)*A}return}var y=0,U=0;if(S>=T[T.length-l.ENTRIES])y=T[T.length+l.PREV_X]*v.data.scaleX,U=T[T.length+l.PREV_Y]*v.data.scaleY;else{var b=L.binarySearch(T,S,l.ENTRIES);y=T[b+l.PREV_X],U=T[b+l.PREV_Y];var Y=T[b],D=this.getCurvePercent(b/l.ENTRIES-1,1-(S-Y)/(T[b+l.PREV_TIME]-Y));y=(y+(T[b+l.X]-y)*D)*v.data.scaleX,U=(U+(T[b+l.Y]-U)*D)*v.data.scaleY}if(A==1)V==m.add?(v.scaleX+=y-v.data.scaleX,v.scaleY+=U-v.data.scaleY):(v.scaleX=y,v.scaleY=U);else{var O=0,B=0;if(N==n.mixOut)switch(V){case m.setup:O=v.data.scaleX,B=v.data.scaleY,v.scaleX=O+(Math.abs(y)*o.MathUtils.signum(O)-O)*A,v.scaleY=B+(Math.abs(U)*o.MathUtils.signum(B)-B)*A;break;case m.first:case m.replace:O=v.scaleX,B=v.scaleY,v.scaleX=O+(Math.abs(y)*o.MathUtils.signum(O)-O)*A,v.scaleY=B+(Math.abs(U)*o.MathUtils.signum(B)-B)*A;break;case m.add:O=v.scaleX,B=v.scaleY,v.scaleX=O+(Math.abs(y)*o.MathUtils.signum(O)-v.data.scaleX)*A,v.scaleY=B+(Math.abs(U)*o.MathUtils.signum(B)-v.data.scaleY)*A}else switch(V){case m.setup:O=Math.abs(v.data.scaleX)*o.MathUtils.signum(y),B=Math.abs(v.data.scaleY)*o.MathUtils.signum(U),v.scaleX=O+(y-O)*A,v.scaleY=B+(U-B)*A;break;case m.first:case m.replace:O=Math.abs(v.scaleX)*o.MathUtils.signum(y),B=Math.abs(v.scaleY)*o.MathUtils.signum(U),v.scaleX=O+(y-O)*A,v.scaleY=B+(U-B)*A;break;case m.add:O=o.MathUtils.signum(y),B=o.MathUtils.signum(U),v.scaleX=Math.abs(v.scaleX)*O+(y-Math.abs(v.data.scaleX)*O)*A,v.scaleY=Math.abs(v.scaleY)*B+(U-Math.abs(v.data.scaleY)*B)*A}}}},l}(a);o.ScaleTimeline=s;var i=function(w){__extends(l,w);function l(E){return w.call(this,E)||this}return l.prototype.getPropertyId=function(){return(r.shear<<24)+this.boneIndex},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.bones[this.boneIndex];if(!!v.active){if(S<T[0]){switch(V){case m.setup:v.shearX=v.data.shearX,v.shearY=v.data.shearY;return;case m.first:v.shearX+=(v.data.shearX-v.shearX)*A,v.shearY+=(v.data.shearY-v.shearY)*A}return}var y=0,U=0;if(S>=T[T.length-l.ENTRIES])y=T[T.length+l.PREV_X],U=T[T.length+l.PREV_Y];else{var b=L.binarySearch(T,S,l.ENTRIES);y=T[b+l.PREV_X],U=T[b+l.PREV_Y];var Y=T[b],D=this.getCurvePercent(b/l.ENTRIES-1,1-(S-Y)/(T[b+l.PREV_TIME]-Y));y=y+(T[b+l.X]-y)*D,U=U+(T[b+l.Y]-U)*D}switch(V){case m.setup:v.shearX=v.data.shearX+y*A,v.shearY=v.data.shearY+U*A;break;case m.first:case m.replace:v.shearX+=(v.data.shearX+y-v.shearX)*A,v.shearY+=(v.data.shearY+U-v.shearY)*A;break;case m.add:v.shearX+=y*A,v.shearY+=U*A}}},l}(a);o.ShearTimeline=i;var c=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E*l.ENTRIES),R}return l.prototype.getPropertyId=function(){return(r.color<<24)+this.slotIndex},l.prototype.setFrame=function(E,R,S,k,A,V){E*=l.ENTRIES,this.frames[E]=R,this.frames[E+l.R]=S,this.frames[E+l.G]=k,this.frames[E+l.B]=A,this.frames[E+l.A]=V},l.prototype.apply=function(E,R,S,k,A,V,N){var T=E.slots[this.slotIndex];if(!!T.bone.active){var v=this.frames;if(S<v[0]){switch(V){case m.setup:T.color.setFromColor(T.data.color);return;case m.first:var y=T.color,U=T.data.color;y.add((U.r-y.r)*A,(U.g-y.g)*A,(U.b-y.b)*A,(U.a-y.a)*A)}return}var b=0,Y=0,D=0,O=0;if(S>=v[v.length-l.ENTRIES]){var B=v.length;b=v[B+l.PREV_R],Y=v[B+l.PREV_G],D=v[B+l.PREV_B],O=v[B+l.PREV_A]}else{var X=L.binarySearch(v,S,l.ENTRIES);b=v[X+l.PREV_R],Y=v[X+l.PREV_G],D=v[X+l.PREV_B],O=v[X+l.PREV_A];var _=v[X],F=this.getCurvePercent(X/l.ENTRIES-1,1-(S-_)/(v[X+l.PREV_TIME]-_));b+=(v[X+l.R]-b)*F,Y+=(v[X+l.G]-Y)*F,D+=(v[X+l.B]-D)*F,O+=(v[X+l.A]-O)*F}if(A==1)T.color.set(b,Y,D,O);else{var y=T.color;V==m.setup&&y.setFromColor(T.data.color),y.add((b-y.r)*A,(Y-y.g)*A,(D-y.b)*A,(O-y.a)*A)}}},l.ENTRIES=5,l.PREV_TIME=-5,l.PREV_R=-4,l.PREV_G=-3,l.PREV_B=-2,l.PREV_A=-1,l.R=1,l.G=2,l.B=3,l.A=4,l}(e);o.ColorTimeline=c;var u=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E*l.ENTRIES),R}return l.prototype.getPropertyId=function(){return(r.twoColor<<24)+this.slotIndex},l.prototype.setFrame=function(E,R,S,k,A,V,N,T,v){E*=l.ENTRIES,this.frames[E]=R,this.frames[E+l.R]=S,this.frames[E+l.G]=k,this.frames[E+l.B]=A,this.frames[E+l.A]=V,this.frames[E+l.R2]=N,this.frames[E+l.G2]=T,this.frames[E+l.B2]=v},l.prototype.apply=function(E,R,S,k,A,V,N){var T=E.slots[this.slotIndex];if(!!T.bone.active){var v=this.frames;if(S<v[0]){switch(V){case m.setup:T.color.setFromColor(T.data.color),T.darkColor.setFromColor(T.data.darkColor);return;case m.first:var y=T.color,U=T.darkColor,b=T.data.color,Y=T.data.darkColor;y.add((b.r-y.r)*A,(b.g-y.g)*A,(b.b-y.b)*A,(b.a-y.a)*A),U.add((Y.r-U.r)*A,(Y.g-U.g)*A,(Y.b-U.b)*A,0)}return}var D=0,O=0,B=0,X=0,_=0,F=0,W=0;if(S>=v[v.length-l.ENTRIES]){var G=v.length;D=v[G+l.PREV_R],O=v[G+l.PREV_G],B=v[G+l.PREV_B],X=v[G+l.PREV_A],_=v[G+l.PREV_R2],F=v[G+l.PREV_G2],W=v[G+l.PREV_B2]}else{var j=L.binarySearch(v,S,l.ENTRIES);D=v[j+l.PREV_R],O=v[j+l.PREV_G],B=v[j+l.PREV_B],X=v[j+l.PREV_A],_=v[j+l.PREV_R2],F=v[j+l.PREV_G2],W=v[j+l.PREV_B2];var H=v[j],q=this.getCurvePercent(j/l.ENTRIES-1,1-(S-H)/(v[j+l.PREV_TIME]-H));D+=(v[j+l.R]-D)*q,O+=(v[j+l.G]-O)*q,B+=(v[j+l.B]-B)*q,X+=(v[j+l.A]-X)*q,_+=(v[j+l.R2]-_)*q,F+=(v[j+l.G2]-F)*q,W+=(v[j+l.B2]-W)*q}if(A==1)T.color.set(D,O,B,X),T.darkColor.set(_,F,W,1);else{var y=T.color,U=T.darkColor;V==m.setup&&(y.setFromColor(T.data.color),U.setFromColor(T.data.darkColor)),y.add((D-y.r)*A,(O-y.g)*A,(B-y.b)*A,(X-y.a)*A),U.add((_-U.r)*A,(F-U.g)*A,(W-U.b)*A,0)}}},l.ENTRIES=8,l.PREV_TIME=-8,l.PREV_R=-7,l.PREV_G=-6,l.PREV_B=-5,l.PREV_A=-4,l.PREV_R2=-3,l.PREV_G2=-2,l.PREV_B2=-1,l.R=1,l.G=2,l.B=3,l.A=4,l.R2=5,l.G2=6,l.B2=7,l}(e);o.TwoColorTimeline=u;var g=function(){function w(l){this.frames=o.Utils.newFloatArray(l),this.attachmentNames=new Array(l)}return w.prototype.getPropertyId=function(){return(r.attachment<<24)+this.slotIndex},w.prototype.getFrameCount=function(){return this.frames.length},w.prototype.setFrame=function(l,E,R){this.frames[l]=E,this.attachmentNames[l]=R},w.prototype.apply=function(l,E,R,S,k,A,V){var N=l.slots[this.slotIndex];if(!!N.bone.active){if(V==n.mixOut){A==m.setup&&this.setAttachment(l,N,N.data.attachmentName);return}var T=this.frames;if(R<T[0]){(A==m.setup||A==m.first)&&this.setAttachment(l,N,N.data.attachmentName);return}var v=0;R>=T[T.length-1]?v=T.length-1:v=L.binarySearch(T,R,1)-1;var y=this.attachmentNames[v];l.slots[this.slotIndex].setAttachment(y==null?null:l.getAttachment(this.slotIndex,y))}},w.prototype.setAttachment=function(l,E,R){E.attachment=R==null?null:l.getAttachment(this.slotIndex,R)},w}();o.AttachmentTimeline=g;var h=null,d=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E),R.frameVertices=new Array(E),h==null&&(h=o.Utils.newFloatArray(64)),R}return l.prototype.getPropertyId=function(){return(r.deform<<27)+ +this.attachment.id+this.slotIndex},l.prototype.setFrame=function(E,R,S){this.frames[E]=R,this.frameVertices[E]=S},l.prototype.apply=function(E,R,S,k,A,V,N){var T=E.slots[this.slotIndex];if(!!T.bone.active){var v=T.getAttachment();if(!(!(v instanceof o.VertexAttachment)||v.deformAttachment!=this.attachment)){var y=T.deform;y.length==0&&(V=m.setup);var U=this.frameVertices,b=U[0].length,Y=this.frames;if(S<Y[0]){var D=v;switch(V){case m.setup:y.length=0;return;case m.first:if(A==1){y.length=0;break}var O=o.Utils.setArraySize(y,b);if(D.bones==null)for(var B=D.vertices,X=0;X<b;X++)O[X]+=(B[X]-O[X])*A;else{A=1-A;for(var X=0;X<b;X++)O[X]*=A}}return}var _=o.Utils.setArraySize(y,b);if(S>=Y[Y.length-1]){var F=U[Y.length-1];if(A==1)if(V==m.add){var D=v;if(D.bones==null)for(var B=D.vertices,W=0;W<b;W++)_[W]+=F[W]-B[W];else for(var G=0;G<b;G++)_[G]+=F[G]}else o.Utils.arrayCopy(F,0,_,0,b);else switch(V){case m.setup:{var j=v;if(j.bones==null)for(var B=j.vertices,H=0;H<b;H++){var q=B[H];_[H]=q+(F[H]-q)*A}else for(var K=0;K<b;K++)_[K]=F[K]*A;break}case m.first:case m.replace:for(var Z=0;Z<b;Z++)_[Z]+=(F[Z]-_[Z])*A;break;case m.add:var D=v;if(D.bones==null)for(var B=D.vertices,$=0;$<b;$++)_[$]+=(F[$]-B[$])*A;else for(var Q=0;Q<b;Q++)_[Q]+=F[Q]*A}return}var z=L.binarySearch(Y,S),at=U[z-1],tt=U[z],nt=Y[z],rt=this.getCurvePercent(z-1,1-(S-nt)/(Y[z-1]-nt));if(A==1)if(V==m.add){var D=v;if(D.bones==null)for(var B=D.vertices,et=0;et<b;et++){var J=at[et];_[et]+=J+(tt[et]-J)*rt-B[et]}else for(var lt=0;lt<b;lt++){var J=at[lt];_[lt]+=J+(tt[lt]-J)*rt}}else for(var ot=0;ot<b;ot++){var J=at[ot];_[ot]=J+(tt[ot]-J)*rt}else switch(V){case m.setup:{var ut=v;if(ut.bones==null)for(var B=ut.vertices,st=0;st<b;st++){var J=at[st],q=B[st];_[st]=q+(J+(tt[st]-J)*rt-q)*A}else for(var ht=0;ht<b;ht++){var J=at[ht];_[ht]=(J+(tt[ht]-J)*rt)*A}break}case m.first:case m.replace:for(var it=0;it<b;it++){var J=at[it];_[it]+=(J+(tt[it]-J)*rt-_[it])*A}break;case m.add:var D=v;if(D.bones==null)for(var B=D.vertices,ft=0;ft<b;ft++){var J=at[ft];_[ft]+=(J+(tt[ft]-J)*rt-B[ft])*A}else for(var ct=0;ct<b;ct++){var J=at[ct];_[ct]+=(J+(tt[ct]-J)*rt)*A}}}}},l}(e);o.DeformTimeline=d;var f=function(){function w(l){this.frames=o.Utils.newFloatArray(l),this.events=new Array(l)}return w.prototype.getPropertyId=function(){return r.event<<24},w.prototype.getFrameCount=function(){return this.frames.length},w.prototype.setFrame=function(l,E){this.frames[l]=E.time,this.events[l]=E},w.prototype.apply=function(l,E,R,S,k,A,V){if(S!=null){var N=this.frames,T=this.frames.length;if(E>R)this.apply(l,E,Number.MAX_VALUE,S,k,A,V),E=-1;else if(E>=N[T-1])return;if(!(R<N[0])){var v=0;if(E<N[0])v=0;else{v=L.binarySearch(N,E);for(var y=N[v];v>0&&N[v-1]==y;)v--}for(;v<T&&R>=N[v];v++)S.push(this.events[v])}}},w}();o.EventTimeline=f;var p=function(){function w(l){this.frames=o.Utils.newFloatArray(l),this.drawOrders=new Array(l)}return w.prototype.getPropertyId=function(){return r.drawOrder<<24},w.prototype.getFrameCount=function(){return this.frames.length},w.prototype.setFrame=function(l,E,R){this.frames[l]=E,this.drawOrders[l]=R},w.prototype.apply=function(l,E,R,S,k,A,V){var N=l.drawOrder,T=l.slots;if(V==n.mixOut){A==m.setup&&o.Utils.arrayCopy(l.slots,0,l.drawOrder,0,l.slots.length);return}var v=this.frames;if(R<v[0]){(A==m.setup||A==m.first)&&o.Utils.arrayCopy(l.slots,0,l.drawOrder,0,l.slots.length);return}var y=0;R>=v[v.length-1]?y=v.length-1:y=L.binarySearch(v,R)-1;var U=this.drawOrders[y];if(U==null)o.Utils.arrayCopy(T,0,N,0,T.length);else for(var b=0,Y=U.length;b<Y;b++)N[b]=T[U[b]]},w}();o.DrawOrderTimeline=p;var M=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E*l.ENTRIES),R}return l.prototype.getPropertyId=function(){return(r.ikConstraint<<24)+this.ikConstraintIndex},l.prototype.setFrame=function(E,R,S,k,A,V,N){E*=l.ENTRIES,this.frames[E]=R,this.frames[E+l.MIX]=S,this.frames[E+l.SOFTNESS]=k,this.frames[E+l.BEND_DIRECTION]=A,this.frames[E+l.COMPRESS]=V?1:0,this.frames[E+l.STRETCH]=N?1:0},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.ikConstraints[this.ikConstraintIndex];if(!!v.active){if(S<T[0]){switch(V){case m.setup:v.mix=v.data.mix,v.softness=v.data.softness,v.bendDirection=v.data.bendDirection,v.compress=v.data.compress,v.stretch=v.data.stretch;return;case m.first:v.mix+=(v.data.mix-v.mix)*A,v.softness+=(v.data.softness-v.softness)*A,v.bendDirection=v.data.bendDirection,v.compress=v.data.compress,v.stretch=v.data.stretch}return}if(S>=T[T.length-l.ENTRIES]){V==m.setup?(v.mix=v.data.mix+(T[T.length+l.PREV_MIX]-v.data.mix)*A,v.softness=v.data.softness+(T[T.length+l.PREV_SOFTNESS]-v.data.softness)*A,N==n.mixOut?(v.bendDirection=v.data.bendDirection,v.compress=v.data.compress,v.stretch=v.data.stretch):(v.bendDirection=T[T.length+l.PREV_BEND_DIRECTION],v.compress=T[T.length+l.PREV_COMPRESS]!=0,v.stretch=T[T.length+l.PREV_STRETCH]!=0)):(v.mix+=(T[T.length+l.PREV_MIX]-v.mix)*A,v.softness+=(T[T.length+l.PREV_SOFTNESS]-v.softness)*A,N==n.mixIn&&(v.bendDirection=T[T.length+l.PREV_BEND_DIRECTION],v.compress=T[T.length+l.PREV_COMPRESS]!=0,v.stretch=T[T.length+l.PREV_STRETCH]!=0));return}var y=L.binarySearch(T,S,l.ENTRIES),U=T[y+l.PREV_MIX],b=T[y+l.PREV_SOFTNESS],Y=T[y],D=this.getCurvePercent(y/l.ENTRIES-1,1-(S-Y)/(T[y+l.PREV_TIME]-Y));V==m.setup?(v.mix=v.data.mix+(U+(T[y+l.MIX]-U)*D-v.data.mix)*A,v.softness=v.data.softness+(b+(T[y+l.SOFTNESS]-b)*D-v.data.softness)*A,N==n.mixOut?(v.bendDirection=v.data.bendDirection,v.compress=v.data.compress,v.stretch=v.data.stretch):(v.bendDirection=T[y+l.PREV_BEND_DIRECTION],v.compress=T[y+l.PREV_COMPRESS]!=0,v.stretch=T[y+l.PREV_STRETCH]!=0)):(v.mix+=(U+(T[y+l.MIX]-U)*D-v.mix)*A,v.softness+=(b+(T[y+l.SOFTNESS]-b)*D-v.softness)*A,N==n.mixIn&&(v.bendDirection=T[y+l.PREV_BEND_DIRECTION],v.compress=T[y+l.PREV_COMPRESS]!=0,v.stretch=T[y+l.PREV_STRETCH]!=0))}},l.ENTRIES=6,l.PREV_TIME=-6,l.PREV_MIX=-5,l.PREV_SOFTNESS=-4,l.PREV_BEND_DIRECTION=-3,l.PREV_COMPRESS=-2,l.PREV_STRETCH=-1,l.MIX=1,l.SOFTNESS=2,l.BEND_DIRECTION=3,l.COMPRESS=4,l.STRETCH=5,l}(e);o.IkConstraintTimeline=M;var x=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E*l.ENTRIES),R}return l.prototype.getPropertyId=function(){return(r.transformConstraint<<24)+this.transformConstraintIndex},l.prototype.setFrame=function(E,R,S,k,A,V){E*=l.ENTRIES,this.frames[E]=R,this.frames[E+l.ROTATE]=S,this.frames[E+l.TRANSLATE]=k,this.frames[E+l.SCALE]=A,this.frames[E+l.SHEAR]=V},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.transformConstraints[this.transformConstraintIndex];if(!!v.active){if(S<T[0]){var y=v.data;switch(V){case m.setup:v.rotateMix=y.rotateMix,v.translateMix=y.translateMix,v.scaleMix=y.scaleMix,v.shearMix=y.shearMix;return;case m.first:v.rotateMix+=(y.rotateMix-v.rotateMix)*A,v.translateMix+=(y.translateMix-v.translateMix)*A,v.scaleMix+=(y.scaleMix-v.scaleMix)*A,v.shearMix+=(y.shearMix-v.shearMix)*A}return}var U=0,b=0,Y=0,D=0;if(S>=T[T.length-l.ENTRIES]){var O=T.length;U=T[O+l.PREV_ROTATE],b=T[O+l.PREV_TRANSLATE],Y=T[O+l.PREV_SCALE],D=T[O+l.PREV_SHEAR]}else{var B=L.binarySearch(T,S,l.ENTRIES);U=T[B+l.PREV_ROTATE],b=T[B+l.PREV_TRANSLATE],Y=T[B+l.PREV_SCALE],D=T[B+l.PREV_SHEAR];var X=T[B],_=this.getCurvePercent(B/l.ENTRIES-1,1-(S-X)/(T[B+l.PREV_TIME]-X));U+=(T[B+l.ROTATE]-U)*_,b+=(T[B+l.TRANSLATE]-b)*_,Y+=(T[B+l.SCALE]-Y)*_,D+=(T[B+l.SHEAR]-D)*_}if(V==m.setup){var y=v.data;v.rotateMix=y.rotateMix+(U-y.rotateMix)*A,v.translateMix=y.translateMix+(b-y.translateMix)*A,v.scaleMix=y.scaleMix+(Y-y.scaleMix)*A,v.shearMix=y.shearMix+(D-y.shearMix)*A}else v.rotateMix+=(U-v.rotateMix)*A,v.translateMix+=(b-v.translateMix)*A,v.scaleMix+=(Y-v.scaleMix)*A,v.shearMix+=(D-v.shearMix)*A}},l.ENTRIES=5,l.PREV_TIME=-5,l.PREV_ROTATE=-4,l.PREV_TRANSLATE=-3,l.PREV_SCALE=-2,l.PREV_SHEAR=-1,l.ROTATE=1,l.TRANSLATE=2,l.SCALE=3,l.SHEAR=4,l}(e);o.TransformConstraintTimeline=x;var P=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E*l.ENTRIES),R}return l.prototype.getPropertyId=function(){return(r.pathConstraintPosition<<24)+this.pathConstraintIndex},l.prototype.setFrame=function(E,R,S){E*=l.ENTRIES,this.frames[E]=R,this.frames[E+l.VALUE]=S},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.pathConstraints[this.pathConstraintIndex];if(!!v.active){if(S<T[0]){switch(V){case m.setup:v.position=v.data.position;return;case m.first:v.position+=(v.data.position-v.position)*A}return}var y=0;if(S>=T[T.length-l.ENTRIES])y=T[T.length+l.PREV_VALUE];else{var U=L.binarySearch(T,S,l.ENTRIES);y=T[U+l.PREV_VALUE];var b=T[U],Y=this.getCurvePercent(U/l.ENTRIES-1,1-(S-b)/(T[U+l.PREV_TIME]-b));y+=(T[U+l.VALUE]-y)*Y}V==m.setup?v.position=v.data.position+(y-v.data.position)*A:v.position+=(y-v.position)*A}},l.ENTRIES=2,l.PREV_TIME=-2,l.PREV_VALUE=-1,l.VALUE=1,l}(e);o.PathConstraintPositionTimeline=P;var C=function(w){__extends(l,w);function l(E){return w.call(this,E)||this}return l.prototype.getPropertyId=function(){return(r.pathConstraintSpacing<<24)+this.pathConstraintIndex},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.pathConstraints[this.pathConstraintIndex];if(!!v.active){if(S<T[0]){switch(V){case m.setup:v.spacing=v.data.spacing;return;case m.first:v.spacing+=(v.data.spacing-v.spacing)*A}return}var y=0;if(S>=T[T.length-l.ENTRIES])y=T[T.length+l.PREV_VALUE];else{var U=L.binarySearch(T,S,l.ENTRIES);y=T[U+l.PREV_VALUE];var b=T[U],Y=this.getCurvePercent(U/l.ENTRIES-1,1-(S-b)/(T[U+l.PREV_TIME]-b));y+=(T[U+l.VALUE]-y)*Y}V==m.setup?v.spacing=v.data.spacing+(y-v.data.spacing)*A:v.spacing+=(y-v.spacing)*A}},l}(P);o.PathConstraintSpacingTimeline=C;var I=function(w){__extends(l,w);function l(E){var R=w.call(this,E)||this;return R.frames=o.Utils.newFloatArray(E*l.ENTRIES),R}return l.prototype.getPropertyId=function(){return(r.pathConstraintMix<<24)+this.pathConstraintIndex},l.prototype.setFrame=function(E,R,S,k){E*=l.ENTRIES,this.frames[E]=R,this.frames[E+l.ROTATE]=S,this.frames[E+l.TRANSLATE]=k},l.prototype.apply=function(E,R,S,k,A,V,N){var T=this.frames,v=E.pathConstraints[this.pathConstraintIndex];if(!!v.active){if(S<T[0]){switch(V){case m.setup:v.rotateMix=v.data.rotateMix,v.translateMix=v.data.translateMix;return;case m.first:v.rotateMix+=(v.data.rotateMix-v.rotateMix)*A,v.translateMix+=(v.data.translateMix-v.translateMix)*A}return}var y=0,U=0;if(S>=T[T.length-l.ENTRIES])y=T[T.length+l.PREV_ROTATE],U=T[T.length+l.PREV_TRANSLATE];else{var b=L.binarySearch(T,S,l.ENTRIES);y=T[b+l.PREV_ROTATE],U=T[b+l.PREV_TRANSLATE];var Y=T[b],D=this.getCurvePercent(b/l.ENTRIES-1,1-(S-Y)/(T[b+l.PREV_TIME]-Y));y+=(T[b+l.ROTATE]-y)*D,U+=(T[b+l.TRANSLATE]-U)*D}V==m.setup?(v.rotateMix=v.data.rotateMix+(y-v.data.rotateMix)*A,v.translateMix=v.data.translateMix+(U-v.data.translateMix)*A):(v.rotateMix+=(y-v.rotateMix)*A,v.translateMix+=(U-v.translateMix)*A)}},l.ENTRIES=3,l.PREV_TIME=-3,l.PREV_ROTATE=-2,l.PREV_TRANSLATE=-1,l.ROTATE=1,l.TRANSLATE=2,l}(e);o.PathConstraintMixTimeline=I})(spine||(spine={}));var spine;(function(o){var L=function(){function t(a){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new o.IntSet,this.animationsChanged=!1,this.trackEntryPool=new o.Pool(function(){return new m}),this.data=a}return t.prototype.update=function(a){a*=this.timeScale;for(var s=this.tracks,i=0,c=s.length;i<c;i++){var u=s[i];if(u!=null){u.animationLast=u.nextAnimationLast,u.trackLast=u.nextTrackLast;var g=a*u.timeScale;if(u.delay>0){if(u.delay-=g,u.delay>0)continue;g=-u.delay,u.delay=0}var h=u.next;if(h!=null){var d=u.trackLast-h.delay;if(d>=0){for(h.delay=0,h.trackTime+=u.timeScale==0?0:(d/u.timeScale+a)*h.timeScale,u.trackTime+=g,this.setCurrent(i,h,!0);h.mixingFrom!=null;)h.mixTime+=a,h=h.mixingFrom;continue}}else if(u.trackLast>=u.trackEnd&&u.mixingFrom==null){s[i]=null,this.queue.end(u),this.disposeNext(u);continue}if(u.mixingFrom!=null&&this.updateMixingFrom(u,a)){var f=u.mixingFrom;for(u.mixingFrom=null,f!=null&&(f.mixingTo=null);f!=null;)this.queue.end(f),f=f.mixingFrom}u.trackTime+=g}}this.queue.drain()},t.prototype.updateMixingFrom=function(a,s){var i=a.mixingFrom;if(i==null)return!0;var c=this.updateMixingFrom(i,s);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,a.mixTime>0&&a.mixTime>=a.mixDuration?((i.totalAlpha==0||a.mixDuration==0)&&(a.mixingFrom=i.mixingFrom,i.mixingFrom!=null&&(i.mixingFrom.mixingTo=a),a.interruptAlpha=i.interruptAlpha,this.queue.end(i)),c):(i.trackTime+=s*i.timeScale,a.mixTime+=s,!1)},t.prototype.apply=function(a){if(a==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var s=this.events,i=this.tracks,c=!1,u=0,g=i.length;u<g;u++){var h=i[u];if(!(h==null||h.delay>0)){c=!0;var d=u==0?o.MixBlend.first:h.mixBlend,f=h.alpha;h.mixingFrom!=null?f*=this.applyMixingFrom(h,a,d):h.trackTime>=h.trackEnd&&h.next==null&&(f=0);var p=h.animationLast,M=h.getAnimationTime(),x=h.animation.timelines.length,P=h.animation.timelines;if(u==0&&f==1||d==o.MixBlend.add)for(var C=0;C<x;C++){o.Utils.webkit602BugfixHelper(f,d);var I=P[C];I instanceof o.AttachmentTimeline?this.applyAttachmentTimeline(I,a,M,d,!0):I.apply(a,p,M,s,f,d,o.MixDirection.mixIn)}else{var w=h.timelineMode,l=h.timelinesRotation.length==0;l&&o.Utils.setArraySize(h.timelinesRotation,x<<1,null);for(var E=h.timelinesRotation,C=0;C<x;C++){var R=P[C],S=w[C]==t.SUBSEQUENT?d:o.MixBlend.setup;R instanceof o.RotateTimeline?this.applyRotateTimeline(R,a,M,f,S,E,C<<1,l):R instanceof o.AttachmentTimeline?this.applyAttachmentTimeline(R,a,M,d,!0):(o.Utils.webkit602BugfixHelper(f,d),R.apply(a,p,M,s,f,S,o.MixDirection.mixIn))}}this.queueEvents(h,M),s.length=0,h.nextAnimationLast=M,h.nextTrackLast=h.trackTime}}for(var k=this.unkeyedState+t.SETUP,A=a.slots,V=0,N=a.slots.length;V<N;V++){var T=A[V];if(T.attachmentState==k){var v=T.data.attachmentName;T.attachment=v==null?null:a.getAttachment(T.data.index,v)}}return this.unkeyedState+=2,this.queue.drain(),c},t.prototype.applyMixingFrom=function(a,s,i){var c=a.mixingFrom;c.mixingFrom!=null&&this.applyMixingFrom(c,s,i);var u=0;a.mixDuration==0?(u=1,i==o.MixBlend.first&&(i=o.MixBlend.setup)):(u=a.mixTime/a.mixDuration,u>1&&(u=1),i!=o.MixBlend.first&&(i=c.mixBlend));var g=u<c.eventThreshold?this.events:null,h=u<c.attachmentThreshold,d=u<c.drawOrderThreshold,f=c.animationLast,p=c.getAnimationTime(),M=c.animation.timelines.length,x=c.animation.timelines,P=c.alpha*a.interruptAlpha,C=P*(1-u);if(i==o.MixBlend.add)for(var I=0;I<M;I++)x[I].apply(s,f,p,g,C,i,o.MixDirection.mixOut);else{var w=c.timelineMode,l=c.timelineHoldMix,E=c.timelinesRotation.length==0;E&&o.Utils.setArraySize(c.timelinesRotation,M<<1,null);var R=c.timelinesRotation;c.totalAlpha=0;for(var I=0;I<M;I++){var S=x[I],k=o.MixDirection.mixOut,A=void 0,V=0;switch(w[I]){case t.SUBSEQUENT:if(!d&&S instanceof o.DrawOrderTimeline)continue;A=i,V=C;break;case t.FIRST:A=o.MixBlend.setup,V=C;break;case t.HOLD_SUBSEQUENT:A=i,V=P;break;case t.HOLD_FIRST:A=o.MixBlend.setup,V=P;break;default:A=o.MixBlend.setup;var N=l[I];V=P*Math.max(0,1-N.mixTime/N.mixDuration);break}c.totalAlpha+=V,S instanceof o.RotateTimeline?this.applyRotateTimeline(S,s,p,V,A,R,I<<1,E):S instanceof o.AttachmentTimeline?this.applyAttachmentTimeline(S,s,p,A,h):(o.Utils.webkit602BugfixHelper(V,i),d&&S instanceof o.DrawOrderTimeline&&A==o.MixBlend.setup&&(k=o.MixDirection.mixIn),S.apply(s,f,p,g,V,A,k))}}return a.mixDuration>0&&this.queueEvents(c,p),this.events.length=0,c.nextAnimationLast=p,c.nextTrackLast=c.trackTime,u},t.prototype.applyAttachmentTimeline=function(a,s,i,c,u){var g=s.slots[a.slotIndex];if(!!g.bone.active){var h=a.frames;if(i<h[0])(c==o.MixBlend.setup||c==o.MixBlend.first)&&this.setAttachment(s,g,g.data.attachmentName,u);else{var d;i>=h[h.length-1]?d=h.length-1:d=o.Animation.binarySearch(h,i)-1,this.setAttachment(s,g,a.attachmentNames[d],u)}g.attachmentState<=this.unkeyedState&&(g.attachmentState=this.unkeyedState+t.SETUP)}},t.prototype.setAttachment=function(a,s,i,c){s.setAttachment(i==null?null:a.getAttachment(s.data.index,i)),c&&(s.attachmentState=this.unkeyedState+t.CURRENT)},t.prototype.applyRotateTimeline=function(a,s,i,c,u,g,h,d){if(d&&(g[h]=0),c==1){a.apply(s,0,i,null,1,u,o.MixDirection.mixIn);return}var f=a,p=f.frames,M=s.bones[f.boneIndex];if(!!M.active){var x=0,P=0;if(i<p[0])switch(u){case o.MixBlend.setup:M.rotation=M.data.rotation;default:return;case o.MixBlend.first:x=M.rotation,P=M.data.rotation}else if(x=u==o.MixBlend.setup?M.data.rotation:M.rotation,i>=p[p.length-o.RotateTimeline.ENTRIES])P=M.data.rotation+p[p.length+o.RotateTimeline.PREV_ROTATION];else{var C=o.Animation.binarySearch(p,i,o.RotateTimeline.ENTRIES),I=p[C+o.RotateTimeline.PREV_ROTATION],w=p[C],l=f.getCurvePercent((C>>1)-1,1-(i-w)/(p[C+o.RotateTimeline.PREV_TIME]-w));P=p[C+o.RotateTimeline.ROTATION]-I,P-=(16384-(16384.499999999996-P/360|0))*360,P=I+P*l+M.data.rotation,P-=(16384-(16384.499999999996-P/360|0))*360}var E=0,R=P-x;if(R-=(16384-(16384.499999999996-R/360|0))*360,R==0)E=g[h];else{var S=0,k=0;d?(S=0,k=R):(S=g[h],k=g[h+1]);var A=R>0,V=S>=0;o.MathUtils.signum(k)!=o.MathUtils.signum(R)&&Math.abs(k)<=90&&(Math.abs(S)>180&&(S+=360*o.MathUtils.signum(S)),V=A),E=R+S-S%360,V!=A&&(E+=360*o.MathUtils.signum(S)),g[h]=E}g[h+1]=R,x+=E*c,M.rotation=x-(16384-(16384.499999999996-x/360|0))*360}},t.prototype.queueEvents=function(a,s){for(var i=a.animationStart,c=a.animationEnd,u=c-i,g=a.trackLast%u,h=this.events,d=0,f=h.length;d<f;d++){var p=h[d];if(p.time<g)break;p.time>c||this.queue.event(a,p)}var M=!1;for(a.loop?M=u==0||g>a.trackTime%u:M=s>=c&&a.animationLast<c,M&&this.queue.complete(a);d<f;d++){var x=h[d];x.time<i||this.queue.event(a,h[d])}},t.prototype.clearTracks=function(){var a=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var s=0,i=this.tracks.length;s<i;s++)this.clearTrack(s);this.tracks.length=0,this.queue.drainDisabled=a,this.queue.drain()},t.prototype.clearTrack=function(a){if(!(a>=this.tracks.length)){var s=this.tracks[a];if(s!=null){this.queue.end(s),this.disposeNext(s);for(var i=s;;){var c=i.mixingFrom;if(c==null)break;this.queue.end(c),i.mixingFrom=null,i.mixingTo=null,i=c}this.tracks[s.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(a,s,i){var c=this.expandToIndex(a);this.tracks[a]=s,c!=null&&(i&&this.queue.interrupt(c),s.mixingFrom=c,c.mixingTo=s,s.mixTime=0,c.mixingFrom!=null&&c.mixDuration>0&&(s.interruptAlpha*=Math.min(1,c.mixTime/c.mixDuration)),c.timelinesRotation.length=0),this.queue.start(s)},t.prototype.setAnimation=function(a,s,i){var c=this.data.skeletonData.findAnimation(s);if(c==null)throw new Error("Animation not found: "+s);return this.setAnimationWith(a,c,i)},t.prototype.setAnimationWith=function(a,s,i){if(s==null)throw new Error("animation cannot be null.");var c=!0,u=this.expandToIndex(a);u!=null&&(u.nextTrackLast==-1?(this.tracks[a]=u.mixingFrom,this.queue.interrupt(u),this.queue.end(u),this.disposeNext(u),u=u.mixingFrom,c=!1):this.disposeNext(u));var g=this.trackEntry(a,s,i,u);return this.setCurrent(a,g,c),this.queue.drain(),g},t.prototype.addAnimation=function(a,s,i,c){var u=this.data.skeletonData.findAnimation(s);if(u==null)throw new Error("Animation not found: "+s);return this.addAnimationWith(a,u,i,c)},t.prototype.addAnimationWith=function(a,s,i,c){if(s==null)throw new Error("animation cannot be null.");var u=this.expandToIndex(a);if(u!=null)for(;u.next!=null;)u=u.next;var g=this.trackEntry(a,s,i,u);if(u==null)this.setCurrent(a,g,!0),this.queue.drain();else if(u.next=g,c<=0){var h=u.animationEnd-u.animationStart;h!=0?(u.loop?c+=h*(1+(u.trackTime/h|0)):c+=Math.max(h,u.trackTime),c-=this.data.getMix(u.animation,s)):c=u.trackTime}return g.delay=c,g},t.prototype.setEmptyAnimation=function(a,s){var i=this.setAnimationWith(a,t.emptyAnimation,!1);return i.mixDuration=s,i.trackEnd=s,i},t.prototype.addEmptyAnimation=function(a,s,i){i<=0&&(i-=s);var c=this.addAnimationWith(a,t.emptyAnimation,!1,i);return c.mixDuration=s,c.trackEnd=s,c},t.prototype.setEmptyAnimations=function(a){var s=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,c=this.tracks.length;i<c;i++){var u=this.tracks[i];u!=null&&this.setEmptyAnimation(u.trackIndex,a)}this.queue.drainDisabled=s,this.queue.drain()},t.prototype.expandToIndex=function(a){return a<this.tracks.length?this.tracks[a]:(o.Utils.ensureArrayCapacity(this.tracks,a+1,null),this.tracks.length=a+1,null)},t.prototype.trackEntry=function(a,s,i,c){var u=this.trackEntryPool.obtain();return u.trackIndex=a,u.animation=s,u.loop=i,u.holdPrevious=!1,u.eventThreshold=0,u.attachmentThreshold=0,u.drawOrderThreshold=0,u.animationStart=0,u.animationEnd=s.duration,u.animationLast=-1,u.nextAnimationLast=-1,u.delay=0,u.trackTime=0,u.trackLast=-1,u.nextTrackLast=-1,u.trackEnd=Number.MAX_VALUE,u.timeScale=1,u.alpha=1,u.interruptAlpha=1,u.mixTime=0,u.mixDuration=c==null?0:this.data.getMix(c.animation,s),u.mixBlend=o.MixBlend.replace,u},t.prototype.disposeNext=function(a){for(var s=a.next;s!=null;)this.queue.dispose(s),s=s.next;a.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var a=0,s=this.tracks.length;a<s;a++){var i=this.tracks[a];if(i!=null){for(;i.mixingFrom!=null;)i=i.mixingFrom;do(i.mixingFrom==null||i.mixBlend!=o.MixBlend.add)&&this.computeHold(i),i=i.mixingTo;while(i!=null)}}},t.prototype.computeHold=function(a){var s=a.mixingTo,i=a.animation.timelines,c=a.animation.timelines.length,u=o.Utils.setArraySize(a.timelineMode,c);a.timelineHoldMix.length=0;var g=o.Utils.setArraySize(a.timelineHoldMix,c),h=this.propertyIDs;if(s!=null&&s.holdPrevious){for(var d=0;d<c;d++)u[d]=h.add(i[d].getPropertyId())?t.HOLD_FIRST:t.HOLD_SUBSEQUENT;return}t:for(var d=0;d<c;d++){var f=i[d],p=f.getPropertyId();if(!h.add(p))u[d]=t.SUBSEQUENT;else if(s==null||f instanceof o.AttachmentTimeline||f instanceof o.DrawOrderTimeline||f instanceof o.EventTimeline||!s.animation.hasTimeline(p))u[d]=t.FIRST;else{for(var M=s.mixingTo;M!=null;M=M.mixingTo)if(!M.animation.hasTimeline(p)){if(a.mixDuration>0){u[d]=t.HOLD_MIX,g[d]=M;continue t}break}u[d]=t.HOLD_FIRST}}},t.prototype.getCurrent=function(a){return a>=this.tracks.length?null:this.tracks[a]},t.prototype.addListener=function(a){if(a==null)throw new Error("listener cannot be null.");this.listeners.push(a)},t.prototype.removeListener=function(a){var s=this.listeners.indexOf(a);s>=0&&this.listeners.splice(s,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.emptyAnimation=new o.Animation("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD_SUBSEQUENT=2,t.HOLD_FIRST=3,t.HOLD_MIX=4,t.SETUP=1,t.CURRENT=2,t}();o.AnimationState=L;var m=function(){function t(){this.mixBlend=o.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var a=this.animationEnd-this.animationStart;return a==0?this.animationStart:this.trackTime%a+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(a){this.animationLast=a,this.nextAnimationLast=a},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t}();o.TrackEntry=m;var n=function(){function t(a){this.objects=[],this.drainDisabled=!1,this.animState=a}return t.prototype.start=function(a){this.objects.push(r.start),this.objects.push(a),this.animState.animationsChanged=!0},t.prototype.interrupt=function(a){this.objects.push(r.interrupt),this.objects.push(a)},t.prototype.end=function(a){this.objects.push(r.end),this.objects.push(a),this.animState.animationsChanged=!0},t.prototype.dispose=function(a){this.objects.push(r.dispose),this.objects.push(a)},t.prototype.complete=function(a){this.objects.push(r.complete),this.objects.push(a)},t.prototype.event=function(a,s){this.objects.push(r.event),this.objects.push(a),this.objects.push(s)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var a=this.objects,s=this.animState.listeners,i=0;i<a.length;i+=2){var c=a[i],u=a[i+1];switch(c){case r.start:u.listener!=null&&u.listener.start&&u.listener.start(u);for(var g=0;g<s.length;g++)s[g].start&&s[g].start(u);break;case r.interrupt:u.listener!=null&&u.listener.interrupt&&u.listener.interrupt(u);for(var g=0;g<s.length;g++)s[g].interrupt&&s[g].interrupt(u);break;case r.end:u.listener!=null&&u.listener.end&&u.listener.end(u);for(var g=0;g<s.length;g++)s[g].end&&s[g].end(u);case r.dispose:u.listener!=null&&u.listener.dispose&&u.listener.dispose(u);for(var g=0;g<s.length;g++)s[g].dispose&&s[g].dispose(u);this.animState.trackEntryPool.free(u);break;case r.complete:u.listener!=null&&u.listener.complete&&u.listener.complete(u);for(var g=0;g<s.length;g++)s[g].complete&&s[g].complete(u);break;case r.event:var h=a[i+++2];u.listener!=null&&u.listener.event&&u.listener.event(u,h);for(var g=0;g<s.length;g++)s[g].event&&s[g].event(u,h);break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();o.EventQueue=n;var r;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"})(r=o.EventType||(o.EventType={}));var e=function(){function t(){}return t.prototype.start=function(a){},t.prototype.interrupt=function(a){},t.prototype.end=function(a){},t.prototype.dispose=function(a){},t.prototype.complete=function(a){},t.prototype.event=function(a,s){},t}();o.AnimationStateAdapter=e})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n){if(this.animationToMixTime={},this.defaultMix=0,n==null)throw new Error("skeletonData cannot be null.");this.skeletonData=n}return m.prototype.setMix=function(n,r,e){var t=this.skeletonData.findAnimation(n);if(t==null)throw new Error("Animation not found: "+n);var a=this.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);this.setMixWith(t,a,e)},m.prototype.setMixWith=function(n,r,e){if(n==null)throw new Error("from cannot be null.");if(r==null)throw new Error("to cannot be null.");var t=n.name+"."+r.name;this.animationToMixTime[t]=e},m.prototype.getMix=function(n,r){var e=n.name+"."+r.name,t=this.animationToMixTime[e];return t===void 0?this.defaultMix:t},m}();o.AnimationStateData=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r){r===void 0&&(r=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=n,this.pathPrefix=r}return m.prototype.downloadText=function(n,r,e){var t=new XMLHttpRequest;t.overrideMimeType("text/html"),this.rawDataUris[n]&&(n=this.rawDataUris[n]),t.open("GET",n,!0),t.onload=function(){t.status==200?r(t.responseText):e(t.status,t.responseText)},t.onerror=function(){e(t.status,t.responseText)},t.send()},m.prototype.downloadBinary=function(n,r,e){var t=new XMLHttpRequest;this.rawDataUris[n]&&(n=this.rawDataUris[n]),t.open("GET",n,!0),t.responseType="arraybuffer",t.onload=function(){t.status==200?r(new Uint8Array(t.response)):e(t.status,t.responseText)},t.onerror=function(){e(t.status,t.responseText)},t.send()},m.prototype.setRawDataURI=function(n,r){this.rawDataUris[this.pathPrefix+n]=r},m.prototype.loadBinary=function(n,r,e){var t=this;r===void 0&&(r=null),e===void 0&&(e=null),n=this.pathPrefix+n,this.toLoad++,this.downloadBinary(n,function(a){t.assets[n]=a,r&&r(n,a),t.toLoad--,t.loaded++},function(a,s){t.errors[n]="Couldn't load binary "+n+": status "+status+", "+s,e&&e(n,"Couldn't load binary "+n+": status "+status+", "+s),t.toLoad--,t.loaded++})},m.prototype.loadText=function(n,r,e){var t=this;r===void 0&&(r=null),e===void 0&&(e=null),n=this.pathPrefix+n,this.toLoad++,this.downloadText(n,function(a){t.assets[n]=a,r&&r(n,a),t.toLoad--,t.loaded++},function(a,s){t.errors[n]="Couldn't load text "+n+": status "+status+", "+s,e&&e(n,"Couldn't load text "+n+": status "+status+", "+s),t.toLoad--,t.loaded++})},m.prototype.loadTexture=function(n,r,e){var t=this;r===void 0&&(r=null),e===void 0&&(e=null),n=this.pathPrefix+n;var a=n;this.toLoad++;var s=new Image;s.crossOrigin="anonymous",s.onload=function(i){var c=t.textureLoader(s);t.assets[a]=c,t.toLoad--,t.loaded++,r&&r(n,s)},s.onerror=function(i){t.errors[n]="Couldn't load image "+n,t.toLoad--,t.loaded++,e&&e(n,"Couldn't load image "+n)},this.rawDataUris[n]&&(n=this.rawDataUris[n]),s.src=n},m.prototype.loadTextureAtlas=function(n,r,e){var t=this;r===void 0&&(r=null),e===void 0&&(e=null);var a=n.lastIndexOf("/")>=0?n.substring(0,n.lastIndexOf("/")):"";n=this.pathPrefix+n,this.toLoad++,this.downloadText(n,function(s){var i={count:0},c=new Array;try{var u=new o.TextureAtlas(s,function(M){c.push(a==""?M:a+"/"+M);var x=document.createElement("img");return x.width=16,x.height=16,new o.FakeTexture(x)})}catch(M){var g=M;t.errors[n]="Couldn't load texture atlas "+n+": "+g.message,e&&e(n,"Couldn't load texture atlas "+n+": "+g.message),t.toLoad--,t.loaded++;return}for(var h=function(M){var x=!1;t.loadTexture(M,function(P,C){if(i.count++,i.count==c.length)if(x)t.errors[n]="Couldn't load texture atlas page "+P+"} of atlas "+n,e&&e(n,"Couldn't load texture atlas page "+P+" of atlas "+n),t.toLoad--,t.loaded++;else try{var I=new o.TextureAtlas(s,function(l){return t.get(a==""?l:a+"/"+l)});t.assets[n]=I,r&&r(n,I),t.toLoad--,t.loaded++}catch(l){var w=l;t.errors[n]="Couldn't load texture atlas "+n+": "+w.message,e&&e(n,"Couldn't load texture atlas "+n+": "+w.message),t.toLoad--,t.loaded++}},function(P,C){x=!0,i.count++,i.count==c.length&&(t.errors[n]="Couldn't load texture atlas page "+P+"} of atlas "+n,e&&e(n,"Couldn't load texture atlas page "+P+" of atlas "+n),t.toLoad--,t.loaded++)})},d=0,f=c;d<f.length;d++){var p=f[d];h(p)}},function(s,i){t.errors[n]="Couldn't load texture atlas "+n+": status "+status+", "+i,e&&e(n,"Couldn't load texture atlas "+n+": status "+status+", "+i),t.toLoad--,t.loaded++})},m.prototype.get=function(n){return n=this.pathPrefix+n,this.assets[n]},m.prototype.remove=function(n){n=this.pathPrefix+n;var r=this.assets[n];r.dispose&&r.dispose(),this.assets[n]=null},m.prototype.removeAll=function(){for(var n in this.assets){var r=this.assets[n];r.dispose&&r.dispose()}this.assets={}},m.prototype.isLoadingComplete=function(){return this.toLoad==0},m.prototype.getToLoad=function(){return this.toLoad},m.prototype.getLoaded=function(){return this.loaded},m.prototype.dispose=function(){this.removeAll()},m.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},m.prototype.getErrors=function(){return this.errors},m}();o.AssetManager=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n){this.atlas=n}return m.prototype.newRegionAttachment=function(n,r,e){var t=this.atlas.findRegion(e);if(t==null)throw new Error("Region not found in atlas: "+e+" (region attachment: "+r+")");t.renderObject=t;var a=new o.RegionAttachment(r);return a.setRegion(t),a},m.prototype.newMeshAttachment=function(n,r,e){var t=this.atlas.findRegion(e);if(t==null)throw new Error("Region not found in atlas: "+e+" (mesh attachment: "+r+")");t.renderObject=t;var a=new o.MeshAttachment(r);return a.region=t,a},m.prototype.newBoundingBoxAttachment=function(n,r){return new o.BoundingBoxAttachment(r)},m.prototype.newPathAttachment=function(n,r){return new o.PathAttachment(r)},m.prototype.newPointAttachment=function(n,r){return new o.PointAttachment(r)},m.prototype.newClippingAttachment=function(n,r){return new o.ClippingAttachment(r)},m}();o.AtlasAttachmentLoader=L})(spine||(spine={}));var spine;(function(o){var L;(function(m){m[m.Normal=0]="Normal",m[m.Additive=1]="Additive",m[m.Multiply=2]="Multiply",m[m.Screen=3]="Screen"})(L=o.BlendMode||(o.BlendMode={}))})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r,e){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=n,this.skeleton=r,this.parent=e,this.setToSetupPose()}return m.prototype.isActive=function(){return this.active},m.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},m.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},m.prototype.updateWorldTransformWith=function(n,r,e,t,a,s,i){this.ax=n,this.ay=r,this.arotation=e,this.ascaleX=t,this.ascaleY=a,this.ashearX=s,this.ashearY=i,this.appliedValid=!0;var c=this.parent;if(c==null){var u=this.skeleton,g=e+90+i,h=u.scaleX,d=u.scaleY;this.a=o.MathUtils.cosDeg(e+s)*t*h,this.b=o.MathUtils.cosDeg(g)*a*h,this.c=o.MathUtils.sinDeg(e+s)*t*d,this.d=o.MathUtils.sinDeg(g)*a*d,this.worldX=n*h+u.x,this.worldY=r*d+u.y;return}var f=c.a,p=c.b,M=c.c,x=c.d;switch(this.worldX=f*n+p*r+c.worldX,this.worldY=M*n+x*r+c.worldY,this.data.transformMode){case o.TransformMode.Normal:{var g=e+90+i,P=o.MathUtils.cosDeg(e+s)*t,C=o.MathUtils.cosDeg(g)*a,I=o.MathUtils.sinDeg(e+s)*t,w=o.MathUtils.sinDeg(g)*a;this.a=f*P+p*I,this.b=f*C+p*w,this.c=M*P+x*I,this.d=M*C+x*w;return}case o.TransformMode.OnlyTranslation:{var g=e+90+i;this.a=o.MathUtils.cosDeg(e+s)*t,this.b=o.MathUtils.cosDeg(g)*a,this.c=o.MathUtils.sinDeg(e+s)*t,this.d=o.MathUtils.sinDeg(g)*a;break}case o.TransformMode.NoRotationOrReflection:{var l=f*f+M*M,E=0;l>1e-4?(l=Math.abs(f*x-p*M)/l,f/=this.skeleton.scaleX,M/=this.skeleton.scaleY,p=M*l,x=f*l,E=Math.atan2(M,f)*o.MathUtils.radDeg):(f=0,M=0,E=90-Math.atan2(x,p)*o.MathUtils.radDeg);var R=e+s-E,S=e+i-E+90,P=o.MathUtils.cosDeg(R)*t,C=o.MathUtils.cosDeg(S)*a,I=o.MathUtils.sinDeg(R)*t,w=o.MathUtils.sinDeg(S)*a;this.a=f*P-p*I,this.b=f*C-p*w,this.c=M*P+x*I,this.d=M*C+x*w;break}case o.TransformMode.NoScale:case o.TransformMode.NoScaleOrReflection:{var k=o.MathUtils.cosDeg(e),A=o.MathUtils.sinDeg(e),V=(f*k+p*A)/this.skeleton.scaleX,N=(M*k+x*A)/this.skeleton.scaleY,l=Math.sqrt(V*V+N*N);l>1e-5&&(l=1/l),V*=l,N*=l,l=Math.sqrt(V*V+N*N),this.data.transformMode==o.TransformMode.NoScale&&f*x-p*M<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(l=-l);var T=Math.PI/2+Math.atan2(N,V),v=Math.cos(T)*l,y=Math.sin(T)*l,P=o.MathUtils.cosDeg(s)*t,C=o.MathUtils.cosDeg(90+i)*a,I=o.MathUtils.sinDeg(s)*t,w=o.MathUtils.sinDeg(90+i)*a;this.a=V*P+v*I,this.b=V*C+v*w,this.c=N*P+y*I,this.d=N*C+y*w;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},m.prototype.setToSetupPose=function(){var n=this.data;this.x=n.x,this.y=n.y,this.rotation=n.rotation,this.scaleX=n.scaleX,this.scaleY=n.scaleY,this.shearX=n.shearX,this.shearY=n.shearY},m.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*o.MathUtils.radDeg},m.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*o.MathUtils.radDeg},m.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},m.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},m.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var n=this.parent;if(n==null){this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*o.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*o.MathUtils.radDeg;return}var r=n.a,e=n.b,t=n.c,a=n.d,s=1/(r*a-e*t),i=this.worldX-n.worldX,c=this.worldY-n.worldY;this.ax=i*a*s-c*e*s,this.ay=c*r*s-i*t*s;var u=s*a,g=s*r,h=s*e,d=s*t,f=u*this.a-h*this.c,p=u*this.b-h*this.d,M=g*this.c-d*this.a,x=g*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+M*M),this.ascaleX>1e-4){var P=f*x-p*M;this.ascaleY=P/this.ascaleX,this.ashearY=Math.atan2(f*p+M*x,P)*o.MathUtils.radDeg,this.arotation=Math.atan2(M,f)*o.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+x*x),this.ashearY=0,this.arotation=90-Math.atan2(x,p)*o.MathUtils.radDeg},m.prototype.worldToLocal=function(n){var r=this.a,e=this.b,t=this.c,a=this.d,s=1/(r*a-e*t),i=n.x-this.worldX,c=n.y-this.worldY;return n.x=i*a*s-c*e*s,n.y=c*r*s-i*t*s,n},m.prototype.localToWorld=function(n){var r=n.x,e=n.y;return n.x=r*this.a+e*this.b+this.worldX,n.y=r*this.c+e*this.d+this.worldY,n},m.prototype.worldToLocalRotation=function(n){var r=o.MathUtils.sinDeg(n),e=o.MathUtils.cosDeg(n);return Math.atan2(this.a*r-this.c*e,this.d*e-this.b*r)*o.MathUtils.radDeg+this.rotation-this.shearX},m.prototype.localToWorldRotation=function(n){n-=this.rotation-this.shearX;var r=o.MathUtils.sinDeg(n),e=o.MathUtils.cosDeg(n);return Math.atan2(e*this.c+r*this.d,e*this.a+r*this.b)*o.MathUtils.radDeg},m.prototype.rotateWorld=function(n){var r=this.a,e=this.b,t=this.c,a=this.d,s=o.MathUtils.cosDeg(n),i=o.MathUtils.sinDeg(n);this.a=s*r-i*t,this.b=s*e-i*a,this.c=i*r+s*t,this.d=i*e+s*a,this.appliedValid=!1},m}();o.Bone=L})(spine||(spine={}));var spine;(function(o){var L=function(){function n(r,e,t){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=m.Normal,this.skinRequired=!1,this.color=new o.Color,r<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=r,this.name=e,this.parent=t}return n}();o.BoneData=L;var m;(function(n){n[n.Normal=0]="Normal",n[n.OnlyTranslation=1]="OnlyTranslation",n[n.NoRotationOrReflection=2]="NoRotationOrReflection",n[n.NoScale=3]="NoScale",n[n.NoScaleOrReflection=4]="NoScaleOrReflection"})(m=o.TransformMode||(o.TransformMode={}))})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r,e){this.name=n,this.order=r,this.skinRequired=e}return m}();o.ConstraintData=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r){if(r==null)throw new Error("data cannot be null.");this.time=n,this.data=r}return m}();o.Event=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n){this.name=n}return m}();o.EventData=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=n,this.mix=n.mix,this.softness=n.softness,this.bendDirection=n.bendDirection,this.compress=n.compress,this.stretch=n.stretch,this.bones=new Array;for(var e=0;e<n.bones.length;e++)this.bones.push(r.findBone(n.bones[e].name));this.target=r.findBone(n.target.name)}return m.prototype.isActive=function(){return this.active},m.prototype.apply=function(){this.update()},m.prototype.update=function(){var n=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],n.worldX,n.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],n.worldX,n.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},m.prototype.apply1=function(n,r,e,t,a,s,i){n.appliedValid||n.updateAppliedTransform();var c=n.parent,u=c.a,g=c.b,h=c.c,d=c.d,f=-n.ashearX-n.arotation,p=0,M=0;switch(n.data.transformMode){case o.TransformMode.OnlyTranslation:p=r-n.worldX,M=e-n.worldY;break;case o.TransformMode.NoRotationOrReflection:var x=Math.abs(u*d-g*h)/(u*u+h*h),P=u/n.skeleton.scaleX,C=h/n.skeleton.scaleY;g=-C*x*n.skeleton.scaleX,d=P*x*n.skeleton.scaleY,f+=Math.atan2(C,P)*o.MathUtils.radDeg;default:var I=r-c.worldX,w=e-c.worldY,l=u*d-g*h;p=(I*d-w*g)/l-n.ax,M=(w*u-I*h)/l-n.ay}f+=Math.atan2(M,p)*o.MathUtils.radDeg,n.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var E=n.ascaleX,R=n.ascaleY;if(t||a){switch(n.data.transformMode){case o.TransformMode.NoScale:case o.TransformMode.NoScaleOrReflection:p=r-n.worldX,M=e-n.worldY}var S=n.data.length*E,k=Math.sqrt(p*p+M*M);if(t&&k<S||a&&k>S&&S>1e-4){var x=(k/S-1)*i+1;E*=x,s&&(R*=x)}}n.updateWorldTransformWith(n.ax,n.ay,n.arotation+f*i,E,R,n.ashearX,n.ashearY)},m.prototype.apply2=function(n,r,e,t,a,s,i,c){if(c==0){r.updateWorldTransform();return}n.appliedValid||n.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var u=n.ax,g=n.ay,h=n.ascaleX,d=h,f=n.ascaleY,p=r.ascaleX,M=0,x=0,P=0;h<0?(h=-h,M=180,P=-1):(M=0,P=1),f<0&&(f=-f,P=-P),p<0?(p=-p,x=180):x=0;var C=r.ax,I=0,w=0,l=0,E=n.a,R=n.b,S=n.c,k=n.d,A=Math.abs(h-f)<=1e-4;A?(I=r.ay,w=E*C+R*I+n.worldX,l=S*C+k*I+n.worldY):(I=0,w=E*C+n.worldX,l=S*C+n.worldY);var V=n.parent;E=V.a,R=V.b,S=V.c,k=V.d;var N=1/(E*k-R*S),T=w-V.worldX,v=l-V.worldY,y=(T*k-v*R)*N-u,U=(v*E-T*S)*N-g,b=Math.sqrt(y*y+U*U),Y=r.data.length*p,D,O;if(b<1e-4){this.apply1(n,e,t,!1,s,!1,c),r.updateWorldTransformWith(C,I,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}T=e-V.worldX,v=t-V.worldY;var B=(T*k-v*R)*N-u,X=(v*E-T*S)*N-g,_=B*B+X*X;if(i!=0){i*=h*(p+1)/2;var F=Math.sqrt(_),W=F-b-Y*h+i;if(W>0){var G=Math.min(1,W/(i*2))-1;G=(W-i*(1-G*G))/F,B-=G*B,X-=G*X,_=B*B+X*X}}t:if(A){Y*=h;var j=(_-b*b-Y*Y)/(2*b*Y);j<-1?j=-1:j>1&&(j=1,s&&(d*=(Math.sqrt(_)/(b+Y)-1)*c+1)),O=Math.acos(j)*a,E=b+Y*j,R=Y*Math.sin(O),D=Math.atan2(X*E-B*R,B*E+X*R)}else{E=h*Y,R=f*Y;var H=E*E,q=R*R,K=Math.atan2(X,B);S=q*b*b+H*_-H*q;var Z=-2*q*b,$=q-H;if(k=Z*Z-4*$*S,k>=0){var Q=Math.sqrt(k);Z<0&&(Q=-Q),Q=-(Z+Q)/2;var z=Q/$,at=S/Q,tt=Math.abs(z)<Math.abs(at)?z:at;if(tt*tt<=_){v=Math.sqrt(_-tt*tt)*a,D=K-Math.atan2(v,tt),O=Math.atan2(v/f,(tt-b)/h);break t}}var nt=o.MathUtils.PI,rt=b-E,et=rt*rt,J=0,lt=0,ot=b+E,ut=ot*ot,st=0;S=-E*b/(H-q),S>=-1&&S<=1&&(S=Math.acos(S),T=E*Math.cos(S)+b,v=R*Math.sin(S),k=T*T+v*v,k<et&&(nt=S,et=k,rt=T,J=v),k>ut&&(lt=S,ut=k,ot=T,st=v)),_<=(et+ut)/2?(D=K-Math.atan2(J*a,rt),O=nt*a):(D=K-Math.atan2(st*a,ot),O=lt*a)}var ht=Math.atan2(I,C)*P,it=n.arotation;D=(D-ht)*o.MathUtils.radDeg+M-it,D>180?D-=360:D<-180&&(D+=360),n.updateWorldTransformWith(u,g,it+D*c,d,n.ascaleY,0,0),it=r.arotation,O=((O+ht)*o.MathUtils.radDeg-r.ashearX)*P+x-it,O>180?O-=360:O<-180&&(O+=360),r.updateWorldTransformWith(C,I,it+O*c,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},m}();o.IkConstraint=L})(spine||(spine={}));var spine;(function(o){var L=function(m){__extends(n,m);function n(r){var e=m.call(this,r,0,!1)||this;return e.bones=new Array,e.bendDirection=1,e.compress=!1,e.stretch=!1,e.uniform=!1,e.mix=1,e.softness=0,e}return n}(o.ConstraintData);o.IkConstraintData=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=n,this.bones=new Array;for(var e=0,t=n.bones.length;e<t;e++)this.bones.push(r.findBone(n.bones[e].name));this.target=r.findSlot(n.target.name),this.position=n.position,this.spacing=n.spacing,this.rotateMix=n.rotateMix,this.translateMix=n.translateMix}return m.prototype.isActive=function(){return this.active},m.prototype.apply=function(){this.update()},m.prototype.update=function(){var n=this.target.getAttachment();if(n instanceof o.PathAttachment){var r=this.rotateMix,e=this.translateMix,t=e>0,a=r>0;if(!(!t&&!a)){var s=this.data,i=s.spacingMode==o.SpacingMode.Percent,c=s.rotateMode,u=c==o.RotateMode.Tangent,g=c==o.RotateMode.ChainScale,h=this.bones.length,d=u?h:h+1,f=this.bones,p=o.Utils.setArraySize(this.spaces,d),M=null,x=this.spacing;if(g||!i){g&&(M=o.Utils.setArraySize(this.lengths,h));for(var P=s.spacingMode==o.SpacingMode.Length,C=0,I=d-1;C<I;){var w=f[C],l=w.data.length;if(l<m.epsilon)g&&(M[C]=0),p[++C]=0;else if(i){if(g){var E=l*w.a,R=l*w.c,S=Math.sqrt(E*E+R*R);M[C]=S}p[++C]=x}else{var E=l*w.a,R=l*w.c,k=Math.sqrt(E*E+R*R);g&&(M[C]=k),p[++C]=(P?l+x:x)*k/l}}}else for(var C=1;C<d;C++)p[C]=x;var A=this.computeWorldPositions(n,d,u,s.positionMode==o.PositionMode.Percent,i),V=A[0],N=A[1],T=s.offsetRotation,v=!1;if(T==0)v=c==o.RotateMode.Chain;else{v=!1;var y=this.target.bone;T*=y.a*y.d-y.b*y.c>0?o.MathUtils.degRad:-o.MathUtils.degRad}for(var C=0,y=3;C<h;C++,y+=3){var w=f[C];w.worldX+=(V-w.worldX)*e,w.worldY+=(N-w.worldY)*e;var E=A[y],R=A[y+1],U=E-V,b=R-N;if(g){var Y=M[C];if(Y!=0){var D=(Math.sqrt(U*U+b*b)/Y-1)*r+1;w.a*=D,w.c*=D}}if(V=E,N=R,a){var O=w.a,B=w.b,X=w.c,_=w.d,F=0,W=0,G=0;if(u?F=A[y-1]:p[C+1]==0?F=A[y+2]:F=Math.atan2(b,U),F-=Math.atan2(X,O),v){W=Math.cos(F),G=Math.sin(F);var j=w.data.length;V+=(j*(W*O-G*X)-U)*r,N+=(j*(G*O+W*X)-b)*r}else F+=T;F>o.MathUtils.PI?F-=o.MathUtils.PI2:F<-o.MathUtils.PI&&(F+=o.MathUtils.PI2),F*=r,W=Math.cos(F),G=Math.sin(F),w.a=W*O-G*X,w.b=W*B-G*_,w.c=G*O+W*X,w.d=G*B+W*_}w.appliedValid=!1}}}},m.prototype.computeWorldPositions=function(n,r,e,t,a){var s=this.target,i=this.position,c=this.spaces,u=o.Utils.setArraySize(this.positions,r*3+2),g=null,h=n.closed,d=n.worldVerticesLength,f=d/6,p=m.NONE;if(!n.constantSpeed){var M=n.lengths;f-=h?1:2;var x=M[f];if(t&&(i*=x),a)for(var P=1;P<r;P++)c[P]*=x;g=o.Utils.setArraySize(this.world,8);for(var P=0,C=0,I=0;P<r;P++,C+=3){var w=c[P];i+=w;var l=i;if(h)l%=x,l<0&&(l+=x),I=0;else if(l<0){p!=m.BEFORE&&(p=m.BEFORE,n.computeWorldVertices(s,2,4,g,0,2)),this.addBeforePosition(l,g,0,u,C);continue}else if(l>x){p!=m.AFTER&&(p=m.AFTER,n.computeWorldVertices(s,d-6,4,g,0,2)),this.addAfterPosition(l-x,g,0,u,C);continue}for(;;I++){var E=M[I];if(!(l>E)){if(I==0)l/=E;else{var R=M[I-1];l=(l-R)/(E-R)}break}}I!=p&&(p=I,h&&I==f?(n.computeWorldVertices(s,d-4,4,g,0,2),n.computeWorldVertices(s,0,4,g,4,2)):n.computeWorldVertices(s,I*6+2,8,g,0,2)),this.addCurvePosition(l,g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],u,C,e||P>0&&w==0)}return u}h?(d+=2,g=o.Utils.setArraySize(this.world,d),n.computeWorldVertices(s,2,d-4,g,0,2),n.computeWorldVertices(s,0,2,g,d-4,2),g[d-2]=g[0],g[d-1]=g[1]):(f--,d-=4,g=o.Utils.setArraySize(this.world,d),n.computeWorldVertices(s,2,d,g,0,2));for(var S=o.Utils.setArraySize(this.curves,f),k=0,A=g[0],V=g[1],N=0,T=0,v=0,y=0,U=0,b=0,Y=0,D=0,O=0,B=0,X=0,_=0,F=0,W=0,P=0,G=2;P<f;P++,G+=6)N=g[G],T=g[G+1],v=g[G+2],y=g[G+3],U=g[G+4],b=g[G+5],Y=(A-N*2+v)*.1875,D=(V-T*2+y)*.1875,O=((N-v)*3-A+U)*.09375,B=((T-y)*3-V+b)*.09375,X=Y*2+O,_=D*2+B,F=(N-A)*.75+Y+O*.16666667,W=(T-V)*.75+D+B*.16666667,k+=Math.sqrt(F*F+W*W),F+=X,W+=_,X+=O,_+=B,k+=Math.sqrt(F*F+W*W),F+=X,W+=_,k+=Math.sqrt(F*F+W*W),F+=X+O,W+=_+B,k+=Math.sqrt(F*F+W*W),S[P]=k,A=U,V=b;if(t?i*=k:i*=k/n.lengths[f-1],a)for(var P=1;P<r;P++)c[P]*=k;for(var j=this.segments,H=0,P=0,C=0,I=0,q=0;P<r;P++,C+=3){var w=c[P];i+=w;var l=i;if(h)l%=k,l<0&&(l+=k),I=0;else if(l<0){this.addBeforePosition(l,g,0,u,C);continue}else if(l>k){this.addAfterPosition(l-k,g,d-4,u,C);continue}for(;;I++){var K=S[I];if(!(l>K)){if(I==0)l/=K;else{var R=S[I-1];l=(l-R)/(K-R)}break}}if(I!=p){p=I;var Z=I*6;for(A=g[Z],V=g[Z+1],N=g[Z+2],T=g[Z+3],v=g[Z+4],y=g[Z+5],U=g[Z+6],b=g[Z+7],Y=(A-N*2+v)*.03,D=(V-T*2+y)*.03,O=((N-v)*3-A+U)*.006,B=((T-y)*3-V+b)*.006,X=Y*2+O,_=D*2+B,F=(N-A)*.3+Y+O*.16666667,W=(T-V)*.3+D+B*.16666667,H=Math.sqrt(F*F+W*W),j[0]=H,Z=1;Z<8;Z++)F+=X,W+=_,X+=O,_+=B,H+=Math.sqrt(F*F+W*W),j[Z]=H;F+=X,W+=_,H+=Math.sqrt(F*F+W*W),j[8]=H,F+=X+O,W+=_+B,H+=Math.sqrt(F*F+W*W),j[9]=H,q=0}for(l*=H;;q++){var $=j[q];if(!(l>$)){if(q==0)l/=$;else{var R=j[q-1];l=q+(l-R)/($-R)}break}}this.addCurvePosition(l*.1,A,V,N,T,v,y,U,b,u,C,e||P>0&&w==0)}return u},m.prototype.addBeforePosition=function(n,r,e,t,a){var s=r[e],i=r[e+1],c=r[e+2]-s,u=r[e+3]-i,g=Math.atan2(u,c);t[a]=s+n*Math.cos(g),t[a+1]=i+n*Math.sin(g),t[a+2]=g},m.prototype.addAfterPosition=function(n,r,e,t,a){var s=r[e+2],i=r[e+3],c=s-r[e],u=i-r[e+1],g=Math.atan2(u,c);t[a]=s+n*Math.cos(g),t[a+1]=i+n*Math.sin(g),t[a+2]=g},m.prototype.addCurvePosition=function(n,r,e,t,a,s,i,c,u,g,h,d){if(n==0||isNaN(n)){g[h]=r,g[h+1]=e,g[h+2]=Math.atan2(a-e,t-r);return}var f=n*n,p=f*n,M=1-n,x=M*M,P=x*M,C=M*n,I=C*3,w=M*I,l=I*n,E=r*P+t*w+s*l+c*p,R=e*P+a*w+i*l+u*p;g[h]=E,g[h+1]=R,d&&(n<.001?g[h+2]=Math.atan2(a-e,t-r):g[h+2]=Math.atan2(R-(e*x+a*C*2+i*f),E-(r*x+t*C*2+s*f)))},m.NONE=-1,m.BEFORE=-2,m.AFTER=-3,m.epsilon=1e-5,m}();o.PathConstraint=L})(spine||(spine={}));var spine;(function(o){var L=function(e){__extends(t,e);function t(a){var s=e.call(this,a,0,!1)||this;return s.bones=new Array,s}return t}(o.ConstraintData);o.PathConstraintData=L;var m;(function(e){e[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent"})(m=o.PositionMode||(o.PositionMode={}));var n;(function(e){e[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent"})(n=o.SpacingMode||(o.SpacingMode={}));var r;(function(e){e[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"})(r=o.RotateMode||(o.RotateMode={}))})(spine||(spine={}));var spine;(function(o){var L=function(){function n(r){this.toLoad=new Array,this.assets={},this.clientId=r}return n.prototype.loaded=function(){var r=0;for(var e in this.assets)r++;return r},n}(),m=function(){function n(r){r===void 0&&(r=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=r}return n.prototype.queueAsset=function(r,e,t){var a=this.clientAssets[r];return a==null&&(a=new L(r),this.clientAssets[r]=a),e!==null&&(a.textureLoader=e),a.toLoad.push(t),this.queuedAssets[t]===t?!1:(this.queuedAssets[t]=t,!0)},n.prototype.loadText=function(r,e){var t=this;if(e=this.pathPrefix+e,!!this.queueAsset(r,null,e)){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(a.status>=200&&a.status<300?t.rawAssets[e]=a.responseText:t.errors[e]="Couldn't load text "+e+": status "+a.status+", "+a.responseText)},a.open("GET",e,!0),a.send()}},n.prototype.loadJson=function(r,e){var t=this;if(e=this.pathPrefix+e,!!this.queueAsset(r,null,e)){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(a.status>=200&&a.status<300?t.rawAssets[e]=JSON.parse(a.responseText):t.errors[e]="Couldn't load text "+e+": status "+a.status+", "+a.responseText)},a.open("GET",e,!0),a.send()}},n.prototype.loadTexture=function(r,e,t){var a=this;if(t=this.pathPrefix+t,!!this.queueAsset(r,e,t)){var s=!!(typeof window!="undefined"&&typeof navigator!="undefined"&&window.document),i=!s&&typeof importScripts!="undefined";if(i){var c={mode:"cors"};fetch(t,c).then(function(g){return g.ok||(a.errors[t]="Couldn't load image "+t),g.blob()}).then(function(g){return createImageBitmap(g,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(g){a.rawAssets[t]=g})}else{var u=new Image;u.crossOrigin="anonymous",u.onload=function(g){a.rawAssets[t]=u},u.onerror=function(g){a.errors[t]="Couldn't load image "+t},u.src=t}}},n.prototype.get=function(r,e){e=this.pathPrefix+e;var t=this.clientAssets[r];return t==null?!0:t.assets[e]},n.prototype.updateClientAssets=function(r){for(var e=!!(typeof window!="undefined"&&typeof navigator!="undefined"&&window.document),t=!e&&typeof importScripts!="undefined",a=0;a<r.toLoad.length;a++){var s=r.toLoad[a],i=r.assets[s];if(i==null){var c=this.rawAssets[s];if(c==null)continue;t?c instanceof ImageBitmap?r.assets[s]=r.textureLoader(c):r.assets[s]=c:c instanceof HTMLImageElement?r.assets[s]=r.textureLoader(c):r.assets[s]=c}}},n.prototype.isLoadingComplete=function(r){var e=this.clientAssets[r];return e==null?!0:(this.updateClientAssets(e),e.toLoad.length==e.loaded())},n.prototype.dispose=function(){},n.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},n.prototype.getErrors=function(){return this.errors},n}();o.SharedAssetManager=m})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,n==null)throw new Error("data cannot be null.");this.data=n,this.bones=new Array;for(var r=0;r<n.bones.length;r++){var e=n.bones[r],t=void 0;if(e.parent==null)t=new o.Bone(e,this,null);else{var a=this.bones[e.parent.index];t=new o.Bone(e,this,a),a.children.push(t)}this.bones.push(t)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<n.slots.length;r++){var s=n.slots[r],t=this.bones[s.boneData.index],i=new o.Slot(s,t);this.slots.push(i),this.drawOrder.push(i)}this.ikConstraints=new Array;for(var r=0;r<n.ikConstraints.length;r++){var c=n.ikConstraints[r];this.ikConstraints.push(new o.IkConstraint(c,this))}this.transformConstraints=new Array;for(var r=0;r<n.transformConstraints.length;r++){var u=n.transformConstraints[r];this.transformConstraints.push(new o.TransformConstraint(u,this))}this.pathConstraints=new Array;for(var r=0;r<n.pathConstraints.length;r++){var g=n.pathConstraints[r];this.pathConstraints.push(new o.PathConstraint(g,this))}this.color=new o.Color(1,1,1,1),this.updateCache()}return m.prototype.updateCache=function(){var n=this._updateCache;n.length=0,this.updateCacheReset.length=0;for(var r=this.bones,e=0,t=r.length;e<t;e++){var a=r[e];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(this.skin!=null)for(var s=this.skin.bones,e=0,t=this.skin.bones.length;e<t;e++){var a=this.bones[s[e].index];do a.sorted=!1,a.active=!0,a=a.parent;while(a!=null)}var i=this.ikConstraints,c=this.transformConstraints,u=this.pathConstraints,g=i.length,h=c.length,d=u.length,f=g+h+d;t:for(var e=0;e<f;e++){for(var p=0;p<g;p++){var M=i[p];if(M.data.order==e){this.sortIkConstraint(M);continue t}}for(var p=0;p<h;p++){var M=c[p];if(M.data.order==e){this.sortTransformConstraint(M);continue t}}for(var p=0;p<d;p++){var M=u[p];if(M.data.order==e){this.sortPathConstraint(M);continue t}}}for(var e=0,t=r.length;e<t;e++)this.sortBone(r[e])},m.prototype.sortIkConstraint=function(n){if(n.active=n.target.isActive()&&(!n.data.skinRequired||this.skin!=null&&o.Utils.contains(this.skin.constraints,n.data,!0)),!!n.active){var r=n.target;this.sortBone(r);var e=n.bones,t=e[0];if(this.sortBone(t),e.length>1){var a=e[e.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(n),this.sortReset(t.children),e[e.length-1].sorted=!0}},m.prototype.sortPathConstraint=function(n){if(n.active=n.target.bone.isActive()&&(!n.data.skinRequired||this.skin!=null&&o.Utils.contains(this.skin.constraints,n.data,!0)),!!n.active){var r=n.target,e=r.data.index,t=r.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,e,t),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,e,t);for(var a=0,s=this.data.skins.length;a<s;a++)this.sortPathConstraintAttachment(this.data.skins[a],e,t);var i=r.getAttachment();i instanceof o.PathAttachment&&this.sortPathConstraintAttachmentWith(i,t);for(var c=n.bones,u=c.length,a=0;a<u;a++)this.sortBone(c[a]);this._updateCache.push(n);for(var a=0;a<u;a++)this.sortReset(c[a].children);for(var a=0;a<u;a++)c[a].sorted=!0}},m.prototype.sortTransformConstraint=function(n){if(n.active=n.target.isActive()&&(!n.data.skinRequired||this.skin!=null&&o.Utils.contains(this.skin.constraints,n.data,!0)),!!n.active){this.sortBone(n.target);var r=n.bones,e=r.length;if(n.data.local)for(var t=0;t<e;t++){var a=r[t];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(var t=0;t<e;t++)this.sortBone(r[t]);this._updateCache.push(n);for(var s=0;s<e;s++)this.sortReset(r[s].children);for(var s=0;s<e;s++)r[s].sorted=!0}},m.prototype.sortPathConstraintAttachment=function(n,r,e){var t=n.attachments[r];if(!!t)for(var a in t)this.sortPathConstraintAttachmentWith(t[a],e)},m.prototype.sortPathConstraintAttachmentWith=function(n,r){if(n instanceof o.PathAttachment){var e=n.bones;if(e==null)this.sortBone(r);else for(var t=this.bones,a=0;a<e.length;)for(var s=e[a++],i=a+s;a<i;a++){var c=e[a];this.sortBone(t[c])}}},m.prototype.sortBone=function(n){if(!n.sorted){var r=n.parent;r!=null&&this.sortBone(r),n.sorted=!0,this._updateCache.push(n)}},m.prototype.sortReset=function(n){for(var r=0,e=n.length;r<e;r++){var t=n[r];!t.active||(t.sorted&&this.sortReset(t.children),t.sorted=!1)}},m.prototype.updateWorldTransform=function(){for(var n=this.updateCacheReset,r=0,e=n.length;r<e;r++){var t=n[r];t.ax=t.x,t.ay=t.y,t.arotation=t.rotation,t.ascaleX=t.scaleX,t.ascaleY=t.scaleY,t.ashearX=t.shearX,t.ashearY=t.shearY,t.appliedValid=!0}for(var a=this._updateCache,r=0,e=a.length;r<e;r++)a[r].update()},m.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},m.prototype.setBonesToSetupPose=function(){for(var n=this.bones,r=0,e=n.length;r<e;r++)n[r].setToSetupPose();for(var t=this.ikConstraints,r=0,e=t.length;r<e;r++){var a=t[r];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var s=this.transformConstraints,r=0,e=s.length;r<e;r++){var a=s[r],i=a.data;a.rotateMix=i.rotateMix,a.translateMix=i.translateMix,a.scaleMix=i.scaleMix,a.shearMix=i.shearMix}for(var c=this.pathConstraints,r=0,e=c.length;r<e;r++){var a=c[r],i=a.data;a.position=i.position,a.spacing=i.spacing,a.rotateMix=i.rotateMix,a.translateMix=i.translateMix}},m.prototype.setSlotsToSetupPose=function(){var n=this.slots;o.Utils.arrayCopy(n,0,this.drawOrder,0,n.length);for(var r=0,e=n.length;r<e;r++)n[r].setToSetupPose()},m.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},m.prototype.findBone=function(n){if(n==null)throw new Error("boneName cannot be null.");for(var r=this.bones,e=0,t=r.length;e<t;e++){var a=r[e];if(a.data.name==n)return a}return null},m.prototype.findBoneIndex=function(n){if(n==null)throw new Error("boneName cannot be null.");for(var r=this.bones,e=0,t=r.length;e<t;e++)if(r[e].data.name==n)return e;return-1},m.prototype.findSlot=function(n){if(n==null)throw new Error("slotName cannot be null.");for(var r=this.slots,e=0,t=r.length;e<t;e++){var a=r[e];if(a.data.name==n)return a}return null},m.prototype.findSlotIndex=function(n){if(n==null)throw new Error("slotName cannot be null.");for(var r=this.slots,e=0,t=r.length;e<t;e++)if(r[e].data.name==n)return e;return-1},m.prototype.setSkinByName=function(n){var r=this.data.findSkin(n);if(r==null)throw new Error("Skin not found: "+n);this.setSkin(r)},m.prototype.setSkin=function(n){if(n!=this.skin){if(n!=null)if(this.skin!=null)n.attachAll(this,this.skin);else for(var r=this.slots,e=0,t=r.length;e<t;e++){var a=r[e],s=a.data.attachmentName;if(s!=null){var i=n.getAttachment(e,s);i!=null&&a.setAttachment(i)}}this.skin=n,this.updateCache()}},m.prototype.getAttachmentByName=function(n,r){return this.getAttachment(this.data.findSlotIndex(n),r)},m.prototype.getAttachment=function(n,r){if(r==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var e=this.skin.getAttachment(n,r);if(e!=null)return e}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(n,r):null},m.prototype.setAttachment=function(n,r){if(n==null)throw new Error("slotName cannot be null.");for(var e=this.slots,t=0,a=e.length;t<a;t++){var s=e[t];if(s.data.name==n){var i=null;if(r!=null&&(i=this.getAttachment(t,r),i==null))throw new Error("Attachment not found: "+r+", for slot: "+n);s.setAttachment(i);return}}throw new Error("Slot not found: "+n)},m.prototype.findIkConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,e=0,t=r.length;e<t;e++){var a=r[e];if(a.data.name==n)return a}return null},m.prototype.findTransformConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,e=0,t=r.length;e<t;e++){var a=r[e];if(a.data.name==n)return a}return null},m.prototype.findPathConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,e=0,t=r.length;e<t;e++){var a=r[e];if(a.data.name==n)return a}return null},m.prototype.getBounds=function(n,r,e){if(e===void 0&&(e=new Array(2)),n==null)throw new Error("offset cannot be null.");if(r==null)throw new Error("size cannot be null.");for(var t=this.drawOrder,a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,u=0,g=t.length;u<g;u++){var h=t[u];if(!!h.bone.active){var d=0,f=null,p=h.getAttachment();if(p instanceof o.RegionAttachment)d=8,f=o.Utils.setArraySize(e,d,0),p.computeWorldVertices(h.bone,f,0,2);else if(p instanceof o.MeshAttachment){var M=p;d=M.worldVerticesLength,f=o.Utils.setArraySize(e,d,0),M.computeWorldVertices(h,0,d,f,0,2)}if(f!=null)for(var x=0,P=f.length;x<P;x+=2){var C=f[x],I=f[x+1];a=Math.min(a,C),s=Math.min(s,I),i=Math.max(i,C),c=Math.max(c,I)}}}n.set(a,s),r.set(i-a,c-s)},m.prototype.update=function(n){this.time+=n},m}();o.Skeleton=L})(spine||(spine={}));var spine;(function(o){var L=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(t){var a=this.scale,s=new o.SkeletonData;s.name="";var i=new m(t);if(s.hash=i.readString(),s.version=i.readString(),s.version=="3.8.75")throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");s.x=i.readFloat(),s.y=i.readFloat(),s.width=i.readFloat(),s.height=i.readFloat();var c=i.readBoolean();c&&(s.fps=i.readFloat(),s.imagesPath=i.readString(),s.audioPath=i.readString());var u=0;u=i.readInt(!0);for(var g=0;g<u;g++)i.strings.push(i.readString());u=i.readInt(!0);for(var g=0;g<u;g++){var h=i.readString(),d=g==0?null:s.bones[i.readInt(!0)],f=new o.BoneData(g,h,d);f.rotation=i.readFloat(),f.x=i.readFloat()*a,f.y=i.readFloat()*a,f.scaleX=i.readFloat(),f.scaleY=i.readFloat(),f.shearX=i.readFloat(),f.shearY=i.readFloat(),f.length=i.readFloat()*a,f.transformMode=e.TransformModeValues[i.readInt(!0)],f.skinRequired=i.readBoolean(),c&&o.Color.rgba8888ToColor(f.color,i.readInt32()),s.bones.push(f)}u=i.readInt(!0);for(var g=0;g<u;g++){var p=i.readString(),M=s.bones[i.readInt(!0)],f=new o.SlotData(g,p,M);o.Color.rgba8888ToColor(f.color,i.readInt32());var x=i.readInt32();x!=-1&&o.Color.rgb888ToColor(f.darkColor=new o.Color,x),f.attachmentName=i.readStringRef(),f.blendMode=e.BlendModeValues[i.readInt(!0)],s.slots.push(f)}u=i.readInt(!0);for(var g=0,P=void 0;g<u;g++){var f=new o.IkConstraintData(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),P=i.readInt(!0);for(var C=0;C<P;C++)f.bones.push(s.bones[i.readInt(!0)]);f.target=s.bones[i.readInt(!0)],f.mix=i.readFloat(),f.softness=i.readFloat()*a,f.bendDirection=i.readByte(),f.compress=i.readBoolean(),f.stretch=i.readBoolean(),f.uniform=i.readBoolean(),s.ikConstraints.push(f)}u=i.readInt(!0);for(var g=0,P=void 0;g<u;g++){var f=new o.TransformConstraintData(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),P=i.readInt(!0);for(var C=0;C<P;C++)f.bones.push(s.bones[i.readInt(!0)]);f.target=s.bones[i.readInt(!0)],f.local=i.readBoolean(),f.relative=i.readBoolean(),f.offsetRotation=i.readFloat(),f.offsetX=i.readFloat()*a,f.offsetY=i.readFloat()*a,f.offsetScaleX=i.readFloat(),f.offsetScaleY=i.readFloat(),f.offsetShearY=i.readFloat(),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),f.scaleMix=i.readFloat(),f.shearMix=i.readFloat(),s.transformConstraints.push(f)}u=i.readInt(!0);for(var g=0,P=void 0;g<u;g++){var f=new o.PathConstraintData(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),P=i.readInt(!0);for(var C=0;C<P;C++)f.bones.push(s.bones[i.readInt(!0)]);f.target=s.slots[i.readInt(!0)],f.positionMode=e.PositionModeValues[i.readInt(!0)],f.spacingMode=e.SpacingModeValues[i.readInt(!0)],f.rotateMode=e.RotateModeValues[i.readInt(!0)],f.offsetRotation=i.readFloat(),f.position=i.readFloat(),f.positionMode==o.PositionMode.Fixed&&(f.position*=a),f.spacing=i.readFloat(),(f.spacingMode==o.SpacingMode.Length||f.spacingMode==o.SpacingMode.Fixed)&&(f.spacing*=a),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),s.pathConstraints.push(f)}var I=this.readSkin(i,s,!0,c);I!=null&&(s.defaultSkin=I,s.skins.push(I));{var g=s.skins.length;for(o.Utils.setArraySize(s.skins,u=g+i.readInt(!0));g<u;g++)s.skins[g]=this.readSkin(i,s,!1,c)}u=this.linkedMeshes.length;for(var g=0;g<u;g++){var w=this.linkedMeshes[g],l=w.skin==null?s.defaultSkin:s.findSkin(w.skin);if(l==null)throw new Error("Skin not found: "+w.skin);var E=l.getAttachment(w.slotIndex,w.parent);if(E==null)throw new Error("Parent mesh not found: "+w.parent);w.mesh.deformAttachment=w.inheritDeform?E:w.mesh,w.mesh.setParentMesh(E),w.mesh.updateUVs()}this.linkedMeshes.length=0,u=i.readInt(!0);for(var g=0;g<u;g++){var f=new o.EventData(i.readStringRef());f.intValue=i.readInt(!1),f.floatValue=i.readFloat(),f.stringValue=i.readString(),f.audioPath=i.readString(),f.audioPath!=null&&(f.volume=i.readFloat(),f.balance=i.readFloat()),s.events.push(f)}u=i.readInt(!0);for(var g=0;g<u;g++)s.animations.push(this.readAnimation(i,i.readString(),s));return s},e.prototype.readSkin=function(t,a,s,i){var c=null,u=0;if(s){if(u=t.readInt(!0),u==0)return null;c=new o.Skin("default")}else{c=new o.Skin(t.readStringRef()),c.bones.length=t.readInt(!0);for(var g=0,h=c.bones.length;g<h;g++)c.bones[g]=a.bones[t.readInt(!0)];for(var g=0,h=t.readInt(!0);g<h;g++)c.constraints.push(a.ikConstraints[t.readInt(!0)]);for(var g=0,h=t.readInt(!0);g<h;g++)c.constraints.push(a.transformConstraints[t.readInt(!0)]);for(var g=0,h=t.readInt(!0);g<h;g++)c.constraints.push(a.pathConstraints[t.readInt(!0)]);u=t.readInt(!0)}for(var g=0;g<u;g++)for(var d=t.readInt(!0),f=0,p=t.readInt(!0);f<p;f++){var M=t.readStringRef(),x=this.readAttachment(t,a,c,d,M,i);x!=null&&c.setAttachment(d,M,x)}return c},e.prototype.readAttachment=function(t,a,s,i,c,u){var g=this.scale,h=t.readStringRef();h==null&&(h=c);var d=t.readByte(),f=e.AttachmentTypeValues[d];switch(f){case o.AttachmentType.Region:{var p=t.readStringRef(),M=t.readFloat(),x=t.readFloat(),P=t.readFloat(),C=t.readFloat(),I=t.readFloat(),w=t.readFloat(),l=t.readFloat(),E=t.readInt32();p==null&&(p=h);var R=this.attachmentLoader.newRegionAttachment(s,h,p);return R==null?null:(R.path=p,R.x=x*g,R.y=P*g,R.scaleX=C,R.scaleY=I,R.rotation=M,R.width=w*g,R.height=l*g,o.Color.rgba8888ToColor(R.color,E),R.updateOffset(),R)}case o.AttachmentType.BoundingBox:{var S=t.readInt(!0),k=this.readVertices(t,S),E=u?t.readInt32():0,A=this.attachmentLoader.newBoundingBoxAttachment(s,h);return A==null?null:(A.worldVerticesLength=S<<1,A.vertices=k.vertices,A.bones=k.bones,u&&o.Color.rgba8888ToColor(A.color,E),A)}case o.AttachmentType.Mesh:{var p=t.readStringRef(),E=t.readInt32(),S=t.readInt(!0),V=this.readFloatArray(t,S<<1,1),N=this.readShortArray(t),k=this.readVertices(t,S),T=t.readInt(!0),v=null,w=0,l=0;u&&(v=this.readShortArray(t),w=t.readFloat(),l=t.readFloat()),p==null&&(p=h);var y=this.attachmentLoader.newMeshAttachment(s,h,p);return y==null?null:(y.path=p,o.Color.rgba8888ToColor(y.color,E),y.bones=k.bones,y.vertices=k.vertices,y.worldVerticesLength=S<<1,y.triangles=N,y.regionUVs=V,y.updateUVs(),y.hullLength=T<<1,u&&(y.edges=v,y.width=w*g,y.height=l*g),y)}case o.AttachmentType.LinkedMesh:{var p=t.readStringRef(),E=t.readInt32(),U=t.readStringRef(),b=t.readStringRef(),Y=t.readBoolean(),w=0,l=0;u&&(w=t.readFloat(),l=t.readFloat()),p==null&&(p=h);var y=this.attachmentLoader.newMeshAttachment(s,h,p);return y==null?null:(y.path=p,o.Color.rgba8888ToColor(y.color,E),u&&(y.width=w*g,y.height=l*g),this.linkedMeshes.push(new n(y,U,i,b,Y)),y)}case o.AttachmentType.Path:{for(var D=t.readBoolean(),O=t.readBoolean(),S=t.readInt(!0),k=this.readVertices(t,S),B=o.Utils.newArray(S/3,0),X=0,_=B.length;X<_;X++)B[X]=t.readFloat()*g;var E=u?t.readInt32():0,p=this.attachmentLoader.newPathAttachment(s,h);return p==null?null:(p.closed=D,p.constantSpeed=O,p.worldVerticesLength=S<<1,p.vertices=k.vertices,p.bones=k.bones,p.lengths=B,u&&o.Color.rgba8888ToColor(p.color,E),p)}case o.AttachmentType.Point:{var M=t.readFloat(),x=t.readFloat(),P=t.readFloat(),E=u?t.readInt32():0,F=this.attachmentLoader.newPointAttachment(s,h);return F==null?null:(F.x=x*g,F.y=P*g,F.rotation=M,u&&o.Color.rgba8888ToColor(F.color,E),F)}case o.AttachmentType.Clipping:{var W=t.readInt(!0),S=t.readInt(!0),k=this.readVertices(t,S),E=u?t.readInt32():0,G=this.attachmentLoader.newClippingAttachment(s,h);return G==null?null:(G.endSlot=a.slots[W],G.worldVerticesLength=S<<1,G.vertices=k.vertices,G.bones=k.bones,u&&o.Color.rgba8888ToColor(G.color,E),G)}}return null},e.prototype.readVertices=function(t,a){var s=a<<1,i=new r,c=this.scale;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,s,c),i;for(var u=new Array,g=new Array,h=0;h<a;h++){var d=t.readInt(!0);g.push(d);for(var f=0;f<d;f++)g.push(t.readInt(!0)),u.push(t.readFloat()*c),u.push(t.readFloat()*c),u.push(t.readFloat())}return i.vertices=o.Utils.toFloatArray(u),i.bones=g,i},e.prototype.readFloatArray=function(t,a,s){var i=new Array(a);if(s==1)for(var c=0;c<a;c++)i[c]=t.readFloat();else for(var c=0;c<a;c++)i[c]=t.readFloat()*s;return i},e.prototype.readShortArray=function(t){for(var a=t.readInt(!0),s=new Array(a),i=0;i<a;i++)s[i]=t.readShort();return s},e.prototype.readAnimation=function(t,a,s){for(var i=new Array,c=this.scale,u=0,g=new o.Color,h=new o.Color,d=0,f=t.readInt(!0);d<f;d++)for(var p=t.readInt(!0),M=0,x=t.readInt(!0);M<x;M++){var P=t.readByte(),C=t.readInt(!0);switch(P){case e.SLOT_ATTACHMENT:{var I=new o.AttachmentTimeline(C);I.slotIndex=p;for(var w=0;w<C;w++)I.setFrame(w,t.readFloat(),t.readStringRef());i.push(I),u=Math.max(u,I.frames[C-1]);break}case e.SLOT_COLOR:{var I=new o.ColorTimeline(C);I.slotIndex=p;for(var w=0;w<C;w++){var l=t.readFloat();o.Color.rgba8888ToColor(g,t.readInt32()),I.setFrame(w,l,g.r,g.g,g.b,g.a),w<C-1&&this.readCurve(t,w,I)}i.push(I),u=Math.max(u,I.frames[(C-1)*o.ColorTimeline.ENTRIES]);break}case e.SLOT_TWO_COLOR:{var I=new o.TwoColorTimeline(C);I.slotIndex=p;for(var w=0;w<C;w++){var l=t.readFloat();o.Color.rgba8888ToColor(g,t.readInt32()),o.Color.rgb888ToColor(h,t.readInt32()),I.setFrame(w,l,g.r,g.g,g.b,g.a,h.r,h.g,h.b),w<C-1&&this.readCurve(t,w,I)}i.push(I),u=Math.max(u,I.frames[(C-1)*o.TwoColorTimeline.ENTRIES]);break}}}for(var d=0,f=t.readInt(!0);d<f;d++)for(var E=t.readInt(!0),M=0,x=t.readInt(!0);M<x;M++){var P=t.readByte(),C=t.readInt(!0);switch(P){case e.BONE_ROTATE:{var I=new o.RotateTimeline(C);I.boneIndex=E;for(var w=0;w<C;w++)I.setFrame(w,t.readFloat(),t.readFloat()),w<C-1&&this.readCurve(t,w,I);i.push(I),u=Math.max(u,I.frames[(C-1)*o.RotateTimeline.ENTRIES]);break}case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:{var I=void 0,R=1;P==e.BONE_SCALE?I=new o.ScaleTimeline(C):P==e.BONE_SHEAR?I=new o.ShearTimeline(C):(I=new o.TranslateTimeline(C),R=c),I.boneIndex=E;for(var w=0;w<C;w++)I.setFrame(w,t.readFloat(),t.readFloat()*R,t.readFloat()*R),w<C-1&&this.readCurve(t,w,I);i.push(I),u=Math.max(u,I.frames[(C-1)*o.TranslateTimeline.ENTRIES]);break}}}for(var d=0,f=t.readInt(!0);d<f;d++){var S=t.readInt(!0),C=t.readInt(!0),I=new o.IkConstraintTimeline(C);I.ikConstraintIndex=S;for(var w=0;w<C;w++)I.setFrame(w,t.readFloat(),t.readFloat(),t.readFloat()*c,t.readByte(),t.readBoolean(),t.readBoolean()),w<C-1&&this.readCurve(t,w,I);i.push(I),u=Math.max(u,I.frames[(C-1)*o.IkConstraintTimeline.ENTRIES])}for(var d=0,f=t.readInt(!0);d<f;d++){var S=t.readInt(!0),C=t.readInt(!0),I=new o.TransformConstraintTimeline(C);I.transformConstraintIndex=S;for(var w=0;w<C;w++)I.setFrame(w,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),w<C-1&&this.readCurve(t,w,I);i.push(I),u=Math.max(u,I.frames[(C-1)*o.TransformConstraintTimeline.ENTRIES])}for(var d=0,f=t.readInt(!0);d<f;d++)for(var S=t.readInt(!0),k=s.pathConstraints[S],M=0,x=t.readInt(!0);M<x;M++){var P=t.readByte(),C=t.readInt(!0);switch(P){case e.PATH_POSITION:case e.PATH_SPACING:{var I=void 0,R=1;P==e.PATH_SPACING?(I=new o.PathConstraintSpacingTimeline(C),(k.spacingMode==o.SpacingMode.Length||k.spacingMode==o.SpacingMode.Fixed)&&(R=c)):(I=new o.PathConstraintPositionTimeline(C),k.positionMode==o.PositionMode.Fixed&&(R=c)),I.pathConstraintIndex=S;for(var w=0;w<C;w++)I.setFrame(w,t.readFloat(),t.readFloat()*R),w<C-1&&this.readCurve(t,w,I);i.push(I),u=Math.max(u,I.frames[(C-1)*o.PathConstraintPositionTimeline.ENTRIES]);break}case e.PATH_MIX:{var I=new o.PathConstraintMixTimeline(C);I.pathConstraintIndex=S;for(var w=0;w<C;w++)I.setFrame(w,t.readFloat(),t.readFloat(),t.readFloat()),w<C-1&&this.readCurve(t,w,I);i.push(I),u=Math.max(u,I.frames[(C-1)*o.PathConstraintMixTimeline.ENTRIES]);break}}}for(var d=0,f=t.readInt(!0);d<f;d++)for(var A=s.skins[t.readInt(!0)],M=0,x=t.readInt(!0);M<x;M++)for(var p=t.readInt(!0),V=0,N=t.readInt(!0);V<N;V++){var T=A.getAttachment(p,t.readStringRef()),v=T.bones!=null,y=T.vertices,U=v?y.length/3*2:y.length,C=t.readInt(!0),I=new o.DeformTimeline(C);I.slotIndex=p,I.attachment=T;for(var w=0;w<C;w++){var l=t.readFloat(),b=void 0,Y=t.readInt(!0);if(Y==0)b=v?o.Utils.newFloatArray(U):y;else{b=o.Utils.newFloatArray(U);var D=t.readInt(!0);if(Y+=D,c==1)for(var O=D;O<Y;O++)b[O]=t.readFloat();else for(var O=D;O<Y;O++)b[O]=t.readFloat()*c;if(!v)for(var O=0,B=b.length;O<B;O++)b[O]+=y[O]}I.setFrame(w,l,b),w<C-1&&this.readCurve(t,w,I)}i.push(I),u=Math.max(u,I.frames[C-1])}var X=t.readInt(!0);if(X>0){for(var I=new o.DrawOrderTimeline(X),_=s.slots.length,d=0;d<X;d++){for(var l=t.readFloat(),F=t.readInt(!0),W=o.Utils.newArray(_,0),M=_-1;M>=0;M--)W[M]=-1;for(var G=o.Utils.newArray(_-F,0),j=0,H=0,M=0;M<F;M++){for(var p=t.readInt(!0);j!=p;)G[H++]=j++;W[j+t.readInt(!0)]=j++}for(;j<_;)G[H++]=j++;for(var M=_-1;M>=0;M--)W[M]==-1&&(W[M]=G[--H]);I.setFrame(d,l,W)}i.push(I),u=Math.max(u,I.frames[X-1])}var q=t.readInt(!0);if(q>0){for(var I=new o.EventTimeline(q),d=0;d<q;d++){var l=t.readFloat(),K=s.events[t.readInt(!0)],Z=new o.Event(l,K);Z.intValue=t.readInt(!1),Z.floatValue=t.readFloat(),Z.stringValue=t.readBoolean()?t.readString():K.stringValue,Z.data.audioPath!=null&&(Z.volume=t.readFloat(),Z.balance=t.readFloat()),I.setFrame(d,Z)}i.push(I),u=Math.max(u,I.frames[q-1])}return new o.Animation(a,i,u)},e.prototype.readCurve=function(t,a,s){switch(t.readByte()){case e.CURVE_STEPPED:s.setStepped(a);break;case e.CURVE_BEZIER:this.setCurve(s,a,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat());break}},e.prototype.setCurve=function(t,a,s,i,c,u){t.setCurve(a,s,i,c,u)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[o.TransformMode.Normal,o.TransformMode.OnlyTranslation,o.TransformMode.NoRotationOrReflection,o.TransformMode.NoScale,o.TransformMode.NoScaleOrReflection],e.PositionModeValues=[o.PositionMode.Fixed,o.PositionMode.Percent],e.SpacingModeValues=[o.SpacingMode.Length,o.SpacingMode.Fixed,o.SpacingMode.Percent],e.RotateModeValues=[o.RotateMode.Tangent,o.RotateMode.Chain,o.RotateMode.ChainScale],e.BlendModeValues=[o.BlendMode.Normal,o.BlendMode.Additive,o.BlendMode.Multiply,o.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();o.SkeletonBinary=L;var m=function(){function e(t,a,s,i){a===void 0&&(a=new Array),s===void 0&&(s=0),i===void 0&&(i=new DataView(t.buffer)),this.strings=a,this.index=s,this.buffer=i}return e.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},e.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},e.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},e.prototype.readInt=function(t){var a=this.readByte(),s=a&127;return(a&128)!=0&&(a=this.readByte(),s|=(a&127)<<7,(a&128)!=0&&(a=this.readByte(),s|=(a&127)<<14,(a&128)!=0&&(a=this.readByte(),s|=(a&127)<<21,(a&128)!=0&&(a=this.readByte(),s|=(a&127)<<28)))),t?s:s>>>1^-(s&1)},e.prototype.readStringRef=function(){var t=this.readInt(!0);return t==0?null:this.strings[t-1]},e.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var a="",s=0,i=0;i<t;){var c=this.readByte();switch(c>>4){case 12:case 13:a+=String.fromCharCode((c&31)<<6|this.readByte()&63),i+=2;break;case 14:a+=String.fromCharCode((c&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),i+=3;break;default:a+=String.fromCharCode(c),i++}}return a},e.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},e.prototype.readBoolean=function(){return this.readByte()!=0},e}(),n=function(){function e(t,a,s,i,c){this.mesh=t,this.skin=a,this.slotIndex=s,this.parent=i,this.inheritDeform=c}return e}(),r=function(){function e(t,a){t===void 0&&(t=null),a===void 0&&(a=null),this.bones=t,this.vertices=a}return e}()})(spine||(spine={}));var spine;(function(o){var L=function(){function m(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new o.Pool(function(){return o.Utils.newFloatArray(16)})}return m.prototype.update=function(n,r){if(n==null)throw new Error("skeleton cannot be null.");var e=this.boundingBoxes,t=this.polygons,a=this.polygonPool,s=n.slots,i=s.length;e.length=0,a.freeAll(t),t.length=0;for(var c=0;c<i;c++){var u=s[c];if(!!u.bone.active){var g=u.getAttachment();if(g instanceof o.BoundingBoxAttachment){var h=g;e.push(h);var d=a.obtain();d.length!=h.worldVerticesLength&&(d=o.Utils.newFloatArray(h.worldVerticesLength)),t.push(d),h.computeWorldVertices(u,0,h.worldVerticesLength,d,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},m.prototype.aabbCompute=function(){for(var n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,a=this.polygons,s=0,i=a.length;s<i;s++)for(var c=a[s],u=c,g=0,h=c.length;g<h;g+=2){var d=u[g],f=u[g+1];n=Math.min(n,d),r=Math.min(r,f),e=Math.max(e,d),t=Math.max(t,f)}this.minX=n,this.minY=r,this.maxX=e,this.maxY=t},m.prototype.aabbContainsPoint=function(n,r){return n>=this.minX&&n<=this.maxX&&r>=this.minY&&r<=this.maxY},m.prototype.aabbIntersectsSegment=function(n,r,e,t){var a=this.minX,s=this.minY,i=this.maxX,c=this.maxY;if(n<=a&&e<=a||r<=s&&t<=s||n>=i&&e>=i||r>=c&&t>=c)return!1;var u=(t-r)/(e-n),g=u*(a-n)+r;if(g>s&&g<c||(g=u*(i-n)+r,g>s&&g<c))return!0;var h=(s-r)/u+n;return!!(h>a&&h<i||(h=(c-r)/u+n,h>a&&h<i))},m.prototype.aabbIntersectsSkeleton=function(n){return this.minX<n.maxX&&this.maxX>n.minX&&this.minY<n.maxY&&this.maxY>n.minY},m.prototype.containsPoint=function(n,r){for(var e=this.polygons,t=0,a=e.length;t<a;t++)if(this.containsPointPolygon(e[t],n,r))return this.boundingBoxes[t];return null},m.prototype.containsPointPolygon=function(n,r,e){for(var t=n,a=n.length,s=a-2,i=!1,c=0;c<a;c+=2){var u=t[c+1],g=t[s+1];if(u<e&&g>=e||g<e&&u>=e){var h=t[c];h+(e-u)/(g-u)*(t[s]-h)<r&&(i=!i)}s=c}return i},m.prototype.intersectsSegment=function(n,r,e,t){for(var a=this.polygons,s=0,i=a.length;s<i;s++)if(this.intersectsSegmentPolygon(a[s],n,r,e,t))return this.boundingBoxes[s];return null},m.prototype.intersectsSegmentPolygon=function(n,r,e,t,a){for(var s=n,i=n.length,c=r-t,u=e-a,g=r*a-e*t,h=s[i-2],d=s[i-1],f=0;f<i;f+=2){var p=s[f],M=s[f+1],x=h*M-d*p,P=h-p,C=d-M,I=c*C-u*P,w=(g*P-c*x)/I;if((w>=h&&w<=p||w>=p&&w<=h)&&(w>=r&&w<=t||w>=t&&w<=r)){var l=(g*C-u*x)/I;if((l>=d&&l<=M||l>=M&&l<=d)&&(l>=e&&l<=a||l>=a&&l<=e))return!0}h=p,d=M}return!1},m.prototype.getPolygon=function(n){if(n==null)throw new Error("boundingBox cannot be null.");var r=this.boundingBoxes.indexOf(n);return r==-1?null:this.polygons[r]},m.prototype.getWidth=function(){return this.maxX-this.minX},m.prototype.getHeight=function(){return this.maxY-this.minY},m}();o.SkeletonBounds=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(){this.triangulator=new o.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return m.prototype.clipStart=function(n,r){if(this.clipAttachment!=null)return 0;this.clipAttachment=r;var e=r.worldVerticesLength,t=o.Utils.setArraySize(this.clippingPolygon,e);r.computeWorldVertices(n,0,e,t,0,2);var a=this.clippingPolygon;m.makeClockwise(a);for(var s=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a)),i=0,c=s.length;i<c;i++){var u=s[i];m.makeClockwise(u),u.push(u[0]),u.push(u[1])}return s.length},m.prototype.clipEndWithSlot=function(n){this.clipAttachment!=null&&this.clipAttachment.endSlot==n.data&&this.clipEnd()},m.prototype.clipEnd=function(){this.clipAttachment!=null&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},m.prototype.isClipping=function(){return this.clipAttachment!=null},m.prototype.clipTriangles=function(n,r,e,t,a,s,i,c){var u=this.clipOutput,g=this.clippedVertices,h=this.clippedTriangles,d=this.clippingPolygons,f=this.clippingPolygons.length,p=c?12:8,M=0;g.length=0,h.length=0;t:for(var x=0;x<t;x+=3){var P=e[x]<<1,C=n[P],I=n[P+1],w=a[P],l=a[P+1];P=e[x+1]<<1;var E=n[P],R=n[P+1],S=a[P],k=a[P+1];P=e[x+2]<<1;for(var A=n[P],V=n[P+1],N=a[P],T=a[P+1],v=0;v<f;v++){var y=g.length;if(this.clip(C,I,E,R,A,V,d[v],u)){var U=u.length;if(U==0)continue;for(var b=R-V,Y=A-E,D=C-A,O=V-I,B=1/(b*D+Y*(I-V)),X=U>>1,_=this.clipOutput,F=o.Utils.setArraySize(g,y+X*p),W=0;W<U;W+=2){var G=_[W],j=_[W+1];F[y]=G,F[y+1]=j,F[y+2]=s.r,F[y+3]=s.g,F[y+4]=s.b,F[y+5]=s.a;var H=G-A,q=j-V,K=(b*H+Y*q)*B,Z=(O*H+D*q)*B,$=1-K-Z;F[y+6]=w*K+S*Z+N*$,F[y+7]=l*K+k*Z+T*$,c&&(F[y+8]=i.r,F[y+9]=i.g,F[y+10]=i.b,F[y+11]=i.a),y+=p}y=h.length;var Q=o.Utils.setArraySize(h,y+3*(X-2));X--;for(var W=1;W<X;W++)Q[y]=M,Q[y+1]=M+W,Q[y+2]=M+W+1,y+=3;M+=X+1}else{var F=o.Utils.setArraySize(g,y+3*p);F[y]=C,F[y+1]=I,F[y+2]=s.r,F[y+3]=s.g,F[y+4]=s.b,F[y+5]=s.a,c?(F[y+6]=w,F[y+7]=l,F[y+8]=i.r,F[y+9]=i.g,F[y+10]=i.b,F[y+11]=i.a,F[y+12]=E,F[y+13]=R,F[y+14]=s.r,F[y+15]=s.g,F[y+16]=s.b,F[y+17]=s.a,F[y+18]=S,F[y+19]=k,F[y+20]=i.r,F[y+21]=i.g,F[y+22]=i.b,F[y+23]=i.a,F[y+24]=A,F[y+25]=V,F[y+26]=s.r,F[y+27]=s.g,F[y+28]=s.b,F[y+29]=s.a,F[y+30]=N,F[y+31]=T,F[y+32]=i.r,F[y+33]=i.g,F[y+34]=i.b,F[y+35]=i.a):(F[y+6]=w,F[y+7]=l,F[y+8]=E,F[y+9]=R,F[y+10]=s.r,F[y+11]=s.g,F[y+12]=s.b,F[y+13]=s.a,F[y+14]=S,F[y+15]=k,F[y+16]=A,F[y+17]=V,F[y+18]=s.r,F[y+19]=s.g,F[y+20]=s.b,F[y+21]=s.a,F[y+22]=N,F[y+23]=T),y=h.length;var Q=o.Utils.setArraySize(h,y+3);Q[y]=M,Q[y+1]=M+1,Q[y+2]=M+2,M+=3;continue t}}}},m.prototype.clip=function(n,r,e,t,a,s,i,c){var u=c,g=!1,h=null;i.length%4>=2?(h=c,c=this.scratch):h=this.scratch,h.length=0,h.push(n),h.push(r),h.push(e),h.push(t),h.push(a),h.push(s),h.push(n),h.push(r),c.length=0;for(var d=i,f=i.length-4,p=0;;p+=2){for(var M=d[p],x=d[p+1],P=d[p+2],C=d[p+3],I=M-P,w=x-C,l=h,E=h.length-2,R=c.length,S=0;S<E;S+=2){var k=l[S],A=l[S+1],V=l[S+2],N=l[S+3],T=I*(N-C)-w*(V-P)>0;if(I*(A-C)-w*(k-P)>0){if(T){c.push(V),c.push(N);continue}var v=N-A,y=V-k,U=v*(P-M)-y*(C-x);if(Math.abs(U)>1e-6){var b=(y*(x-A)-v*(M-k))/U;c.push(M+(P-M)*b),c.push(x+(C-x)*b)}else c.push(M),c.push(x)}else if(T){var v=N-A,y=V-k,U=v*(P-M)-y*(C-x);if(Math.abs(U)>1e-6){var b=(y*(x-A)-v*(M-k))/U;c.push(M+(P-M)*b),c.push(x+(C-x)*b)}else c.push(M),c.push(x);c.push(V),c.push(N)}g=!0}if(R==c.length)return u.length=0,!0;if(c.push(c[0]),c.push(c[1]),p==f)break;var Y=c;c=h,c.length=0,h=Y}if(u!=c){u.length=0;for(var p=0,D=c.length-2;p<D;p++)u[p]=c[p]}else u.length=u.length-2;return g},m.makeClockwise=function(n){for(var r=n,e=n.length,t=r[e-2]*r[1]-r[0]*r[e-1],a=0,s=0,i=0,c=0,u=0,g=e-3;u<g;u+=2)a=r[u],s=r[u+1],i=r[u+2],c=r[u+3],t+=a*c-i*s;if(!(t<0))for(var u=0,h=e-2,g=e>>1;u<g;u+=2){var d=r[u],f=r[u+1],p=h-u;r[u]=r[p],r[u+1]=r[p+1],r[p]=d,r[p+1]=f}},m}();o.SkeletonClipping=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return m.prototype.findBone=function(n){if(n==null)throw new Error("boneName cannot be null.");for(var r=this.bones,e=0,t=r.length;e<t;e++){var a=r[e];if(a.name==n)return a}return null},m.prototype.findBoneIndex=function(n){if(n==null)throw new Error("boneName cannot be null.");for(var r=this.bones,e=0,t=r.length;e<t;e++)if(r[e].name==n)return e;return-1},m.prototype.findSlot=function(n){if(n==null)throw new Error("slotName cannot be null.");for(var r=this.slots,e=0,t=r.length;e<t;e++){var a=r[e];if(a.name==n)return a}return null},m.prototype.findSlotIndex=function(n){if(n==null)throw new Error("slotName cannot be null.");for(var r=this.slots,e=0,t=r.length;e<t;e++)if(r[e].name==n)return e;return-1},m.prototype.findSkin=function(n){if(n==null)throw new Error("skinName cannot be null.");for(var r=this.skins,e=0,t=r.length;e<t;e++){var a=r[e];if(a.name==n)return a}return null},m.prototype.findEvent=function(n){if(n==null)throw new Error("eventDataName cannot be null.");for(var r=this.events,e=0,t=r.length;e<t;e++){var a=r[e];if(a.name==n)return a}return null},m.prototype.findAnimation=function(n){if(n==null)throw new Error("animationName cannot be null.");for(var r=this.animations,e=0,t=r.length;e<t;e++){var a=r[e];if(a.name==n)return a}return null},m.prototype.findIkConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,e=0,t=r.length;e<t;e++){var a=r[e];if(a.name==n)return a}return null},m.prototype.findTransformConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,e=0,t=r.length;e<t;e++){var a=r[e];if(a.name==n)return a}return null},m.prototype.findPathConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,e=0,t=r.length;e<t;e++){var a=r[e];if(a.name==n)return a}return null},m.prototype.findPathConstraintIndex=function(n){if(n==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,e=0,t=r.length;e<t;e++)if(r[e].name==n)return e;return-1},m}();o.SkeletonData=L})(spine||(spine={}));var spine;(function(o){var L=function(){function n(r){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=r}return n.prototype.readSkeletonData=function(r){var e=this.scale,t=new o.SkeletonData,a=typeof r=="string"?JSON.parse(r):r,s=a.skeleton;if(s!=null){if(t.hash=s.hash,t.version=s.spine,t.version=="3.8.75")throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");t.x=s.x,t.y=s.y,t.width=s.width,t.height=s.height,t.fps=s.fps,t.imagesPath=s.images}if(a.bones)for(var i=0;i<a.bones.length;i++){var c=a.bones[i],u=null,g=this.getValue(c,"parent",null);if(g!=null&&(u=t.findBone(g),u==null))throw new Error("Parent bone not found: "+g);var h=new o.BoneData(t.bones.length,c.name,u);h.length=this.getValue(c,"length",0)*e,h.x=this.getValue(c,"x",0)*e,h.y=this.getValue(c,"y",0)*e,h.rotation=this.getValue(c,"rotation",0),h.scaleX=this.getValue(c,"scaleX",1),h.scaleY=this.getValue(c,"scaleY",1),h.shearX=this.getValue(c,"shearX",0),h.shearY=this.getValue(c,"shearY",0),h.transformMode=n.transformModeFromString(this.getValue(c,"transform","normal")),h.skinRequired=this.getValue(c,"skin",!1),t.bones.push(h)}if(a.slots)for(var i=0;i<a.slots.length;i++){var d=a.slots[i],f=d.name,p=d.bone,M=t.findBone(p);if(M==null)throw new Error("Slot bone not found: "+p);var h=new o.SlotData(t.slots.length,f,M),x=this.getValue(d,"color",null);x!=null&&h.color.setFromString(x);var P=this.getValue(d,"dark",null);P!=null&&(h.darkColor=new o.Color(1,1,1,1),h.darkColor.setFromString(P)),h.attachmentName=this.getValue(d,"attachment",null),h.blendMode=n.blendModeFromString(this.getValue(d,"blend","normal")),t.slots.push(h)}if(a.ik)for(var i=0;i<a.ik.length;i++){var C=a.ik[i],h=new o.IkConstraintData(C.name);h.order=this.getValue(C,"order",0),h.skinRequired=this.getValue(C,"skin",!1);for(var I=0;I<C.bones.length;I++){var p=C.bones[I],w=t.findBone(p);if(w==null)throw new Error("IK bone not found: "+p);h.bones.push(w)}var l=C.target;if(h.target=t.findBone(l),h.target==null)throw new Error("IK target bone not found: "+l);h.mix=this.getValue(C,"mix",1),h.softness=this.getValue(C,"softness",0)*e,h.bendDirection=this.getValue(C,"bendPositive",!0)?1:-1,h.compress=this.getValue(C,"compress",!1),h.stretch=this.getValue(C,"stretch",!1),h.uniform=this.getValue(C,"uniform",!1),t.ikConstraints.push(h)}if(a.transform)for(var i=0;i<a.transform.length;i++){var C=a.transform[i],h=new o.TransformConstraintData(C.name);h.order=this.getValue(C,"order",0),h.skinRequired=this.getValue(C,"skin",!1);for(var I=0;I<C.bones.length;I++){var p=C.bones[I],w=t.findBone(p);if(w==null)throw new Error("Transform constraint bone not found: "+p);h.bones.push(w)}var l=C.target;if(h.target=t.findBone(l),h.target==null)throw new Error("Transform constraint target bone not found: "+l);h.local=this.getValue(C,"local",!1),h.relative=this.getValue(C,"relative",!1),h.offsetRotation=this.getValue(C,"rotation",0),h.offsetX=this.getValue(C,"x",0)*e,h.offsetY=this.getValue(C,"y",0)*e,h.offsetScaleX=this.getValue(C,"scaleX",0),h.offsetScaleY=this.getValue(C,"scaleY",0),h.offsetShearY=this.getValue(C,"shearY",0),h.rotateMix=this.getValue(C,"rotateMix",1),h.translateMix=this.getValue(C,"translateMix",1),h.scaleMix=this.getValue(C,"scaleMix",1),h.shearMix=this.getValue(C,"shearMix",1),t.transformConstraints.push(h)}if(a.path)for(var i=0;i<a.path.length;i++){var C=a.path[i],h=new o.PathConstraintData(C.name);h.order=this.getValue(C,"order",0),h.skinRequired=this.getValue(C,"skin",!1);for(var I=0;I<C.bones.length;I++){var p=C.bones[I],w=t.findBone(p);if(w==null)throw new Error("Transform constraint bone not found: "+p);h.bones.push(w)}var l=C.target;if(h.target=t.findSlot(l),h.target==null)throw new Error("Path target slot not found: "+l);h.positionMode=n.positionModeFromString(this.getValue(C,"positionMode","percent")),h.spacingMode=n.spacingModeFromString(this.getValue(C,"spacingMode","length")),h.rotateMode=n.rotateModeFromString(this.getValue(C,"rotateMode","tangent")),h.offsetRotation=this.getValue(C,"rotation",0),h.position=this.getValue(C,"position",0),h.positionMode==o.PositionMode.Fixed&&(h.position*=e),h.spacing=this.getValue(C,"spacing",0),(h.spacingMode==o.SpacingMode.Length||h.spacingMode==o.SpacingMode.Fixed)&&(h.spacing*=e),h.rotateMix=this.getValue(C,"rotateMix",1),h.translateMix=this.getValue(C,"translateMix",1),t.pathConstraints.push(h)}if(a.skins)for(var i=0;i<a.skins.length;i++){var E=a.skins[i],R=new o.Skin(E.name);if(E.bones)for(var S=0;S<E.bones.length;S++){var w=t.findBone(E.bones[S]);if(w==null)throw new Error("Skin bone not found: "+E.bones[i]);R.bones.push(w)}if(E.ik)for(var S=0;S<E.ik.length;S++){var k=t.findIkConstraint(E.ik[S]);if(k==null)throw new Error("Skin IK constraint not found: "+E.ik[i]);R.constraints.push(k)}if(E.transform)for(var S=0;S<E.transform.length;S++){var k=t.findTransformConstraint(E.transform[S]);if(k==null)throw new Error("Skin transform constraint not found: "+E.transform[i]);R.constraints.push(k)}if(E.path)for(var S=0;S<E.path.length;S++){var k=t.findPathConstraint(E.path[S]);if(k==null)throw new Error("Skin path constraint not found: "+E.path[i]);R.constraints.push(k)}for(var f in E.attachments){var A=t.findSlot(f);if(A==null)throw new Error("Slot not found: "+f);var d=E.attachments[f];for(var V in d){var N=this.readAttachment(d[V],R,A.index,V,t);N!=null&&R.setAttachment(A.index,V,N)}}t.skins.push(R),R.name=="default"&&(t.defaultSkin=R)}for(var i=0,T=this.linkedMeshes.length;i<T;i++){var v=this.linkedMeshes[i],R=v.skin==null?t.defaultSkin:t.findSkin(v.skin);if(R==null)throw new Error("Skin not found: "+v.skin);var y=R.getAttachment(v.slotIndex,v.parent);if(y==null)throw new Error("Parent mesh not found: "+v.parent);v.mesh.deformAttachment=v.inheritDeform?y:v.mesh,v.mesh.setParentMesh(y),v.mesh.updateUVs()}if(this.linkedMeshes.length=0,a.events)for(var U in a.events){var b=a.events[U],h=new o.EventData(U);h.intValue=this.getValue(b,"int",0),h.floatValue=this.getValue(b,"float",0),h.stringValue=this.getValue(b,"string",""),h.audioPath=this.getValue(b,"audio",null),h.audioPath!=null&&(h.volume=this.getValue(b,"volume",1),h.balance=this.getValue(b,"balance",0)),t.events.push(h)}if(a.animations)for(var Y in a.animations){var D=a.animations[Y];this.readAnimation(D,Y,t)}return t},n.prototype.readAttachment=function(r,e,t,a,s){var i=this.scale;a=this.getValue(r,"name",a);var c=this.getValue(r,"type","region");switch(c){case"region":{var u=this.getValue(r,"path",a),g=this.attachmentLoader.newRegionAttachment(e,a,u);if(g==null)return null;g.path=u,g.x=this.getValue(r,"x",0)*i,g.y=this.getValue(r,"y",0)*i,g.scaleX=this.getValue(r,"scaleX",1),g.scaleY=this.getValue(r,"scaleY",1),g.rotation=this.getValue(r,"rotation",0),g.width=r.width*i,g.height=r.height*i;var h=this.getValue(r,"color",null);return h!=null&&g.color.setFromString(h),g.updateOffset(),g}case"boundingbox":{var d=this.attachmentLoader.newBoundingBoxAttachment(e,a);if(d==null)return null;this.readVertices(r,d,r.vertexCount<<1);var h=this.getValue(r,"color",null);return h!=null&&d.color.setFromString(h),d}case"mesh":case"linkedmesh":{var u=this.getValue(r,"path",a),f=this.attachmentLoader.newMeshAttachment(e,a,u);if(f==null)return null;f.path=u;var h=this.getValue(r,"color",null);h!=null&&f.color.setFromString(h),f.width=this.getValue(r,"width",0)*i,f.height=this.getValue(r,"height",0)*i;var p=this.getValue(r,"parent",null);if(p!=null)return this.linkedMeshes.push(new m(f,this.getValue(r,"skin",null),t,p,this.getValue(r,"deform",!0))),f;var M=r.uvs;return this.readVertices(r,f,M.length),f.triangles=r.triangles,f.regionUVs=M,f.updateUVs(),f.edges=this.getValue(r,"edges",null),f.hullLength=this.getValue(r,"hull",0)*2,f}case"path":{var u=this.attachmentLoader.newPathAttachment(e,a);if(u==null)return null;u.closed=this.getValue(r,"closed",!1),u.constantSpeed=this.getValue(r,"constantSpeed",!0);var x=r.vertexCount;this.readVertices(r,u,x<<1);for(var P=o.Utils.newArray(x/3,0),C=0;C<r.lengths.length;C++)P[C]=r.lengths[C]*i;u.lengths=P;var h=this.getValue(r,"color",null);return h!=null&&u.color.setFromString(h),u}case"point":{var I=this.attachmentLoader.newPointAttachment(e,a);if(I==null)return null;I.x=this.getValue(r,"x",0)*i,I.y=this.getValue(r,"y",0)*i,I.rotation=this.getValue(r,"rotation",0);var h=this.getValue(r,"color",null);return h!=null&&I.color.setFromString(h),I}case"clipping":{var w=this.attachmentLoader.newClippingAttachment(e,a);if(w==null)return null;var l=this.getValue(r,"end",null);if(l!=null){var E=s.findSlot(l);if(E==null)throw new Error("Clipping end slot not found: "+l);w.endSlot=E}var x=r.vertexCount;this.readVertices(r,w,x<<1);var h=this.getValue(r,"color",null);return h!=null&&w.color.setFromString(h),w}}return null},n.prototype.readVertices=function(r,e,t){var a=this.scale;e.worldVerticesLength=t;var s=r.vertices;if(t==s.length){var i=o.Utils.toFloatArray(s);if(a!=1)for(var c=0,u=s.length;c<u;c++)i[c]*=a;e.vertices=i;return}for(var g=new Array,h=new Array,c=0,u=s.length;c<u;){var d=s[c++];h.push(d);for(var f=c+d*4;c<f;c+=4)h.push(s[c]),g.push(s[c+1]*a),g.push(s[c+2]*a),g.push(s[c+3])}e.bones=h,e.vertices=o.Utils.toFloatArray(g)},n.prototype.readAnimation=function(r,e,t){var a=this.scale,s=new Array,i=0;if(r.slots)for(var c in r.slots){var u=r.slots[c],g=t.findSlotIndex(c);if(g==-1)throw new Error("Slot not found: "+c);for(var h in u){var d=u[h];if(h=="attachment"){var f=new o.AttachmentTimeline(d.length);f.slotIndex=g;for(var p=0,M=0;M<d.length;M++){var x=d[M];f.setFrame(p++,this.getValue(x,"time",0),x.name)}s.push(f),i=Math.max(i,f.frames[f.getFrameCount()-1])}else if(h=="color"){var f=new o.ColorTimeline(d.length);f.slotIndex=g;for(var p=0,M=0;M<d.length;M++){var x=d[M],P=new o.Color;P.setFromString(x.color),f.setFrame(p,this.getValue(x,"time",0),P.r,P.g,P.b,P.a),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[(f.getFrameCount()-1)*o.ColorTimeline.ENTRIES])}else if(h=="twoColor"){var f=new o.TwoColorTimeline(d.length);f.slotIndex=g;for(var p=0,M=0;M<d.length;M++){var x=d[M],C=new o.Color,I=new o.Color;C.setFromString(x.light),I.setFromString(x.dark),f.setFrame(p,this.getValue(x,"time",0),C.r,C.g,C.b,C.a,I.r,I.g,I.b),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[(f.getFrameCount()-1)*o.TwoColorTimeline.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+h+" ("+c+")")}}if(r.bones)for(var w in r.bones){var l=r.bones[w],E=t.findBoneIndex(w);if(E==-1)throw new Error("Bone not found: "+w);for(var h in l){var d=l[h];if(h==="rotate"){var f=new o.RotateTimeline(d.length);f.boneIndex=E;for(var p=0,M=0;M<d.length;M++){var x=d[M];f.setFrame(p,this.getValue(x,"time",0),this.getValue(x,"angle",0)),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[(f.getFrameCount()-1)*o.RotateTimeline.ENTRIES])}else if(h==="translate"||h==="scale"||h==="shear"){var f=null,R=1,S=0;h==="scale"?(f=new o.ScaleTimeline(d.length),S=1):h==="shear"?f=new o.ShearTimeline(d.length):(f=new o.TranslateTimeline(d.length),R=a),f.boneIndex=E;for(var p=0,M=0;M<d.length;M++){var x=d[M],k=this.getValue(x,"x",S),A=this.getValue(x,"y",S);f.setFrame(p,this.getValue(x,"time",0),k*R,A*R),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[(f.getFrameCount()-1)*o.TranslateTimeline.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+h+" ("+w+")")}}if(r.ik)for(var V in r.ik){var N=r.ik[V],T=t.findIkConstraint(V),f=new o.IkConstraintTimeline(N.length);f.ikConstraintIndex=t.ikConstraints.indexOf(T);for(var p=0,M=0;M<N.length;M++){var x=N[M];f.setFrame(p,this.getValue(x,"time",0),this.getValue(x,"mix",1),this.getValue(x,"softness",0)*a,this.getValue(x,"bendPositive",!0)?1:-1,this.getValue(x,"compress",!1),this.getValue(x,"stretch",!1)),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[(f.getFrameCount()-1)*o.IkConstraintTimeline.ENTRIES])}if(r.transform)for(var V in r.transform){var N=r.transform[V],T=t.findTransformConstraint(V),f=new o.TransformConstraintTimeline(N.length);f.transformConstraintIndex=t.transformConstraints.indexOf(T);for(var p=0,M=0;M<N.length;M++){var x=N[M];f.setFrame(p,this.getValue(x,"time",0),this.getValue(x,"rotateMix",1),this.getValue(x,"translateMix",1),this.getValue(x,"scaleMix",1),this.getValue(x,"shearMix",1)),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[(f.getFrameCount()-1)*o.TransformConstraintTimeline.ENTRIES])}if(r.path)for(var V in r.path){var N=r.path[V],v=t.findPathConstraintIndex(V);if(v==-1)throw new Error("Path constraint not found: "+V);var y=t.pathConstraints[v];for(var h in N){var d=N[h];if(h==="position"||h==="spacing"){var f=null,R=1;h==="spacing"?(f=new o.PathConstraintSpacingTimeline(d.length),(y.spacingMode==o.SpacingMode.Length||y.spacingMode==o.SpacingMode.Fixed)&&(R=a)):(f=new o.PathConstraintPositionTimeline(d.length),y.positionMode==o.PositionMode.Fixed&&(R=a)),f.pathConstraintIndex=v;for(var p=0,M=0;M<d.length;M++){var x=d[M];f.setFrame(p,this.getValue(x,"time",0),this.getValue(x,h,0)*R),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[(f.getFrameCount()-1)*o.PathConstraintPositionTimeline.ENTRIES])}else if(h==="mix"){var f=new o.PathConstraintMixTimeline(d.length);f.pathConstraintIndex=v;for(var p=0,M=0;M<d.length;M++){var x=d[M];f.setFrame(p,this.getValue(x,"time",0),this.getValue(x,"rotateMix",1),this.getValue(x,"translateMix",1)),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[(f.getFrameCount()-1)*o.PathConstraintMixTimeline.ENTRIES])}}}if(r.deform)for(var U in r.deform){var b=r.deform[U],Y=t.findSkin(U);if(Y==null)throw new Error("Skin not found: "+U);for(var c in b){var u=b[c],g=t.findSlotIndex(c);if(g==-1)throw new Error("Slot not found: "+u.name);for(var h in u){var d=u[h],D=Y.getAttachment(g,h);if(D==null)throw new Error("Deform attachment not found: "+d.name);var O=D.bones!=null,B=D.vertices,X=O?B.length/3*2:B.length,f=new o.DeformTimeline(d.length);f.slotIndex=g,f.attachment=D;for(var p=0,_=0;_<d.length;_++){var x=d[_],F=void 0,W=this.getValue(x,"vertices",null);if(W==null)F=O?o.Utils.newFloatArray(X):B;else{F=o.Utils.newFloatArray(X);var G=this.getValue(x,"offset",0);if(o.Utils.arrayCopy(W,0,F,G,W.length),a!=1)for(var M=G,j=M+W.length;M<j;M++)F[M]*=a;if(!O)for(var M=0;M<X;M++)F[M]+=B[M]}f.setFrame(p,this.getValue(x,"time",0),F),this.readCurve(x,f,p),p++}s.push(f),i=Math.max(i,f.frames[f.getFrameCount()-1])}}}var H=r.drawOrder;if(H==null&&(H=r.draworder),H!=null){for(var f=new o.DrawOrderTimeline(H.length),q=t.slots.length,p=0,_=0;_<H.length;_++){var K=H[_],Z=null,$=this.getValue(K,"offsets",null);if($!=null){Z=o.Utils.newArray(q,-1);for(var Q=o.Utils.newArray(q-$.length,0),z=0,at=0,M=0;M<$.length;M++){var tt=$[M],g=t.findSlotIndex(tt.slot);if(g==-1)throw new Error("Slot not found: "+tt.slot);for(;z!=g;)Q[at++]=z++;Z[z+tt.offset]=z++}for(;z<q;)Q[at++]=z++;for(var M=q-1;M>=0;M--)Z[M]==-1&&(Z[M]=Q[--at])}f.setFrame(p++,this.getValue(K,"time",0),Z)}s.push(f),i=Math.max(i,f.frames[f.getFrameCount()-1])}if(r.events){for(var f=new o.EventTimeline(r.events.length),p=0,M=0;M<r.events.length;M++){var nt=r.events[M],rt=t.findEvent(nt.name);if(rt==null)throw new Error("Event not found: "+nt.name);var et=new o.Event(o.Utils.toSinglePrecision(this.getValue(nt,"time",0)),rt);et.intValue=this.getValue(nt,"int",rt.intValue),et.floatValue=this.getValue(nt,"float",rt.floatValue),et.stringValue=this.getValue(nt,"string",rt.stringValue),et.data.audioPath!=null&&(et.volume=this.getValue(nt,"volume",1),et.balance=this.getValue(nt,"balance",0)),f.setFrame(p++,et)}s.push(f),i=Math.max(i,f.frames[f.getFrameCount()-1])}if(isNaN(i))throw new Error("Error while parsing animation, duration is NaN");t.animations.push(new o.Animation(e,s,i))},n.prototype.readCurve=function(r,e,t){if(!!r.hasOwnProperty("curve"))if(r.curve=="stepped")e.setStepped(t);else{var a=r.curve;e.setCurve(t,a,this.getValue(r,"c2",0),this.getValue(r,"c3",1),this.getValue(r,"c4",1))}},n.prototype.getValue=function(r,e,t){return r[e]!==void 0?r[e]:t},n.blendModeFromString=function(r){if(r=r.toLowerCase(),r=="normal")return o.BlendMode.Normal;if(r=="additive")return o.BlendMode.Additive;if(r=="multiply")return o.BlendMode.Multiply;if(r=="screen")return o.BlendMode.Screen;throw new Error("Unknown blend mode: "+r)},n.positionModeFromString=function(r){if(r=r.toLowerCase(),r=="fixed")return o.PositionMode.Fixed;if(r=="percent")return o.PositionMode.Percent;throw new Error("Unknown position mode: "+r)},n.spacingModeFromString=function(r){if(r=r.toLowerCase(),r=="length")return o.SpacingMode.Length;if(r=="fixed")return o.SpacingMode.Fixed;if(r=="percent")return o.SpacingMode.Percent;throw new Error("Unknown position mode: "+r)},n.rotateModeFromString=function(r){if(r=r.toLowerCase(),r=="tangent")return o.RotateMode.Tangent;if(r=="chain")return o.RotateMode.Chain;if(r=="chainscale")return o.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+r)},n.transformModeFromString=function(r){if(r=r.toLowerCase(),r=="normal")return o.TransformMode.Normal;if(r=="onlytranslation")return o.TransformMode.OnlyTranslation;if(r=="norotationorreflection")return o.TransformMode.NoRotationOrReflection;if(r=="noscale")return o.TransformMode.NoScale;if(r=="noscaleorreflection")return o.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+r)},n}();o.SkeletonJson=L;var m=function(){function n(r,e,t,a,s){this.mesh=r,this.skin=e,this.slotIndex=t,this.parent=a,this.inheritDeform=s}return n}()})(spine||(spine={}));var spine;(function(o){var L=function(){function n(r,e,t){this.slotIndex=r,this.name=e,this.attachment=t}return n}();o.SkinEntry=L;var m=function(){function n(r){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,r==null)throw new Error("name cannot be null.");this.name=r}return n.prototype.setAttachment=function(r,e,t){if(t==null)throw new Error("attachment cannot be null.");var a=this.attachments;r>=a.length&&(a.length=r+1),a[r]||(a[r]={}),a[r][e]=t},n.prototype.addSkin=function(r){for(var e=0;e<r.bones.length;e++){for(var t=r.bones[e],a=!1,s=0;s<this.bones.length;s++)if(this.bones[s]==t){a=!0;break}a||this.bones.push(t)}for(var e=0;e<r.constraints.length;e++){for(var i=r.constraints[e],a=!1,s=0;s<this.constraints.length;s++)if(this.constraints[s]==i){a=!0;break}a||this.constraints.push(i)}for(var c=r.getAttachments(),e=0;e<c.length;e++){var u=c[e];this.setAttachment(u.slotIndex,u.name,u.attachment)}},n.prototype.copySkin=function(r){for(var e=0;e<r.bones.length;e++){for(var t=r.bones[e],a=!1,s=0;s<this.bones.length;s++)if(this.bones[s]==t){a=!0;break}a||this.bones.push(t)}for(var e=0;e<r.constraints.length;e++){for(var i=r.constraints[e],a=!1,s=0;s<this.constraints.length;s++)if(this.constraints[s]==i){a=!0;break}a||this.constraints.push(i)}for(var c=r.getAttachments(),e=0;e<c.length;e++){var u=c[e];u.attachment!=null&&(u.attachment instanceof o.MeshAttachment?(u.attachment=u.attachment.newLinkedMesh(),this.setAttachment(u.slotIndex,u.name,u.attachment)):(u.attachment=u.attachment.copy(),this.setAttachment(u.slotIndex,u.name,u.attachment)))}},n.prototype.getAttachment=function(r,e){var t=this.attachments[r];return t?t[e]:null},n.prototype.removeAttachment=function(r,e){var t=this.attachments[r];t&&(t[e]=null)},n.prototype.getAttachments=function(){for(var r=new Array,e=0;e<this.attachments.length;e++){var t=this.attachments[e];if(t)for(var a in t){var s=t[a];s&&r.push(new L(e,a,s))}}return r},n.prototype.getAttachmentsForSlot=function(r,e){var t=this.attachments[r];if(t)for(var a in t){var s=t[a];s&&e.push(new L(r,a,s))}},n.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},n.prototype.attachAll=function(r,e){for(var t=0,a=0;a<r.slots.length;a++){var s=r.slots[a],i=s.getAttachment();if(i&&t<e.attachments.length){var c=e.attachments[t];for(var u in c){var g=c[u];if(i==g){var h=this.getAttachment(t,u);h!=null&&s.setAttachment(h);break}}}t++}},n}();o.Skin=m})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r){if(this.deform=new Array,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=n,this.bone=r,this.color=new o.Color,this.darkColor=n.darkColor==null?null:new o.Color,this.setToSetupPose()}return m.prototype.getSkeleton=function(){return this.bone.skeleton},m.prototype.getAttachment=function(){return this.attachment},m.prototype.setAttachment=function(n){this.attachment!=n&&(this.attachment=n,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},m.prototype.setAttachmentTime=function(n){this.attachmentTime=this.bone.skeleton.time-n},m.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},m.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},m}();o.Slot=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r,e){if(this.color=new o.Color(1,1,1,1),n<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(e==null)throw new Error("boneData cannot be null.");this.index=n,this.name=r,this.boneData=e}return m}();o.SlotData=L})(spine||(spine={}));var spine;(function(o){var L=function(){function t(a){this._image=a}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(a){switch(a.toLowerCase()){case"nearest":return m.Nearest;case"linear":return m.Linear;case"mipmap":return m.MipMap;case"mipmapnearestnearest":return m.MipMapNearestNearest;case"mipmaplinearnearest":return m.MipMapLinearNearest;case"mipmapnearestlinear":return m.MipMapNearestLinear;case"mipmaplinearlinear":return m.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+a)}},t.wrapFromString=function(a){switch(a.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+a)}},t}();o.Texture=L;var m;(function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"})(m=o.TextureFilter||(o.TextureFilter={}));var n;(function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"})(n=o.TextureWrap||(o.TextureWrap={}));var r=function(){function t(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}return t}();o.TextureRegion=r;var e=function(t){__extends(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.prototype.setFilters=function(s,i){},a.prototype.setWraps=function(s,i){},a.prototype.dispose=function(){},a}(L);o.FakeTexture=e})(spine||(spine={}));var spine;(function(o){var L=function(){function e(t,a){this.pages=new Array,this.regions=new Array,this.load(t,a)}return e.prototype.load=function(t,a){if(a==null)throw new Error("textureLoader cannot be null.");for(var s=new m(t),i=new Array(4),c=null;;){var u=s.readLine();if(u==null)break;if(u=u.trim(),u.length==0)c=null;else if(c){var h=new r;h.name=u,h.page=c;var d=s.readValue();d.toLocaleLowerCase()=="true"?h.degrees=90:d.toLocaleLowerCase()=="false"?h.degrees=0:h.degrees=parseFloat(d),h.rotate=h.degrees==90,s.readTuple(i);var f=parseInt(i[0]),p=parseInt(i[1]);s.readTuple(i);var M=parseInt(i[0]),x=parseInt(i[1]);h.u=f/c.width,h.v=p/c.height,h.rotate?(h.u2=(f+x)/c.width,h.v2=(p+M)/c.height):(h.u2=(f+M)/c.width,h.v2=(p+x)/c.height),h.x=f,h.y=p,h.width=Math.abs(M),h.height=Math.abs(x),s.readTuple(i)==4&&s.readTuple(i)==4&&s.readTuple(i),h.originalWidth=parseInt(i[0]),h.originalHeight=parseInt(i[1]),s.readTuple(i),h.offsetX=parseInt(i[0]),h.offsetY=parseInt(i[1]),h.index=parseInt(s.readValue()),h.texture=c.texture,this.regions.push(h)}else{c=new n,c.name=u,s.readTuple(i)==2&&(c.width=parseInt(i[0]),c.height=parseInt(i[1]),s.readTuple(i)),s.readTuple(i),c.minFilter=o.Texture.filterFromString(i[0]),c.magFilter=o.Texture.filterFromString(i[1]);var g=s.readValue();c.uWrap=o.TextureWrap.ClampToEdge,c.vWrap=o.TextureWrap.ClampToEdge,g=="x"?c.uWrap=o.TextureWrap.Repeat:g=="y"?c.vWrap=o.TextureWrap.Repeat:g=="xy"&&(c.uWrap=c.vWrap=o.TextureWrap.Repeat),c.texture=a(u),c.texture.setFilters(c.minFilter,c.magFilter),c.texture.setWraps(c.uWrap,c.vWrap),c.width=c.texture.getImage().width,c.height=c.texture.getImage().height,this.pages.push(c)}}},e.prototype.findRegion=function(t){for(var a=0;a<this.regions.length;a++)if(this.regions[a].name==t)return this.regions[a];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},e}();o.TextureAtlas=L;var m=function(){function e(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return e.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},e.prototype.readValue=function(){var t=this.readLine(),a=t.indexOf(":");if(a==-1)throw new Error("Invalid line: "+t);return t.substring(a+1).trim()},e.prototype.readTuple=function(t){var a=this.readLine(),s=a.indexOf(":");if(s==-1)throw new Error("Invalid line: "+a);for(var i=0,c=s+1;i<3;i++){var u=a.indexOf(",",c);if(u==-1)break;t[i]=a.substr(c,u-c).trim(),c=u+1}return t[i]=a.substring(c).trim(),i+1},e}(),n=function(){function e(){}return e}();o.TextureAtlasPage=n;var r=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(o.TextureRegion);o.TextureAtlasRegion=r})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new o.Vector2,this.active=!1,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=n,this.rotateMix=n.rotateMix,this.translateMix=n.translateMix,this.scaleMix=n.scaleMix,this.shearMix=n.shearMix,this.bones=new Array;for(var e=0;e<n.bones.length;e++)this.bones.push(r.findBone(n.bones[e].name));this.target=r.findBone(n.target.name)}return m.prototype.isActive=function(){return this.active},m.prototype.apply=function(){this.update()},m.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},m.prototype.applyAbsoluteWorld=function(){for(var n=this.rotateMix,r=this.translateMix,e=this.scaleMix,t=this.shearMix,a=this.target,s=a.a,i=a.b,c=a.c,u=a.d,g=s*u-i*c>0?o.MathUtils.degRad:-o.MathUtils.degRad,h=this.data.offsetRotation*g,d=this.data.offsetShearY*g,f=this.bones,p=0,M=f.length;p<M;p++){var x=f[p],P=!1;if(n!=0){var C=x.a,I=x.b,w=x.c,l=x.d,E=Math.atan2(c,s)-Math.atan2(w,C)+h;E>o.MathUtils.PI?E-=o.MathUtils.PI2:E<-o.MathUtils.PI&&(E+=o.MathUtils.PI2),E*=n;var R=Math.cos(E),S=Math.sin(E);x.a=R*C-S*w,x.b=R*I-S*l,x.c=S*C+R*w,x.d=S*I+R*l,P=!0}if(r!=0){var k=this.temp;a.localToWorld(k.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(k.x-x.worldX)*r,x.worldY+=(k.y-x.worldY)*r,P=!0}if(e>0){var A=Math.sqrt(x.a*x.a+x.c*x.c),V=Math.sqrt(s*s+c*c);A>1e-5&&(A=(A+(V-A+this.data.offsetScaleX)*e)/A),x.a*=A,x.c*=A,A=Math.sqrt(x.b*x.b+x.d*x.d),V=Math.sqrt(i*i+u*u),A>1e-5&&(A=(A+(V-A+this.data.offsetScaleY)*e)/A),x.b*=A,x.d*=A,P=!0}if(t>0){var I=x.b,l=x.d,N=Math.atan2(l,I),E=Math.atan2(u,i)-Math.atan2(c,s)-(N-Math.atan2(x.c,x.a));E>o.MathUtils.PI?E-=o.MathUtils.PI2:E<-o.MathUtils.PI&&(E+=o.MathUtils.PI2),E=N+(E+d)*t;var A=Math.sqrt(I*I+l*l);x.b=Math.cos(E)*A,x.d=Math.sin(E)*A,P=!0}P&&(x.appliedValid=!1)}},m.prototype.applyRelativeWorld=function(){for(var n=this.rotateMix,r=this.translateMix,e=this.scaleMix,t=this.shearMix,a=this.target,s=a.a,i=a.b,c=a.c,u=a.d,g=s*u-i*c>0?o.MathUtils.degRad:-o.MathUtils.degRad,h=this.data.offsetRotation*g,d=this.data.offsetShearY*g,f=this.bones,p=0,M=f.length;p<M;p++){var x=f[p],P=!1;if(n!=0){var C=x.a,I=x.b,w=x.c,l=x.d,E=Math.atan2(c,s)+h;E>o.MathUtils.PI?E-=o.MathUtils.PI2:E<-o.MathUtils.PI&&(E+=o.MathUtils.PI2),E*=n;var R=Math.cos(E),S=Math.sin(E);x.a=R*C-S*w,x.b=R*I-S*l,x.c=S*C+R*w,x.d=S*I+R*l,P=!0}if(r!=0){var k=this.temp;a.localToWorld(k.set(this.data.offsetX,this.data.offsetY)),x.worldX+=k.x*r,x.worldY+=k.y*r,P=!0}if(e>0){var A=(Math.sqrt(s*s+c*c)-1+this.data.offsetScaleX)*e+1;x.a*=A,x.c*=A,A=(Math.sqrt(i*i+u*u)-1+this.data.offsetScaleY)*e+1,x.b*=A,x.d*=A,P=!0}if(t>0){var E=Math.atan2(u,i)-Math.atan2(c,s);E>o.MathUtils.PI?E-=o.MathUtils.PI2:E<-o.MathUtils.PI&&(E+=o.MathUtils.PI2);var I=x.b,l=x.d;E=Math.atan2(l,I)+(E-o.MathUtils.PI/2+d)*t;var A=Math.sqrt(I*I+l*l);x.b=Math.cos(E)*A,x.d=Math.sin(E)*A,P=!0}P&&(x.appliedValid=!1)}},m.prototype.applyAbsoluteLocal=function(){var n=this.rotateMix,r=this.translateMix,e=this.scaleMix,t=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var s=this.bones,i=0,c=s.length;i<c;i++){var u=s[i];u.appliedValid||u.updateAppliedTransform();var g=u.arotation;if(n!=0){var h=a.arotation-g+this.data.offsetRotation;h-=(16384-(16384.499999999996-h/360|0))*360,g+=h*n}var d=u.ax,f=u.ay;r!=0&&(d+=(a.ax-d+this.data.offsetX)*r,f+=(a.ay-f+this.data.offsetY)*r);var p=u.ascaleX,M=u.ascaleY;e!=0&&(p>1e-5&&(p=(p+(a.ascaleX-p+this.data.offsetScaleX)*e)/p),M>1e-5&&(M=(M+(a.ascaleY-M+this.data.offsetScaleY)*e)/M));var x=u.ashearY;if(t!=0){var h=a.ashearY-x+this.data.offsetShearY;h-=(16384-(16384.499999999996-h/360|0))*360,u.shearY+=h*t}u.updateWorldTransformWith(d,f,g,p,M,u.ashearX,x)}},m.prototype.applyRelativeLocal=function(){var n=this.rotateMix,r=this.translateMix,e=this.scaleMix,t=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var s=this.bones,i=0,c=s.length;i<c;i++){var u=s[i];u.appliedValid||u.updateAppliedTransform();var g=u.arotation;n!=0&&(g+=(a.arotation+this.data.offsetRotation)*n);var h=u.ax,d=u.ay;r!=0&&(h+=(a.ax+this.data.offsetX)*r,d+=(a.ay+this.data.offsetY)*r);var f=u.ascaleX,p=u.ascaleY;e!=0&&(f>1e-5&&(f*=(a.ascaleX-1+this.data.offsetScaleX)*e+1),p>1e-5&&(p*=(a.ascaleY-1+this.data.offsetScaleY)*e+1));var M=u.ashearY;t!=0&&(M+=(a.ashearY+this.data.offsetShearY)*t),u.updateWorldTransformWith(h,d,g,f,p,u.ashearX,M)}},m}();o.TransformConstraint=L})(spine||(spine={}));var spine;(function(o){var L=function(m){__extends(n,m);function n(r){var e=m.call(this,r,0,!1)||this;return e.bones=new Array,e.rotateMix=0,e.translateMix=0,e.scaleMix=0,e.shearMix=0,e.offsetRotation=0,e.offsetX=0,e.offsetY=0,e.offsetScaleX=0,e.offsetScaleY=0,e.offsetShearY=0,e.relative=!1,e.local=!1,e}return n}(o.ConstraintData);o.TransformConstraintData=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new o.Pool(function(){return new Array}),this.polygonIndicesPool=new o.Pool(function(){return new Array})}return m.prototype.triangulate=function(n){var r=n,e=n.length>>1,t=this.indicesArray;t.length=0;for(var a=0;a<e;a++)t[a]=a;var s=this.isConcaveArray;s.length=0;for(var a=0,i=e;a<i;++a)s[a]=m.isConcave(a,e,r,t);var c=this.triangles;for(c.length=0;e>3;){for(var u=e-1,a=0,g=1;;){t:if(!s[a]){for(var h=t[u]<<1,d=t[a]<<1,f=t[g]<<1,p=r[h],M=r[h+1],x=r[d],P=r[d+1],C=r[f],I=r[f+1],w=(g+1)%e;w!=u;w=(w+1)%e)if(!!s[w]){var l=t[w]<<1,E=r[l],R=r[l+1];if(m.positiveArea(C,I,p,M,E,R)&&m.positiveArea(p,M,x,P,E,R)&&m.positiveArea(x,P,C,I,E,R))break t}break}if(g==0){do{if(!s[a])break;a--}while(a>0);break}u=a,a=g,g=(g+1)%e}c.push(t[(e+a-1)%e]),c.push(t[a]),c.push(t[(a+1)%e]),t.splice(a,1),s.splice(a,1),e--;var S=(e+a-1)%e,k=a==e?0:a;s[S]=m.isConcave(S,e,r,t),s[k]=m.isConcave(k,e,r,t)}return e==3&&(c.push(t[2]),c.push(t[0]),c.push(t[1])),c},m.prototype.decompose=function(n,r){var e=n,t=this.convexPolygons;this.polygonPool.freeAll(t),t.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var i=this.polygonPool.obtain();i.length=0;for(var c=-1,u=0,g=0,h=r.length;g<h;g+=3){var d=r[g]<<1,f=r[g+1]<<1,p=r[g+2]<<1,M=e[d],x=e[d+1],P=e[f],C=e[f+1],I=e[p],w=e[p+1],l=!1;if(c==d){var E=i.length-4,R=m.winding(i[E],i[E+1],i[E+2],i[E+3],I,w),S=m.winding(I,w,i[0],i[1],i[2],i[3]);R==u&&S==u&&(i.push(I),i.push(w),s.push(p),l=!0)}l||(i.length>0?(t.push(i),a.push(s)):(this.polygonPool.free(i),this.polygonIndicesPool.free(s)),i=this.polygonPool.obtain(),i.length=0,i.push(M),i.push(x),i.push(P),i.push(C),i.push(I),i.push(w),s=this.polygonIndicesPool.obtain(),s.length=0,s.push(d),s.push(f),s.push(p),u=m.winding(M,x,P,C,I,w),c=d)}i.length>0&&(t.push(i),a.push(s));for(var g=0,h=t.length;g<h;g++)if(s=a[g],s.length!=0){var k=s[0],A=s[s.length-1];i=t[g];for(var E=i.length-4,V=i[E],N=i[E+1],T=i[E+2],v=i[E+3],y=i[0],U=i[1],b=i[2],Y=i[3],D=m.winding(V,N,T,v,y,U),O=0;O<h;O++)if(O!=g){var B=a[O];if(B.length==3){var X=B[0],_=B[1],F=B[2],W=t[O],I=W[W.length-2],w=W[W.length-1];if(!(X!=k||_!=A)){var R=m.winding(V,N,T,v,I,w),S=m.winding(I,w,y,U,b,Y);R==D&&S==D&&(W.length=0,B.length=0,i.push(I),i.push(w),s.push(F),V=T,N=v,T=I,v=w,O=0)}}}}for(var g=t.length-1;g>=0;g--)i=t[g],i.length==0&&(t.splice(g,1),this.polygonPool.free(i),s=a[g],a.splice(g,1),this.polygonIndicesPool.free(s));return t},m.isConcave=function(n,r,e,t){var a=t[(r+n-1)%r]<<1,s=t[n]<<1,i=t[(n+1)%r]<<1;return!this.positiveArea(e[a],e[a+1],e[s],e[s+1],e[i],e[i+1])},m.positiveArea=function(n,r,e,t,a,s){return n*(s-t)+e*(r-s)+a*(t-r)>=0},m.winding=function(n,r,e,t,a,s){var i=e-n,c=t-r;return a*c-s*i+i*r-n*c>=0?1:-1},m}();o.Triangulator=L})(spine||(spine={}));var spine;(function(o){var L=function(){function h(){this.array=new Array}return h.prototype.add=function(d){var f=this.contains(d);return this.array[d|0]=d|0,!f},h.prototype.contains=function(d){return this.array[d|0]!=null},h.prototype.remove=function(d){this.array[d|0]=void 0},h.prototype.clear=function(){this.array.length=0},h}();o.IntSet=L;var m=function(){function h(d,f,p,M){d===void 0&&(d=0),f===void 0&&(f=0),p===void 0&&(p=0),M===void 0&&(M=0),this.r=d,this.g=f,this.b=p,this.a=M}return h.prototype.set=function(d,f,p,M){return this.r=d,this.g=f,this.b=p,this.a=M,this.clamp(),this},h.prototype.setFromColor=function(d){return this.r=d.r,this.g=d.g,this.b=d.b,this.a=d.a,this},h.prototype.setFromString=function(d){return d=d.charAt(0)=="#"?d.substr(1):d,this.r=parseInt(d.substr(0,2),16)/255,this.g=parseInt(d.substr(2,2),16)/255,this.b=parseInt(d.substr(4,2),16)/255,this.a=(d.length!=8?255:parseInt(d.substr(6,2),16))/255,this},h.prototype.add=function(d,f,p,M){return this.r+=d,this.g+=f,this.b+=p,this.a+=M,this.clamp(),this},h.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},h.rgba8888ToColor=function(d,f){d.r=((f&4278190080)>>>24)/255,d.g=((f&16711680)>>>16)/255,d.b=((f&65280)>>>8)/255,d.a=(f&255)/255},h.rgb888ToColor=function(d,f){d.r=((f&16711680)>>>16)/255,d.g=((f&65280)>>>8)/255,d.b=(f&255)/255},h.WHITE=new h(1,1,1,1),h.RED=new h(1,0,0,1),h.GREEN=new h(0,1,0,1),h.BLUE=new h(0,0,1,1),h.MAGENTA=new h(1,0,1,1),h}();o.Color=m;var n=function(){function h(){}return h.clamp=function(d,f,p){return d<f?f:d>p?p:d},h.cosDeg=function(d){return Math.cos(d*h.degRad)},h.sinDeg=function(d){return Math.sin(d*h.degRad)},h.signum=function(d){return d>0?1:d<0?-1:0},h.toInt=function(d){return d>0?Math.floor(d):Math.ceil(d)},h.cbrt=function(d){var f=Math.pow(Math.abs(d),1/3);return d<0?-f:f},h.randomTriangular=function(d,f){return h.randomTriangularWith(d,f,(d+f)*.5)},h.randomTriangularWith=function(d,f,p){var M=Math.random(),x=f-d;return M<=(p-d)/x?d+Math.sqrt(M*x*(p-d)):f-Math.sqrt((1-M)*x*(f-p))},h.PI=3.1415927,h.PI2=h.PI*2,h.radiansToDegrees=180/h.PI,h.radDeg=h.radiansToDegrees,h.degreesToRadians=h.PI/180,h.degRad=h.degreesToRadians,h}();o.MathUtils=n;var r=function(){function h(){}return h.prototype.apply=function(d,f,p){return d+(f-d)*this.applyInternal(p)},h}();o.Interpolation=r;var e=function(h){__extends(d,h);function d(f){var p=h.call(this)||this;return p.power=2,p.power=f,p}return d.prototype.applyInternal=function(f){return f<=.5?Math.pow(f*2,this.power)/2:Math.pow((f-1)*2,this.power)/(this.power%2==0?-2:2)+1},d}(r);o.Pow=e;var t=function(h){__extends(d,h);function d(f){return h.call(this,f)||this}return d.prototype.applyInternal=function(f){return Math.pow(f-1,this.power)*(this.power%2==0?-1:1)+1},d}(e);o.PowOut=t;var a=function(){function h(){}return h.arrayCopy=function(d,f,p,M,x){for(var P=f,C=M;P<f+x;P++,C++)p[C]=d[P]},h.setArraySize=function(d,f,p){p===void 0&&(p=0);var M=d.length;if(M==f)return d;if(d.length=f,M<f)for(var x=M;x<f;x++)d[x]=p;return d},h.ensureArrayCapacity=function(d,f,p){return p===void 0&&(p=0),d.length>=f?d:h.setArraySize(d,f,p)},h.newArray=function(d,f){for(var p=new Array(d),M=0;M<d;M++)p[M]=f;return p},h.newFloatArray=function(d){if(h.SUPPORTS_TYPED_ARRAYS)return new Float32Array(d);for(var f=new Array(d),p=0;p<f.length;p++)f[p]=0;return f},h.newShortArray=function(d){if(h.SUPPORTS_TYPED_ARRAYS)return new Int16Array(d);for(var f=new Array(d),p=0;p<f.length;p++)f[p]=0;return f},h.toFloatArray=function(d){return h.SUPPORTS_TYPED_ARRAYS?new Float32Array(d):d},h.toSinglePrecision=function(d){return h.SUPPORTS_TYPED_ARRAYS?Math.fround(d):d},h.webkit602BugfixHelper=function(d,f){},h.contains=function(d,f,p){p===void 0&&(p=!0);for(var M=0;M<d.length;M++)if(d[M]==f)return!0;return!1},h.SUPPORTS_TYPED_ARRAYS=typeof Float32Array!="undefined",h}();o.Utils=a;var s=function(){function h(){}return h.logBones=function(d){for(var f=0;f<d.bones.length;f++){var p=d.bones[f];console.log(p.data.name+", "+p.a+", "+p.b+", "+p.c+", "+p.d+", "+p.worldX+", "+p.worldY)}},h}();o.DebugUtils=s;var i=function(){function h(d){this.items=new Array,this.instantiator=d}return h.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},h.prototype.free=function(d){d.reset&&d.reset(),this.items.push(d)},h.prototype.freeAll=function(d){for(var f=0;f<d.length;f++)this.free(d[f])},h.prototype.clear=function(){this.items.length=0},h}();o.Pool=i;var c=function(){function h(d,f){d===void 0&&(d=0),f===void 0&&(f=0),this.x=d,this.y=f}return h.prototype.set=function(d,f){return this.x=d,this.y=f,this},h.prototype.length=function(){var d=this.x,f=this.y;return Math.sqrt(d*d+f*f)},h.prototype.normalize=function(){var d=this.length();return d!=0&&(this.x/=d,this.y/=d),this},h}();o.Vector2=c;var u=function(){function h(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return h.prototype.update=function(){var d=Date.now()/1e3;this.delta=d-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=d,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},h}();o.TimeKeeper=u;var g=function(){function h(d){d===void 0&&(d=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(d)}return h.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},h.prototype.addValue=function(d){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=d,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},h.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var d=0,f=0;f<this.values.length;f++)d+=this.values[f];this.mean=d/this.values.length,this.dirty=!1}return this.mean}else return 0},h}();o.WindowedMean=g})(spine||(spine={})),function(){Math.fround||(Math.fround=function(o){return function(L){return o[0]=L,o[0]}}(new Float32Array(1)))}();var spine;(function(o){var L=function(){function n(r){if(r==null)throw new Error("name cannot be null.");this.name=r}return n}();o.Attachment=L;var m=function(n){__extends(r,n);function r(e){var t=n.call(this,e)||this;return t.id=(r.nextID++&65535)<<11,t.worldVerticesLength=0,t.deformAttachment=t,t}return r.prototype.computeWorldVertices=function(e,t,a,s,i,c){a=i+(a>>1)*c;var u=e.bone.skeleton,g=e.deform,h=this.vertices,d=this.bones;if(d==null){g.length>0&&(h=g);for(var f=e.bone,p=f.worldX,M=f.worldY,x=f.a,P=f.b,C=f.c,I=f.d,w=t,l=i;l<a;w+=2,l+=c){var E=h[w],R=h[w+1];s[l]=E*x+R*P+p,s[l+1]=E*C+R*I+M}return}for(var S=0,k=0,A=0;A<t;A+=2){var V=d[S];S+=V+1,k+=V}var N=u.bones;if(g.length==0)for(var l=i,P=k*3;l<a;l+=c){var T=0,v=0,V=d[S++];for(V+=S;S<V;S++,P+=3){var f=N[d[S]],E=h[P],R=h[P+1],y=h[P+2];T+=(E*f.a+R*f.b+f.worldX)*y,v+=(E*f.c+R*f.d+f.worldY)*y}s[l]=T,s[l+1]=v}else for(var U=g,l=i,P=k*3,b=k<<1;l<a;l+=c){var T=0,v=0,V=d[S++];for(V+=S;S<V;S++,P+=3,b+=2){var f=N[d[S]],E=h[P]+U[b],R=h[P+1]+U[b+1],y=h[P+2];T+=(E*f.a+R*f.b+f.worldX)*y,v+=(E*f.c+R*f.d+f.worldY)*y}s[l]=T,s[l+1]=v}},r.prototype.copyTo=function(e){this.bones!=null?(e.bones=new Array(this.bones.length),o.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices!=null?(e.vertices=o.Utils.newFloatArray(this.vertices.length),o.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},r.nextID=0,r}(L);o.VertexAttachment=m})(spine||(spine={}));var spine;(function(o){var L;(function(m){m[m.Region=0]="Region",m[m.BoundingBox=1]="BoundingBox",m[m.Mesh=2]="Mesh",m[m.LinkedMesh=3]="LinkedMesh",m[m.Path=4]="Path",m[m.Point=5]="Point",m[m.Clipping=6]="Clipping"})(L=o.AttachmentType||(o.AttachmentType={}))})(spine||(spine={}));var spine;(function(o){var L=function(m){__extends(n,m);function n(r){var e=m.call(this,r)||this;return e.color=new o.Color(1,1,1,1),e}return n.prototype.copy=function(){var r=new n(this.name);return this.copyTo(r),r.color.setFromColor(this.color),r},n}(o.VertexAttachment);o.BoundingBoxAttachment=L})(spine||(spine={}));var spine;(function(o){var L=function(m){__extends(n,m);function n(r){var e=m.call(this,r)||this;return e.color=new o.Color(.2275,.2275,.8078,1),e}return n.prototype.copy=function(){var r=new n(this.name);return this.copyTo(r),r.endSlot=this.endSlot,r.color.setFromColor(this.color),r},n}(o.VertexAttachment);o.ClippingAttachment=L})(spine||(spine={}));var spine;(function(o){var L=function(m){__extends(n,m);function n(r){var e=m.call(this,r)||this;return e.color=new o.Color(1,1,1,1),e.tempColor=new o.Color(0,0,0,0),e}return n.prototype.updateUVs=function(){var r=this.regionUVs;(this.uvs==null||this.uvs.length!=r.length)&&(this.uvs=o.Utils.newFloatArray(r.length));var e=this.uvs,t=this.uvs.length,a=this.region.u,s=this.region.v,i=0,c=0;if(this.region instanceof o.TextureAtlasRegion){var u=this.region,g=u.texture.getImage().width,h=u.texture.getImage().height;switch(u.degrees){case 90:a-=(u.originalHeight-u.offsetY-u.height)/g,s-=(u.originalWidth-u.offsetX-u.width)/h,i=u.originalHeight/g,c=u.originalWidth/h;for(var d=0;d<t;d+=2)e[d]=a+r[d+1]*i,e[d+1]=s+(1-r[d])*c;return;case 180:a-=(u.originalWidth-u.offsetX-u.width)/g,s-=u.offsetY/h,i=u.originalWidth/g,c=u.originalHeight/h;for(var d=0;d<t;d+=2)e[d]=a+(1-r[d])*i,e[d+1]=s+(1-r[d+1])*c;return;case 270:a-=u.offsetY/g,s-=u.offsetX/h,i=u.originalHeight/g,c=u.originalWidth/h;for(var d=0;d<t;d+=2)e[d]=a+(1-r[d+1])*i,e[d+1]=s+r[d]*c;return}a-=u.offsetX/g,s-=(u.originalHeight-u.offsetY-u.height)/h,i=u.originalWidth/g,c=u.originalHeight/h}else this.region==null?(a=s=0,i=c=1):(i=this.region.u2-a,c=this.region.v2-s);for(var d=0;d<t;d+=2)e[d]=a+r[d]*i,e[d+1]=s+r[d+1]*c},n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(r){this.parentMesh=r,r!=null&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},n.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var r=new n(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Array(this.regionUVs.length),o.Utils.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.uvs=new Array(this.uvs.length),o.Utils.arrayCopy(this.uvs,0,r.uvs,0,this.uvs.length),r.triangles=new Array(this.triangles.length),o.Utils.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,this.edges!=null&&(r.edges=new Array(this.edges.length),o.Utils.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},n.prototype.newLinkedMesh=function(){var r=new n(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),r.deformAttachment=this.deformAttachment,r.setParentMesh(this.parentMesh!=null?this.parentMesh:this),r.updateUVs(),r},n}(o.VertexAttachment);o.MeshAttachment=L})(spine||(spine={}));var spine;(function(o){var L=function(m){__extends(n,m);function n(r){var e=m.call(this,r)||this;return e.closed=!1,e.constantSpeed=!1,e.color=new o.Color(1,1,1,1),e}return n.prototype.copy=function(){var r=new n(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),o.Utils.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},n}(o.VertexAttachment);o.PathAttachment=L})(spine||(spine={}));var spine;(function(o){var L=function(m){__extends(n,m);function n(r){var e=m.call(this,r)||this;return e.color=new o.Color(.38,.94,0,1),e}return n.prototype.computeWorldPosition=function(r,e){return e.x=this.x*r.a+this.y*r.b+r.worldX,e.y=this.x*r.c+this.y*r.d+r.worldY,e},n.prototype.computeWorldRotation=function(r){var e=o.MathUtils.cosDeg(this.rotation),t=o.MathUtils.sinDeg(this.rotation),a=e*r.a+t*r.b,s=e*r.c+t*r.d;return Math.atan2(s,a)*o.MathUtils.radDeg},n.prototype.copy=function(){var r=new n(this.name);return r.x=this.x,r.y=this.y,r.rotation=this.rotation,r.color.setFromColor(this.color),r},n}(o.VertexAttachment);o.PointAttachment=L})(spine||(spine={}));var spine;(function(o){var L=function(m){__extends(n,m);function n(r){var e=m.call(this,r)||this;return e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.rotation=0,e.width=0,e.height=0,e.color=new o.Color(1,1,1,1),e.offset=o.Utils.newFloatArray(8),e.uvs=o.Utils.newFloatArray(8),e.tempColor=new o.Color(1,1,1,1),e}return n.prototype.updateOffset=function(){var r=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,t=-this.width/2*this.scaleX+this.region.offsetX*r,a=-this.height/2*this.scaleY+this.region.offsetY*e,s=t+this.region.width*r,i=a+this.region.height*e,c=this.rotation*Math.PI/180,u=Math.cos(c),g=Math.sin(c),h=t*u+this.x,d=t*g,f=a*u+this.y,p=a*g,M=s*u+this.x,x=s*g,P=i*u+this.y,C=i*g,I=this.offset;I[n.OX1]=h-p,I[n.OY1]=f+d,I[n.OX2]=h-C,I[n.OY2]=P+d,I[n.OX3]=M-C,I[n.OY3]=P+x,I[n.OX4]=M-p,I[n.OY4]=f+x},n.prototype.setRegion=function(r){this.region=r;var e=this.uvs;r.rotate?(e[2]=r.u,e[3]=r.v2,e[4]=r.u,e[5]=r.v,e[6]=r.u2,e[7]=r.v,e[0]=r.u2,e[1]=r.v2):(e[0]=r.u,e[1]=r.v2,e[2]=r.u,e[3]=r.v,e[4]=r.u2,e[5]=r.v,e[6]=r.u2,e[7]=r.v2)},n.prototype.computeWorldVertices=function(r,e,t,a){var s=this.offset,i=r.worldX,c=r.worldY,u=r.a,g=r.b,h=r.c,d=r.d,f=0,p=0;f=s[n.OX1],p=s[n.OY1],e[t]=f*u+p*g+i,e[t+1]=f*h+p*d+c,t+=a,f=s[n.OX2],p=s[n.OY2],e[t]=f*u+p*g+i,e[t+1]=f*h+p*d+c,t+=a,f=s[n.OX3],p=s[n.OY3],e[t]=f*u+p*g+i,e[t+1]=f*h+p*d+c,t+=a,f=s[n.OX4],p=s[n.OY4],e[t]=f*u+p*g+i,e[t+1]=f*h+p*d+c},n.prototype.copy=function(){var r=new n(this.name);return r.region=this.region,r.rendererObject=this.rendererObject,r.path=this.path,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,o.Utils.arrayCopy(this.uvs,0,r.uvs,0,8),o.Utils.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r},n.OX1=0,n.OY1=1,n.OX2=2,n.OY2=3,n.OX3=4,n.OY3=5,n.OX4=6,n.OY4=7,n.X1=0,n.Y1=1,n.C1R=2,n.C1G=3,n.C1B=4,n.C1A=5,n.U1=6,n.V1=7,n.X2=8,n.Y2=9,n.C2R=10,n.C2G=11,n.C2B=12,n.C2A=13,n.U2=14,n.V2=15,n.X3=16,n.Y3=17,n.C3R=18,n.C3G=19,n.C3B=20,n.C3A=21,n.U3=22,n.V3=23,n.X4=24,n.Y4=25,n.C4R=26,n.C4G=27,n.C4B=28,n.C4A=29,n.U4=30,n.V4=31,n}(o.Attachment);o.RegionAttachment=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n,r){this.jitterX=0,this.jitterY=0,this.jitterX=n,this.jitterY=r}return m.prototype.begin=function(n){},m.prototype.transform=function(n,r,e,t){n.x+=o.MathUtils.randomTriangular(-this.jitterX,this.jitterY),n.y+=o.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},m.prototype.end=function(){},m}();o.JitterEffect=L})(spine||(spine={}));var spine;(function(o){var L=function(){function m(n){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=n}return m.prototype.begin=function(n){this.worldX=n.x+this.centerX,this.worldY=n.y+this.centerY},m.prototype.transform=function(n,r,e,t){var a=this.angle*o.MathUtils.degreesToRadians,s=n.x-this.worldX,i=n.y-this.worldY,c=Math.sqrt(s*s+i*i);if(c<this.radius){var u=m.interpolation.apply(0,a,(this.radius-c)/this.radius),g=Math.cos(u),h=Math.sin(u);n.x=g*s-h*i+this.worldX,n.y=h*s+g*i+this.worldY}},m.prototype.end=function(){},m.interpolation=new o.PowOut(2),m}();o.SwirlEffect=L})(spine||(spine={}));var spine;(function(o){var L;(function(m){var n=function(r){__extends(e,r);function e(t){return t===void 0&&(t=""),r.call(this,function(a){return new m.ThreeJsTexture(a)},t)||this}return e}(o.AssetManager);m.AssetManager=n})(L=o.threejs||(o.threejs={}))})(spine||(spine={}));var spine;(function(o){var L;(function(m){var n=function(r){__extends(e,r);function e(t,a){t===void 0&&(t=10920),a===void 0&&(a=function(h){});var s=r.call(this)||this;if(s.verticesLength=0,s.indicesLength=0,t>10920)throw new Error("Can't have more than 10920 triangles per batch: "+t);var i=s.vertices=new Float32Array(t*e.VERTEX_SIZE),c=s.indices=new Uint16Array(t*3),u=new THREE.BufferGeometry,g=s.vertexBuffer=new THREE.InterleavedBuffer(i,e.VERTEX_SIZE);return g.usage=WebGLRenderingContext.DYNAMIC_DRAW,u.setAttribute("position",new THREE.InterleavedBufferAttribute(g,3,0,!1)),u.setAttribute("color",new THREE.InterleavedBufferAttribute(g,4,3,!1)),u.setAttribute("uv",new THREE.InterleavedBufferAttribute(g,2,7,!1)),u.setIndex(new THREE.BufferAttribute(c,1)),u.getIndex().usage=WebGLRenderingContext.DYNAMIC_DRAW,u.drawRange.start=0,u.drawRange.count=0,s.geometry=u,s.material=new m.SkeletonMeshMaterial(a),s}return e.prototype.dispose=function(){if(this.geometry.dispose(),this.material instanceof THREE.Material)this.material.dispose();else if(this.material)for(var t=0;t<this.material.length;t++){var a=this.material[t];a instanceof THREE.Material&&a.dispose()}},e.prototype.clear=function(){var t=this.geometry;t.drawRange.start=0,t.drawRange.count=0,this.material.uniforms.map.value=null},e.prototype.begin=function(){this.verticesLength=0,this.indicesLength=0},e.prototype.canBatch=function(t,a){return!(this.indicesLength+a>=this.indices.byteLength/2||this.verticesLength+t>=this.vertices.byteLength/2)},e.prototype.batch=function(t,a,s,i,c){c===void 0&&(c=0);for(var u=this.verticesLength/e.VERTEX_SIZE,g=this.vertices,h=this.verticesLength,d=0;d<a;)g[h++]=t[d++],g[h++]=t[d++],g[h++]=c,g[h++]=t[d++],g[h++]=t[d++],g[h++]=t[d++],g[h++]=t[d++],g[h++]=t[d++],g[h++]=t[d++];this.verticesLength=h;var f=this.indices;for(h=this.indicesLength,d=0;d<i;h++,d++)f[h]=s[d]+u;this.indicesLength+=i},e.prototype.end=function(){this.vertexBuffer.needsUpdate=this.verticesLength>0,this.vertexBuffer.updateRange.offset=0,this.vertexBuffer.updateRange.count=this.verticesLength;var t=this.geometry;t.getIndex().needsUpdate=this.indicesLength>0,t.getIndex().updateRange.offset=0,t.getIndex().updateRange.count=this.indicesLength,t.drawRange.start=0,t.drawRange.count=this.indicesLength},e.VERTEX_SIZE=9,e}(THREE.Mesh);m.MeshBatcher=n})(L=o.threejs||(o.threejs={}))})(spine||(spine={}));var spine;(function(o){var L;(function(m){var n=function(e){__extends(t,e);function t(a){var s=this,i=`
				attribute vec4 color;
				varying vec2 vUv;
				varying vec4 vColor;
				void main() {
					vUv = uv;
					vColor = color;
					gl_Position = projectionMatrix*modelViewMatrix*vec4(position,1.0);
				}
			`,c=`
				uniform sampler2D map;
				varying vec2 vUv;
				varying vec4 vColor;
				void main(void) {
					gl_FragColor = texture2D(map, vUv)*vColor;
				}
			`,u={uniforms:{map:{type:"t",value:null}},vertexShader:i,fragmentShader:c,side:THREE.DoubleSide,transparent:!0,alphaTest:.5};return a(u),s=e.call(this,u)||this,s}return t}(THREE.ShaderMaterial);m.SkeletonMeshMaterial=n;var r=function(e){__extends(t,e);function t(a,s){s===void 0&&(s=function(u){});var i=e.call(this)||this;i.tempPos=new o.Vector2,i.tempUv=new o.Vector2,i.tempLight=new o.Color,i.tempDark=new o.Color,i.zOffset=.1,i.batches=new Array,i.nextBatchIndex=0,i.clipper=new o.SkeletonClipping,i.vertices=o.Utils.newFloatArray(1024),i.tempColor=new o.Color,i.materialCustomizer=s,i.skeleton=new o.Skeleton(a);var c=new o.AnimationStateData(a);return i.state=new o.AnimationState(c),i}return t.prototype.update=function(a){var s=this.state,i=this.skeleton;s.update(a),s.apply(i),i.updateWorldTransform(),this.updateGeometry()},t.prototype.dispose=function(){for(var a=0;a<this.batches.length;a++)this.batches[a].dispose()},t.prototype.clearBatches=function(){for(var a=0;a<this.batches.length;a++)this.batches[a].clear(),this.batches[a].visible=!1;this.nextBatchIndex=0},t.prototype.nextBatch=function(){if(this.batches.length==this.nextBatchIndex){var a=new m.MeshBatcher(10920,this.materialCustomizer);this.add(a),this.batches.push(a)}var s=this.batches[this.nextBatchIndex++];return s.visible=!0,s},t.prototype.updateGeometry=function(){this.clearBatches();var a=this.tempPos,s=this.tempUv,i=this.tempLight,c=this.tempDark,u=0,g=0,h=0,d=null,f=this.clipper,p=this.vertices,M=null,x=null,P=this.skeleton.drawOrder,C=this.nextBatch();C.begin();for(var I=0,w=this.zOffset,l=0,E=P.length;l<E;l++){var R=f.isClipping()?2:t.VERTEX_SIZE,S=P[l];if(!!S.bone.active){var k=S.getAttachment(),A=null,V=null,N=0;if(k instanceof o.RegionAttachment){var T=k;A=T.color,p=this.vertices,N=R*4,T.computeWorldVertices(S.bone,p,0,R),M=t.QUAD_TRIANGLES,x=T.uvs,V=T.region.renderObject.texture}else if(k instanceof o.MeshAttachment){var v=k;A=v.color,p=this.vertices,N=(v.worldVerticesLength>>1)*R,N>p.length&&(p=this.vertices=o.Utils.newFloatArray(N)),v.computeWorldVertices(S,0,v.worldVerticesLength,p,0,R),M=v.triangles,x=v.uvs,V=v.region.renderObject.texture}else if(k instanceof o.ClippingAttachment){var y=k;f.clipStart(S,y);continue}else continue;if(V!=null){var U=S.bone.skeleton,b=U.color,Y=S.color,D=b.a*Y.a*A.a,O=this.tempColor;O.set(b.r*Y.r*A.r,b.g*Y.g*A.g,b.b*Y.b*A.b,D);var B=void 0,X=void 0,_=void 0,F=void 0;if(f.isClipping()){f.clipTriangles(p,N,M,M.length,x,O,null,!1);var W=f.clippedVertices,G=f.clippedTriangles;if(this.vertexEffect!=null)for(var j=this.vertexEffect,H=W,q=0,K=W.length;q<K;q+=R)a.x=H[q],a.y=H[q+1],i.setFromColor(O),c.set(0,0,0,0),s.x=H[q+6],s.y=H[q+7],j.transform(a,s,i,c),H[q]=a.x,H[q+1]=a.y,H[q+2]=i.r,H[q+3]=i.g,H[q+4]=i.b,H[q+5]=i.a,H[q+6]=s.x,H[q+7]=s.y;B=W,X=W.length,_=G,F=G.length}else{var H=p;if(this.vertexEffect!=null)for(var j=this.vertexEffect,q=0,Z=0,$=N;q<$;q+=R,Z+=2)a.x=H[q],a.y=H[q+1],i.setFromColor(O),c.set(0,0,0,0),s.x=x[Z],s.y=x[Z+1],j.transform(a,s,i,c),H[q]=a.x,H[q+1]=a.y,H[q+2]=i.r,H[q+3]=i.g,H[q+4]=i.b,H[q+5]=i.a,H[q+6]=s.x,H[q+7]=s.y;else for(var q=2,Z=0,Q=N;q<Q;q+=R,Z+=2)H[q]=O.r,H[q+1]=O.g,H[q+2]=O.b,H[q+3]=O.a,H[q+4]=x[Z],H[q+5]=x[Z+1];B=p,X=N,_=M,F=M.length}if(X==0||F==0)continue;C.canBatch(X,F)||(C.end(),C=this.nextBatch(),C.begin());var z=C.material;z.uniforms.map.value==null&&(z.uniforms.map.value=V.texture),z.uniforms.map.value!=V.texture&&(C.end(),C=this.nextBatch(),C.begin(),z=C.material,z.uniforms.map.value=V.texture),z.needsUpdate=!0,C.batch(B,X,_,F,I),I+=w}f.clipEndWithSlot(S)}}f.clipEnd(),C.end()},t.QUAD_TRIANGLES=[0,1,2,2,3,0],t.VERTEX_SIZE=2+2+4,t}(THREE.Object3D);m.SkeletonMesh=r})(L=o.threejs||(o.threejs={}))})(spine||(spine={}));var spine;(function(o){var L;(function(m){var n=function(r){__extends(e,r);function e(t){var a=r.call(this,t)||this;return a.texture=new THREE.Texture(t),a.texture.flipY=!1,a.texture.needsUpdate=!0,a}return e.prototype.setFilters=function(t,a){this.texture.minFilter=e.toThreeJsTextureFilter(t),this.texture.magFilter=e.toThreeJsTextureFilter(a)},e.prototype.setWraps=function(t,a){this.texture.wrapS=e.toThreeJsTextureWrap(t),this.texture.wrapT=e.toThreeJsTextureWrap(a)},e.prototype.dispose=function(){this.texture.dispose()},e.toThreeJsTextureFilter=function(t){if(t===o.TextureFilter.Linear)return THREE.LinearFilter;if(t===o.TextureFilter.MipMap)return THREE.LinearMipMapLinearFilter;if(t===o.TextureFilter.MipMapLinearNearest)return THREE.LinearMipMapNearestFilter;if(t===o.TextureFilter.MipMapNearestLinear)return THREE.NearestMipMapLinearFilter;if(t===o.TextureFilter.MipMapNearestNearest)return THREE.NearestMipMapNearestFilter;if(t===o.TextureFilter.Nearest)return THREE.NearestFilter;throw new Error("Unknown texture filter: "+t)},e.toThreeJsTextureWrap=function(t){if(t===o.TextureWrap.ClampToEdge)return THREE.ClampToEdgeWrapping;if(t===o.TextureWrap.MirroredRepeat)return THREE.MirroredRepeatWrapping;if(t===o.TextureWrap.Repeat)return THREE.RepeatWrapping;throw new Error("Unknown texture wrap: "+t)},e}(o.Texture);m.ThreeJsTexture=n})(L=o.threejs||(o.threejs={}))})(spine||(spine={}));
