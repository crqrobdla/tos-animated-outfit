var __extends=this&&this.__extends||function(){var i=function(L,m){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},i(L,m)};return function(L,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");i(L,m);function n(){this.constructor=L}L.prototype=m===null?Object.create(m):(n.prototype=m.prototype,new n)}}(),spine;(function(i){var L=function(){function w(l,E,C){if(l==null)throw new Error("name cannot be null.");if(E==null)throw new Error("timelines cannot be null.");this.name=l,this.timelines=E,this.timelineIds=[];for(var S=0;S<E.length;S++)this.timelineIds[E[S].getPropertyId()]=!0;this.duration=C}return w.prototype.hasTimeline=function(l){return this.timelineIds[l]==!0},w.prototype.apply=function(l,E,C,S,F,R,V,N){if(l==null)throw new Error("skeleton cannot be null.");S&&this.duration!=0&&(C%=this.duration,E>0&&(E%=this.duration));for(var A=this.timelines,d=0,M=A.length;d<M;d++)A[d].apply(l,E,C,F,R,V,N)},w.binarySearch=function(l,E,C){C===void 0&&(C=1);var S=0,F=l.length/C-2;if(F==0)return C;for(var R=F>>>1;;){if(l[(R+1)*C]<=E?S=R+1:F=R,S==F)return(S+1)*C;R=S+F>>>1}},w.linearSearch=function(l,E,C){for(var S=0,F=l.length-C;S<=F;S+=C)if(l[S]>E)return S;return-1},w}();i.Animation=L;var m;(function(w){w[w.setup=0]="setup",w[w.first=1]="first",w[w.replace=2]="replace",w[w.add=3]="add"})(m=i.MixBlend||(i.MixBlend={}));var n;(function(w){w[w.mixIn=0]="mixIn",w[w.mixOut=1]="mixOut"})(n=i.MixDirection||(i.MixDirection={}));var r;(function(w){w[w.rotate=0]="rotate",w[w.translate=1]="translate",w[w.scale=2]="scale",w[w.shear=3]="shear",w[w.attachment=4]="attachment",w[w.color=5]="color",w[w.deform=6]="deform",w[w.event=7]="event",w[w.drawOrder=8]="drawOrder",w[w.ikConstraint=9]="ikConstraint",w[w.transformConstraint=10]="transformConstraint",w[w.pathConstraintPosition=11]="pathConstraintPosition",w[w.pathConstraintSpacing=12]="pathConstraintSpacing",w[w.pathConstraintMix=13]="pathConstraintMix",w[w.twoColor=14]="twoColor"})(r=i.TimelineType||(i.TimelineType={}));var a=function(){function w(l){if(l<=0)throw new Error("frameCount must be > 0: "+l);this.curves=i.Utils.newFloatArray((l-1)*w.BEZIER_SIZE)}return w.prototype.getFrameCount=function(){return this.curves.length/w.BEZIER_SIZE+1},w.prototype.setLinear=function(l){this.curves[l*w.BEZIER_SIZE]=w.LINEAR},w.prototype.setStepped=function(l){this.curves[l*w.BEZIER_SIZE]=w.STEPPED},w.prototype.getCurveType=function(l){var E=l*w.BEZIER_SIZE;if(E==this.curves.length)return w.LINEAR;var C=this.curves[E];return C==w.LINEAR?w.LINEAR:C==w.STEPPED?w.STEPPED:w.BEZIER},w.prototype.setCurve=function(l,E,C,S,F){var R=(-E*2+S)*.03,V=(-C*2+F)*.03,N=((E-S)*3+1)*.006,A=((C-F)*3+1)*.006,d=R*2+N,M=V*2+A,U=E*.3+R+N*.16666667,b=C*.3+V+A*.16666667,Y=l*w.BEZIER_SIZE,D=this.curves;D[Y++]=w.BEZIER;for(var O=U,B=b,X=Y+w.BEZIER_SIZE-1;Y<X;Y+=2)D[Y]=O,D[Y+1]=B,U+=d,b+=M,d+=N,M+=A,O+=U,B+=b},w.prototype.getCurvePercent=function(l,E){E=i.MathUtils.clamp(E,0,1);var C=this.curves,S=l*w.BEZIER_SIZE,F=C[S];if(F==w.LINEAR)return E;if(F==w.STEPPED)return 0;S++;for(var R=0,V=S,N=S+w.BEZIER_SIZE-1;S<N;S+=2)if(R=C[S],R>=E){var A=void 0,d=void 0;return S==V?(A=0,d=0):(A=C[S-2],d=C[S-1]),d+(C[S+1]-d)*(E-A)/(R-A)}var M=C[S-1];return M+(1-M)*(E-R)/(1-R)},w.LINEAR=0,w.STEPPED=1,w.BEZIER=2,w.BEZIER_SIZE=10*2-1,w}();i.CurveTimeline=a;var t=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E<<1),C}return l.prototype.getPropertyId=function(){return(r.rotate<<24)+this.boneIndex},l.prototype.setFrame=function(E,C,S){E<<=1,this.frames[E]=C,this.frames[E+l.ROTATION]=S},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.bones[this.boneIndex];if(!!d.active){if(S<A[0]){switch(V){case m.setup:d.rotation=d.data.rotation;return;case m.first:var M=d.data.rotation-d.rotation;d.rotation+=(M-(16384-(16384.499999999996-M/360|0))*360)*R}return}if(S>=A[A.length-l.ENTRIES]){var U=A[A.length+l.PREV_ROTATION];switch(V){case m.setup:d.rotation=d.data.rotation+U*R;break;case m.first:case m.replace:U+=d.data.rotation-d.rotation,U-=(16384-(16384.499999999996-U/360|0))*360;case m.add:d.rotation+=U*R}return}var b=L.binarySearch(A,S,l.ENTRIES),Y=A[b+l.PREV_ROTATION],D=A[b],O=this.getCurvePercent((b>>1)-1,1-(S-D)/(A[b+l.PREV_TIME]-D)),B=A[b+l.ROTATION]-Y;switch(B=Y+(B-(16384-(16384.499999999996-B/360|0))*360)*O,V){case m.setup:d.rotation=d.data.rotation+(B-(16384-(16384.499999999996-B/360|0))*360)*R;break;case m.first:case m.replace:B+=d.data.rotation-d.rotation;case m.add:d.rotation+=(B-(16384-(16384.499999999996-B/360|0))*360)*R}}},l.ENTRIES=2,l.PREV_TIME=-2,l.PREV_ROTATION=-1,l.ROTATION=1,l}(a);i.RotateTimeline=t;var e=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E*l.ENTRIES),C}return l.prototype.getPropertyId=function(){return(r.translate<<24)+this.boneIndex},l.prototype.setFrame=function(E,C,S,F){E*=l.ENTRIES,this.frames[E]=C,this.frames[E+l.X]=S,this.frames[E+l.Y]=F},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.bones[this.boneIndex];if(!!d.active){if(S<A[0]){switch(V){case m.setup:d.x=d.data.x,d.y=d.data.y;return;case m.first:d.x+=(d.data.x-d.x)*R,d.y+=(d.data.y-d.y)*R}return}var M=0,U=0;if(S>=A[A.length-l.ENTRIES])M=A[A.length+l.PREV_X],U=A[A.length+l.PREV_Y];else{var b=L.binarySearch(A,S,l.ENTRIES);M=A[b+l.PREV_X],U=A[b+l.PREV_Y];var Y=A[b],D=this.getCurvePercent(b/l.ENTRIES-1,1-(S-Y)/(A[b+l.PREV_TIME]-Y));M+=(A[b+l.X]-M)*D,U+=(A[b+l.Y]-U)*D}switch(V){case m.setup:d.x=d.data.x+M*R,d.y=d.data.y+U*R;break;case m.first:case m.replace:d.x+=(d.data.x+M-d.x)*R,d.y+=(d.data.y+U-d.y)*R;break;case m.add:d.x+=M*R,d.y+=U*R}}},l.ENTRIES=3,l.PREV_TIME=-3,l.PREV_X=-2,l.PREV_Y=-1,l.X=1,l.Y=2,l}(a);i.TranslateTimeline=e;var s=function(w){__extends(l,w);function l(E){return w.call(this,E)||this}return l.prototype.getPropertyId=function(){return(r.scale<<24)+this.boneIndex},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.bones[this.boneIndex];if(!!d.active){if(S<A[0]){switch(V){case m.setup:d.scaleX=d.data.scaleX,d.scaleY=d.data.scaleY;return;case m.first:d.scaleX+=(d.data.scaleX-d.scaleX)*R,d.scaleY+=(d.data.scaleY-d.scaleY)*R}return}var M=0,U=0;if(S>=A[A.length-l.ENTRIES])M=A[A.length+l.PREV_X]*d.data.scaleX,U=A[A.length+l.PREV_Y]*d.data.scaleY;else{var b=L.binarySearch(A,S,l.ENTRIES);M=A[b+l.PREV_X],U=A[b+l.PREV_Y];var Y=A[b],D=this.getCurvePercent(b/l.ENTRIES-1,1-(S-Y)/(A[b+l.PREV_TIME]-Y));M=(M+(A[b+l.X]-M)*D)*d.data.scaleX,U=(U+(A[b+l.Y]-U)*D)*d.data.scaleY}if(R==1)V==m.add?(d.scaleX+=M-d.data.scaleX,d.scaleY+=U-d.data.scaleY):(d.scaleX=M,d.scaleY=U);else{var O=0,B=0;if(N==n.mixOut)switch(V){case m.setup:O=d.data.scaleX,B=d.data.scaleY,d.scaleX=O+(Math.abs(M)*i.MathUtils.signum(O)-O)*R,d.scaleY=B+(Math.abs(U)*i.MathUtils.signum(B)-B)*R;break;case m.first:case m.replace:O=d.scaleX,B=d.scaleY,d.scaleX=O+(Math.abs(M)*i.MathUtils.signum(O)-O)*R,d.scaleY=B+(Math.abs(U)*i.MathUtils.signum(B)-B)*R;break;case m.add:O=d.scaleX,B=d.scaleY,d.scaleX=O+(Math.abs(M)*i.MathUtils.signum(O)-d.data.scaleX)*R,d.scaleY=B+(Math.abs(U)*i.MathUtils.signum(B)-d.data.scaleY)*R}else switch(V){case m.setup:O=Math.abs(d.data.scaleX)*i.MathUtils.signum(M),B=Math.abs(d.data.scaleY)*i.MathUtils.signum(U),d.scaleX=O+(M-O)*R,d.scaleY=B+(U-B)*R;break;case m.first:case m.replace:O=Math.abs(d.scaleX)*i.MathUtils.signum(M),B=Math.abs(d.scaleY)*i.MathUtils.signum(U),d.scaleX=O+(M-O)*R,d.scaleY=B+(U-B)*R;break;case m.add:O=i.MathUtils.signum(M),B=i.MathUtils.signum(U),d.scaleX=Math.abs(d.scaleX)*O+(M-Math.abs(d.data.scaleX)*O)*R,d.scaleY=Math.abs(d.scaleY)*B+(U-Math.abs(d.data.scaleY)*B)*R}}}},l}(e);i.ScaleTimeline=s;var o=function(w){__extends(l,w);function l(E){return w.call(this,E)||this}return l.prototype.getPropertyId=function(){return(r.shear<<24)+this.boneIndex},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.bones[this.boneIndex];if(!!d.active){if(S<A[0]){switch(V){case m.setup:d.shearX=d.data.shearX,d.shearY=d.data.shearY;return;case m.first:d.shearX+=(d.data.shearX-d.shearX)*R,d.shearY+=(d.data.shearY-d.shearY)*R}return}var M=0,U=0;if(S>=A[A.length-l.ENTRIES])M=A[A.length+l.PREV_X],U=A[A.length+l.PREV_Y];else{var b=L.binarySearch(A,S,l.ENTRIES);M=A[b+l.PREV_X],U=A[b+l.PREV_Y];var Y=A[b],D=this.getCurvePercent(b/l.ENTRIES-1,1-(S-Y)/(A[b+l.PREV_TIME]-Y));M=M+(A[b+l.X]-M)*D,U=U+(A[b+l.Y]-U)*D}switch(V){case m.setup:d.shearX=d.data.shearX+M*R,d.shearY=d.data.shearY+U*R;break;case m.first:case m.replace:d.shearX+=(d.data.shearX+M-d.shearX)*R,d.shearY+=(d.data.shearY+U-d.shearY)*R;break;case m.add:d.shearX+=M*R,d.shearY+=U*R}}},l}(e);i.ShearTimeline=o;var v=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E*l.ENTRIES),C}return l.prototype.getPropertyId=function(){return(r.color<<24)+this.slotIndex},l.prototype.setFrame=function(E,C,S,F,R,V){E*=l.ENTRIES,this.frames[E]=C,this.frames[E+l.R]=S,this.frames[E+l.G]=F,this.frames[E+l.B]=R,this.frames[E+l.A]=V},l.prototype.apply=function(E,C,S,F,R,V,N){var A=E.slots[this.slotIndex];if(!!A.bone.active){var d=this.frames;if(S<d[0]){switch(V){case m.setup:A.color.setFromColor(A.data.color);return;case m.first:var M=A.color,U=A.data.color;M.add((U.r-M.r)*R,(U.g-M.g)*R,(U.b-M.b)*R,(U.a-M.a)*R)}return}var b=0,Y=0,D=0,O=0;if(S>=d[d.length-l.ENTRIES]){var B=d.length;b=d[B+l.PREV_R],Y=d[B+l.PREV_G],D=d[B+l.PREV_B],O=d[B+l.PREV_A]}else{var X=L.binarySearch(d,S,l.ENTRIES);b=d[X+l.PREV_R],Y=d[X+l.PREV_G],D=d[X+l.PREV_B],O=d[X+l.PREV_A];var W=d[X],k=this.getCurvePercent(X/l.ENTRIES-1,1-(S-W)/(d[X+l.PREV_TIME]-W));b+=(d[X+l.R]-b)*k,Y+=(d[X+l.G]-Y)*k,D+=(d[X+l.B]-D)*k,O+=(d[X+l.A]-O)*k}if(R==1)A.color.set(b,Y,D,O);else{var M=A.color;V==m.setup&&M.setFromColor(A.data.color),M.add((b-M.r)*R,(Y-M.g)*R,(D-M.b)*R,(O-M.a)*R)}}},l.ENTRIES=5,l.PREV_TIME=-5,l.PREV_R=-4,l.PREV_G=-3,l.PREV_B=-2,l.PREV_A=-1,l.R=1,l.G=2,l.B=3,l.A=4,l}(a);i.ColorTimeline=v;var f=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E*l.ENTRIES),C}return l.prototype.getPropertyId=function(){return(r.twoColor<<24)+this.slotIndex},l.prototype.setFrame=function(E,C,S,F,R,V,N,A,d){E*=l.ENTRIES,this.frames[E]=C,this.frames[E+l.R]=S,this.frames[E+l.G]=F,this.frames[E+l.B]=R,this.frames[E+l.A]=V,this.frames[E+l.R2]=N,this.frames[E+l.G2]=A,this.frames[E+l.B2]=d},l.prototype.apply=function(E,C,S,F,R,V,N){var A=E.slots[this.slotIndex];if(!!A.bone.active){var d=this.frames;if(S<d[0]){switch(V){case m.setup:A.color.setFromColor(A.data.color),A.darkColor.setFromColor(A.data.darkColor);return;case m.first:var M=A.color,U=A.darkColor,b=A.data.color,Y=A.data.darkColor;M.add((b.r-M.r)*R,(b.g-M.g)*R,(b.b-M.b)*R,(b.a-M.a)*R),U.add((Y.r-U.r)*R,(Y.g-U.g)*R,(Y.b-U.b)*R,0)}return}var D=0,O=0,B=0,X=0,W=0,k=0,_=0;if(S>=d[d.length-l.ENTRIES]){var q=d.length;D=d[q+l.PREV_R],O=d[q+l.PREV_G],B=d[q+l.PREV_B],X=d[q+l.PREV_A],W=d[q+l.PREV_R2],k=d[q+l.PREV_G2],_=d[q+l.PREV_B2]}else{var H=L.binarySearch(d,S,l.ENTRIES);D=d[H+l.PREV_R],O=d[H+l.PREV_G],B=d[H+l.PREV_B],X=d[H+l.PREV_A],W=d[H+l.PREV_R2],k=d[H+l.PREV_G2],_=d[H+l.PREV_B2];var j=d[H],Z=this.getCurvePercent(H/l.ENTRIES-1,1-(S-j)/(d[H+l.PREV_TIME]-j));D+=(d[H+l.R]-D)*Z,O+=(d[H+l.G]-O)*Z,B+=(d[H+l.B]-B)*Z,X+=(d[H+l.A]-X)*Z,W+=(d[H+l.R2]-W)*Z,k+=(d[H+l.G2]-k)*Z,_+=(d[H+l.B2]-_)*Z}if(R==1)A.color.set(D,O,B,X),A.darkColor.set(W,k,_,1);else{var M=A.color,U=A.darkColor;V==m.setup&&(M.setFromColor(A.data.color),U.setFromColor(A.data.darkColor)),M.add((D-M.r)*R,(O-M.g)*R,(B-M.b)*R,(X-M.a)*R),U.add((W-U.r)*R,(k-U.g)*R,(_-U.b)*R,0)}}},l.ENTRIES=8,l.PREV_TIME=-8,l.PREV_R=-7,l.PREV_G=-6,l.PREV_B=-5,l.PREV_A=-4,l.PREV_R2=-3,l.PREV_G2=-2,l.PREV_B2=-1,l.R=1,l.G=2,l.B=3,l.A=4,l.R2=5,l.G2=6,l.B2=7,l}(a);i.TwoColorTimeline=f;var g=function(){function w(l){this.frames=i.Utils.newFloatArray(l),this.attachmentNames=new Array(l)}return w.prototype.getPropertyId=function(){return(r.attachment<<24)+this.slotIndex},w.prototype.getFrameCount=function(){return this.frames.length},w.prototype.setFrame=function(l,E,C){this.frames[l]=E,this.attachmentNames[l]=C},w.prototype.apply=function(l,E,C,S,F,R,V){var N=l.slots[this.slotIndex];if(!!N.bone.active){if(V==n.mixOut){R==m.setup&&this.setAttachment(l,N,N.data.attachmentName);return}var A=this.frames;if(C<A[0]){(R==m.setup||R==m.first)&&this.setAttachment(l,N,N.data.attachmentName);return}var d=0;C>=A[A.length-1]?d=A.length-1:d=L.binarySearch(A,C,1)-1;var M=this.attachmentNames[d];l.slots[this.slotIndex].setAttachment(M==null?null:l.getAttachment(this.slotIndex,M))}},w.prototype.setAttachment=function(l,E,C){E.attachment=C==null?null:l.getAttachment(this.slotIndex,C)},w}();i.AttachmentTimeline=g;var h=null,c=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E),C.frameVertices=new Array(E),h==null&&(h=i.Utils.newFloatArray(64)),C}return l.prototype.getPropertyId=function(){return(r.deform<<27)+ +this.attachment.id+this.slotIndex},l.prototype.setFrame=function(E,C,S){this.frames[E]=C,this.frameVertices[E]=S},l.prototype.apply=function(E,C,S,F,R,V,N){var A=E.slots[this.slotIndex];if(!!A.bone.active){var d=A.getAttachment();if(!(!(d instanceof i.VertexAttachment)||d.deformAttachment!=this.attachment)){var M=A.deform;M.length==0&&(V=m.setup);var U=this.frameVertices,b=U[0].length,Y=this.frames;if(S<Y[0]){var D=d;switch(V){case m.setup:M.length=0;return;case m.first:if(R==1){M.length=0;break}var O=i.Utils.setArraySize(M,b);if(D.bones==null)for(var B=D.vertices,X=0;X<b;X++)O[X]+=(B[X]-O[X])*R;else{R=1-R;for(var X=0;X<b;X++)O[X]*=R}}return}var W=i.Utils.setArraySize(M,b);if(S>=Y[Y.length-1]){var k=U[Y.length-1];if(R==1)if(V==m.add){var D=d;if(D.bones==null)for(var B=D.vertices,_=0;_<b;_++)W[_]+=k[_]-B[_];else for(var q=0;q<b;q++)W[q]+=k[q]}else i.Utils.arrayCopy(k,0,W,0,b);else switch(V){case m.setup:{var H=d;if(H.bones==null)for(var B=H.vertices,j=0;j<b;j++){var Z=B[j];W[j]=Z+(k[j]-Z)*R}else for(var K=0;K<b;K++)W[K]=k[K]*R;break}case m.first:case m.replace:for(var G=0;G<b;G++)W[G]+=(k[G]-W[G])*R;break;case m.add:var D=d;if(D.bones==null)for(var B=D.vertices,z=0;z<b;z++)W[z]+=(k[z]-B[z])*R;else for(var J=0;J<b;J++)W[J]+=k[J]*R}return}var at=L.binarySearch(Y,S),et=U[at-1],$=U[at],nt=Y[at],tt=this.getCurvePercent(at-1,1-(S-nt)/(Y[at-1]-nt));if(R==1)if(V==m.add){var D=d;if(D.bones==null)for(var B=D.vertices,rt=0;rt<b;rt++){var Q=et[rt];W[rt]+=Q+($[rt]-Q)*tt-B[rt]}else for(var lt=0;lt<b;lt++){var Q=et[lt];W[lt]+=Q+($[lt]-Q)*tt}}else for(var ot=0;ot<b;ot++){var Q=et[ot];W[ot]=Q+($[ot]-Q)*tt}else switch(V){case m.setup:{var ut=d;if(ut.bones==null)for(var B=ut.vertices,st=0;st<b;st++){var Q=et[st],Z=B[st];W[st]=Z+(Q+($[st]-Q)*tt-Z)*R}else for(var ht=0;ht<b;ht++){var Q=et[ht];W[ht]=(Q+($[ht]-Q)*tt)*R}break}case m.first:case m.replace:for(var it=0;it<b;it++){var Q=et[it];W[it]+=(Q+($[it]-Q)*tt-W[it])*R}break;case m.add:var D=d;if(D.bones==null)for(var B=D.vertices,ft=0;ft<b;ft++){var Q=et[ft];W[ft]+=(Q+($[ft]-Q)*tt-B[ft])*R}else for(var ct=0;ct<b;ct++){var Q=et[ct];W[ct]+=(Q+($[ct]-Q)*tt)*R}}}}},l}(a);i.DeformTimeline=c;var u=function(){function w(l){this.frames=i.Utils.newFloatArray(l),this.events=new Array(l)}return w.prototype.getPropertyId=function(){return r.event<<24},w.prototype.getFrameCount=function(){return this.frames.length},w.prototype.setFrame=function(l,E){this.frames[l]=E.time,this.events[l]=E},w.prototype.apply=function(l,E,C,S,F,R,V){if(S!=null){var N=this.frames,A=this.frames.length;if(E>C)this.apply(l,E,Number.MAX_VALUE,S,F,R,V),E=-1;else if(E>=N[A-1])return;if(!(C<N[0])){var d=0;if(E<N[0])d=0;else{d=L.binarySearch(N,E);for(var M=N[d];d>0&&N[d-1]==M;)d--}for(;d<A&&C>=N[d];d++)S.push(this.events[d])}}},w}();i.EventTimeline=u;var y=function(){function w(l){this.frames=i.Utils.newFloatArray(l),this.drawOrders=new Array(l)}return w.prototype.getPropertyId=function(){return r.drawOrder<<24},w.prototype.getFrameCount=function(){return this.frames.length},w.prototype.setFrame=function(l,E,C){this.frames[l]=E,this.drawOrders[l]=C},w.prototype.apply=function(l,E,C,S,F,R,V){var N=l.drawOrder,A=l.slots;if(V==n.mixOut){R==m.setup&&i.Utils.arrayCopy(l.slots,0,l.drawOrder,0,l.slots.length);return}var d=this.frames;if(C<d[0]){(R==m.setup||R==m.first)&&i.Utils.arrayCopy(l.slots,0,l.drawOrder,0,l.slots.length);return}var M=0;C>=d[d.length-1]?M=d.length-1:M=L.binarySearch(d,C)-1;var U=this.drawOrders[M];if(U==null)i.Utils.arrayCopy(A,0,N,0,A.length);else for(var b=0,Y=U.length;b<Y;b++)N[b]=A[U[b]]},w}();i.DrawOrderTimeline=y;var p=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E*l.ENTRIES),C}return l.prototype.getPropertyId=function(){return(r.ikConstraint<<24)+this.ikConstraintIndex},l.prototype.setFrame=function(E,C,S,F,R,V,N){E*=l.ENTRIES,this.frames[E]=C,this.frames[E+l.MIX]=S,this.frames[E+l.SOFTNESS]=F,this.frames[E+l.BEND_DIRECTION]=R,this.frames[E+l.COMPRESS]=V?1:0,this.frames[E+l.STRETCH]=N?1:0},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.ikConstraints[this.ikConstraintIndex];if(!!d.active){if(S<A[0]){switch(V){case m.setup:d.mix=d.data.mix,d.softness=d.data.softness,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch;return;case m.first:d.mix+=(d.data.mix-d.mix)*R,d.softness+=(d.data.softness-d.softness)*R,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch}return}if(S>=A[A.length-l.ENTRIES]){V==m.setup?(d.mix=d.data.mix+(A[A.length+l.PREV_MIX]-d.data.mix)*R,d.softness=d.data.softness+(A[A.length+l.PREV_SOFTNESS]-d.data.softness)*R,N==n.mixOut?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=A[A.length+l.PREV_BEND_DIRECTION],d.compress=A[A.length+l.PREV_COMPRESS]!=0,d.stretch=A[A.length+l.PREV_STRETCH]!=0)):(d.mix+=(A[A.length+l.PREV_MIX]-d.mix)*R,d.softness+=(A[A.length+l.PREV_SOFTNESS]-d.softness)*R,N==n.mixIn&&(d.bendDirection=A[A.length+l.PREV_BEND_DIRECTION],d.compress=A[A.length+l.PREV_COMPRESS]!=0,d.stretch=A[A.length+l.PREV_STRETCH]!=0));return}var M=L.binarySearch(A,S,l.ENTRIES),U=A[M+l.PREV_MIX],b=A[M+l.PREV_SOFTNESS],Y=A[M],D=this.getCurvePercent(M/l.ENTRIES-1,1-(S-Y)/(A[M+l.PREV_TIME]-Y));V==m.setup?(d.mix=d.data.mix+(U+(A[M+l.MIX]-U)*D-d.data.mix)*R,d.softness=d.data.softness+(b+(A[M+l.SOFTNESS]-b)*D-d.data.softness)*R,N==n.mixOut?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=A[M+l.PREV_BEND_DIRECTION],d.compress=A[M+l.PREV_COMPRESS]!=0,d.stretch=A[M+l.PREV_STRETCH]!=0)):(d.mix+=(U+(A[M+l.MIX]-U)*D-d.mix)*R,d.softness+=(b+(A[M+l.SOFTNESS]-b)*D-d.softness)*R,N==n.mixIn&&(d.bendDirection=A[M+l.PREV_BEND_DIRECTION],d.compress=A[M+l.PREV_COMPRESS]!=0,d.stretch=A[M+l.PREV_STRETCH]!=0))}},l.ENTRIES=6,l.PREV_TIME=-6,l.PREV_MIX=-5,l.PREV_SOFTNESS=-4,l.PREV_BEND_DIRECTION=-3,l.PREV_COMPRESS=-2,l.PREV_STRETCH=-1,l.MIX=1,l.SOFTNESS=2,l.BEND_DIRECTION=3,l.COMPRESS=4,l.STRETCH=5,l}(a);i.IkConstraintTimeline=p;var T=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E*l.ENTRIES),C}return l.prototype.getPropertyId=function(){return(r.transformConstraint<<24)+this.transformConstraintIndex},l.prototype.setFrame=function(E,C,S,F,R,V){E*=l.ENTRIES,this.frames[E]=C,this.frames[E+l.ROTATE]=S,this.frames[E+l.TRANSLATE]=F,this.frames[E+l.SCALE]=R,this.frames[E+l.SHEAR]=V},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.transformConstraints[this.transformConstraintIndex];if(!!d.active){if(S<A[0]){var M=d.data;switch(V){case m.setup:d.rotateMix=M.rotateMix,d.translateMix=M.translateMix,d.scaleMix=M.scaleMix,d.shearMix=M.shearMix;return;case m.first:d.rotateMix+=(M.rotateMix-d.rotateMix)*R,d.translateMix+=(M.translateMix-d.translateMix)*R,d.scaleMix+=(M.scaleMix-d.scaleMix)*R,d.shearMix+=(M.shearMix-d.shearMix)*R}return}var U=0,b=0,Y=0,D=0;if(S>=A[A.length-l.ENTRIES]){var O=A.length;U=A[O+l.PREV_ROTATE],b=A[O+l.PREV_TRANSLATE],Y=A[O+l.PREV_SCALE],D=A[O+l.PREV_SHEAR]}else{var B=L.binarySearch(A,S,l.ENTRIES);U=A[B+l.PREV_ROTATE],b=A[B+l.PREV_TRANSLATE],Y=A[B+l.PREV_SCALE],D=A[B+l.PREV_SHEAR];var X=A[B],W=this.getCurvePercent(B/l.ENTRIES-1,1-(S-X)/(A[B+l.PREV_TIME]-X));U+=(A[B+l.ROTATE]-U)*W,b+=(A[B+l.TRANSLATE]-b)*W,Y+=(A[B+l.SCALE]-Y)*W,D+=(A[B+l.SHEAR]-D)*W}if(V==m.setup){var M=d.data;d.rotateMix=M.rotateMix+(U-M.rotateMix)*R,d.translateMix=M.translateMix+(b-M.translateMix)*R,d.scaleMix=M.scaleMix+(Y-M.scaleMix)*R,d.shearMix=M.shearMix+(D-M.shearMix)*R}else d.rotateMix+=(U-d.rotateMix)*R,d.translateMix+=(b-d.translateMix)*R,d.scaleMix+=(Y-d.scaleMix)*R,d.shearMix+=(D-d.shearMix)*R}},l.ENTRIES=5,l.PREV_TIME=-5,l.PREV_ROTATE=-4,l.PREV_TRANSLATE=-3,l.PREV_SCALE=-2,l.PREV_SHEAR=-1,l.ROTATE=1,l.TRANSLATE=2,l.SCALE=3,l.SHEAR=4,l}(a);i.TransformConstraintTimeline=T;var P=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E*l.ENTRIES),C}return l.prototype.getPropertyId=function(){return(r.pathConstraintPosition<<24)+this.pathConstraintIndex},l.prototype.setFrame=function(E,C,S){E*=l.ENTRIES,this.frames[E]=C,this.frames[E+l.VALUE]=S},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.pathConstraints[this.pathConstraintIndex];if(!!d.active){if(S<A[0]){switch(V){case m.setup:d.position=d.data.position;return;case m.first:d.position+=(d.data.position-d.position)*R}return}var M=0;if(S>=A[A.length-l.ENTRIES])M=A[A.length+l.PREV_VALUE];else{var U=L.binarySearch(A,S,l.ENTRIES);M=A[U+l.PREV_VALUE];var b=A[U],Y=this.getCurvePercent(U/l.ENTRIES-1,1-(S-b)/(A[U+l.PREV_TIME]-b));M+=(A[U+l.VALUE]-M)*Y}V==m.setup?d.position=d.data.position+(M-d.data.position)*R:d.position+=(M-d.position)*R}},l.ENTRIES=2,l.PREV_TIME=-2,l.PREV_VALUE=-1,l.VALUE=1,l}(a);i.PathConstraintPositionTimeline=P;var x=function(w){__extends(l,w);function l(E){return w.call(this,E)||this}return l.prototype.getPropertyId=function(){return(r.pathConstraintSpacing<<24)+this.pathConstraintIndex},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.pathConstraints[this.pathConstraintIndex];if(!!d.active){if(S<A[0]){switch(V){case m.setup:d.spacing=d.data.spacing;return;case m.first:d.spacing+=(d.data.spacing-d.spacing)*R}return}var M=0;if(S>=A[A.length-l.ENTRIES])M=A[A.length+l.PREV_VALUE];else{var U=L.binarySearch(A,S,l.ENTRIES);M=A[U+l.PREV_VALUE];var b=A[U],Y=this.getCurvePercent(U/l.ENTRIES-1,1-(S-b)/(A[U+l.PREV_TIME]-b));M+=(A[U+l.VALUE]-M)*Y}V==m.setup?d.spacing=d.data.spacing+(M-d.data.spacing)*R:d.spacing+=(M-d.spacing)*R}},l}(P);i.PathConstraintSpacingTimeline=x;var I=function(w){__extends(l,w);function l(E){var C=w.call(this,E)||this;return C.frames=i.Utils.newFloatArray(E*l.ENTRIES),C}return l.prototype.getPropertyId=function(){return(r.pathConstraintMix<<24)+this.pathConstraintIndex},l.prototype.setFrame=function(E,C,S,F){E*=l.ENTRIES,this.frames[E]=C,this.frames[E+l.ROTATE]=S,this.frames[E+l.TRANSLATE]=F},l.prototype.apply=function(E,C,S,F,R,V,N){var A=this.frames,d=E.pathConstraints[this.pathConstraintIndex];if(!!d.active){if(S<A[0]){switch(V){case m.setup:d.rotateMix=d.data.rotateMix,d.translateMix=d.data.translateMix;return;case m.first:d.rotateMix+=(d.data.rotateMix-d.rotateMix)*R,d.translateMix+=(d.data.translateMix-d.translateMix)*R}return}var M=0,U=0;if(S>=A[A.length-l.ENTRIES])M=A[A.length+l.PREV_ROTATE],U=A[A.length+l.PREV_TRANSLATE];else{var b=L.binarySearch(A,S,l.ENTRIES);M=A[b+l.PREV_ROTATE],U=A[b+l.PREV_TRANSLATE];var Y=A[b],D=this.getCurvePercent(b/l.ENTRIES-1,1-(S-Y)/(A[b+l.PREV_TIME]-Y));M+=(A[b+l.ROTATE]-M)*D,U+=(A[b+l.TRANSLATE]-U)*D}V==m.setup?(d.rotateMix=d.data.rotateMix+(M-d.data.rotateMix)*R,d.translateMix=d.data.translateMix+(U-d.data.translateMix)*R):(d.rotateMix+=(M-d.rotateMix)*R,d.translateMix+=(U-d.translateMix)*R)}},l.ENTRIES=3,l.PREV_TIME=-3,l.PREV_ROTATE=-2,l.PREV_TRANSLATE=-1,l.ROTATE=1,l.TRANSLATE=2,l}(a);i.PathConstraintMixTimeline=I})(spine||(spine={}));var spine;(function(i){var L=function(){function t(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new i.IntSet,this.animationsChanged=!1,this.trackEntryPool=new i.Pool(function(){return new m}),this.data=e}return t.prototype.update=function(e){e*=this.timeScale;for(var s=this.tracks,o=0,v=s.length;o<v;o++){var f=s[o];if(f!=null){f.animationLast=f.nextAnimationLast,f.trackLast=f.nextTrackLast;var g=e*f.timeScale;if(f.delay>0){if(f.delay-=g,f.delay>0)continue;g=-f.delay,f.delay=0}var h=f.next;if(h!=null){var c=f.trackLast-h.delay;if(c>=0){for(h.delay=0,h.trackTime+=f.timeScale==0?0:(c/f.timeScale+e)*h.timeScale,f.trackTime+=g,this.setCurrent(o,h,!0);h.mixingFrom!=null;)h.mixTime+=e,h=h.mixingFrom;continue}}else if(f.trackLast>=f.trackEnd&&f.mixingFrom==null){s[o]=null,this.queue.end(f),this.disposeNext(f);continue}if(f.mixingFrom!=null&&this.updateMixingFrom(f,e)){var u=f.mixingFrom;for(f.mixingFrom=null,u!=null&&(u.mixingTo=null);u!=null;)this.queue.end(u),u=u.mixingFrom}f.trackTime+=g}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,s){var o=e.mixingFrom;if(o==null)return!0;var v=this.updateMixingFrom(o,s);return o.animationLast=o.nextAnimationLast,o.trackLast=o.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((o.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=o.mixingFrom,o.mixingFrom!=null&&(o.mixingFrom.mixingTo=e),e.interruptAlpha=o.interruptAlpha,this.queue.end(o)),v):(o.trackTime+=s*o.timeScale,e.mixTime+=s,!1)},t.prototype.apply=function(e){if(e==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var s=this.events,o=this.tracks,v=!1,f=0,g=o.length;f<g;f++){var h=o[f];if(!(h==null||h.delay>0)){v=!0;var c=f==0?i.MixBlend.first:h.mixBlend,u=h.alpha;h.mixingFrom!=null?u*=this.applyMixingFrom(h,e,c):h.trackTime>=h.trackEnd&&h.next==null&&(u=0);var y=h.animationLast,p=h.getAnimationTime(),T=h.animation.timelines.length,P=h.animation.timelines;if(f==0&&u==1||c==i.MixBlend.add)for(var x=0;x<T;x++){i.Utils.webkit602BugfixHelper(u,c);var I=P[x];I instanceof i.AttachmentTimeline?this.applyAttachmentTimeline(I,e,p,c,!0):I.apply(e,y,p,s,u,c,i.MixDirection.mixIn)}else{var w=h.timelineMode,l=h.timelinesRotation.length==0;l&&i.Utils.setArraySize(h.timelinesRotation,T<<1,null);for(var E=h.timelinesRotation,x=0;x<T;x++){var C=P[x],S=w[x]==t.SUBSEQUENT?c:i.MixBlend.setup;C instanceof i.RotateTimeline?this.applyRotateTimeline(C,e,p,u,S,E,x<<1,l):C instanceof i.AttachmentTimeline?this.applyAttachmentTimeline(C,e,p,c,!0):(i.Utils.webkit602BugfixHelper(u,c),C.apply(e,y,p,s,u,S,i.MixDirection.mixIn))}}this.queueEvents(h,p),s.length=0,h.nextAnimationLast=p,h.nextTrackLast=h.trackTime}}for(var F=this.unkeyedState+t.SETUP,R=e.slots,V=0,N=e.slots.length;V<N;V++){var A=R[V];if(A.attachmentState==F){var d=A.data.attachmentName;A.attachment=d==null?null:e.getAttachment(A.data.index,d)}}return this.unkeyedState+=2,this.queue.drain(),v},t.prototype.applyMixingFrom=function(e,s,o){var v=e.mixingFrom;v.mixingFrom!=null&&this.applyMixingFrom(v,s,o);var f=0;e.mixDuration==0?(f=1,o==i.MixBlend.first&&(o=i.MixBlend.setup)):(f=e.mixTime/e.mixDuration,f>1&&(f=1),o!=i.MixBlend.first&&(o=v.mixBlend));var g=f<v.eventThreshold?this.events:null,h=f<v.attachmentThreshold,c=f<v.drawOrderThreshold,u=v.animationLast,y=v.getAnimationTime(),p=v.animation.timelines.length,T=v.animation.timelines,P=v.alpha*e.interruptAlpha,x=P*(1-f);if(o==i.MixBlend.add)for(var I=0;I<p;I++)T[I].apply(s,u,y,g,x,o,i.MixDirection.mixOut);else{var w=v.timelineMode,l=v.timelineHoldMix,E=v.timelinesRotation.length==0;E&&i.Utils.setArraySize(v.timelinesRotation,p<<1,null);var C=v.timelinesRotation;v.totalAlpha=0;for(var I=0;I<p;I++){var S=T[I],F=i.MixDirection.mixOut,R=void 0,V=0;switch(w[I]){case t.SUBSEQUENT:if(!c&&S instanceof i.DrawOrderTimeline)continue;R=o,V=x;break;case t.FIRST:R=i.MixBlend.setup,V=x;break;case t.HOLD_SUBSEQUENT:R=o,V=P;break;case t.HOLD_FIRST:R=i.MixBlend.setup,V=P;break;default:R=i.MixBlend.setup;var N=l[I];V=P*Math.max(0,1-N.mixTime/N.mixDuration);break}v.totalAlpha+=V,S instanceof i.RotateTimeline?this.applyRotateTimeline(S,s,y,V,R,C,I<<1,E):S instanceof i.AttachmentTimeline?this.applyAttachmentTimeline(S,s,y,R,h):(i.Utils.webkit602BugfixHelper(V,o),c&&S instanceof i.DrawOrderTimeline&&R==i.MixBlend.setup&&(F=i.MixDirection.mixIn),S.apply(s,u,y,g,V,R,F))}}return e.mixDuration>0&&this.queueEvents(v,y),this.events.length=0,v.nextAnimationLast=y,v.nextTrackLast=v.trackTime,f},t.prototype.applyAttachmentTimeline=function(e,s,o,v,f){var g=s.slots[e.slotIndex];if(!!g.bone.active){var h=e.frames;if(o<h[0])(v==i.MixBlend.setup||v==i.MixBlend.first)&&this.setAttachment(s,g,g.data.attachmentName,f);else{var c;o>=h[h.length-1]?c=h.length-1:c=i.Animation.binarySearch(h,o)-1,this.setAttachment(s,g,e.attachmentNames[c],f)}g.attachmentState<=this.unkeyedState&&(g.attachmentState=this.unkeyedState+t.SETUP)}},t.prototype.setAttachment=function(e,s,o,v){s.setAttachment(o==null?null:e.getAttachment(s.data.index,o)),v&&(s.attachmentState=this.unkeyedState+t.CURRENT)},t.prototype.applyRotateTimeline=function(e,s,o,v,f,g,h,c){if(c&&(g[h]=0),v==1){e.apply(s,0,o,null,1,f,i.MixDirection.mixIn);return}var u=e,y=u.frames,p=s.bones[u.boneIndex];if(!!p.active){var T=0,P=0;if(o<y[0])switch(f){case i.MixBlend.setup:p.rotation=p.data.rotation;default:return;case i.MixBlend.first:T=p.rotation,P=p.data.rotation}else if(T=f==i.MixBlend.setup?p.data.rotation:p.rotation,o>=y[y.length-i.RotateTimeline.ENTRIES])P=p.data.rotation+y[y.length+i.RotateTimeline.PREV_ROTATION];else{var x=i.Animation.binarySearch(y,o,i.RotateTimeline.ENTRIES),I=y[x+i.RotateTimeline.PREV_ROTATION],w=y[x],l=u.getCurvePercent((x>>1)-1,1-(o-w)/(y[x+i.RotateTimeline.PREV_TIME]-w));P=y[x+i.RotateTimeline.ROTATION]-I,P-=(16384-(16384.499999999996-P/360|0))*360,P=I+P*l+p.data.rotation,P-=(16384-(16384.499999999996-P/360|0))*360}var E=0,C=P-T;if(C-=(16384-(16384.499999999996-C/360|0))*360,C==0)E=g[h];else{var S=0,F=0;c?(S=0,F=C):(S=g[h],F=g[h+1]);var R=C>0,V=S>=0;i.MathUtils.signum(F)!=i.MathUtils.signum(C)&&Math.abs(F)<=90&&(Math.abs(S)>180&&(S+=360*i.MathUtils.signum(S)),V=R),E=C+S-S%360,V!=R&&(E+=360*i.MathUtils.signum(S)),g[h]=E}g[h+1]=C,T+=E*v,p.rotation=T-(16384-(16384.499999999996-T/360|0))*360}},t.prototype.queueEvents=function(e,s){for(var o=e.animationStart,v=e.animationEnd,f=v-o,g=e.trackLast%f,h=this.events,c=0,u=h.length;c<u;c++){var y=h[c];if(y.time<g)break;y.time>v||this.queue.event(e,y)}var p=!1;for(e.loop?p=f==0||g>e.trackTime%f:p=s>=v&&e.animationLast<v,p&&this.queue.complete(e);c<u;c++){var T=h[c];T.time<o||this.queue.event(e,h[c])}},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var s=0,o=this.tracks.length;s<o;s++)this.clearTrack(s);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var s=this.tracks[e];if(s!=null){this.queue.end(s),this.disposeNext(s);for(var o=s;;){var v=o.mixingFrom;if(v==null)break;this.queue.end(v),o.mixingFrom=null,o.mixingTo=null,o=v}this.tracks[s.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,s,o){var v=this.expandToIndex(e);this.tracks[e]=s,v!=null&&(o&&this.queue.interrupt(v),s.mixingFrom=v,v.mixingTo=s,s.mixTime=0,v.mixingFrom!=null&&v.mixDuration>0&&(s.interruptAlpha*=Math.min(1,v.mixTime/v.mixDuration)),v.timelinesRotation.length=0),this.queue.start(s)},t.prototype.setAnimation=function(e,s,o){var v=this.data.skeletonData.findAnimation(s);if(v==null)throw new Error("Animation not found: "+s);return this.setAnimationWith(e,v,o)},t.prototype.setAnimationWith=function(e,s,o){if(s==null)throw new Error("animation cannot be null.");var v=!0,f=this.expandToIndex(e);f!=null&&(f.nextTrackLast==-1?(this.tracks[e]=f.mixingFrom,this.queue.interrupt(f),this.queue.end(f),this.disposeNext(f),f=f.mixingFrom,v=!1):this.disposeNext(f));var g=this.trackEntry(e,s,o,f);return this.setCurrent(e,g,v),this.queue.drain(),g},t.prototype.addAnimation=function(e,s,o,v){var f=this.data.skeletonData.findAnimation(s);if(f==null)throw new Error("Animation not found: "+s);return this.addAnimationWith(e,f,o,v)},t.prototype.addAnimationWith=function(e,s,o,v){if(s==null)throw new Error("animation cannot be null.");var f=this.expandToIndex(e);if(f!=null)for(;f.next!=null;)f=f.next;var g=this.trackEntry(e,s,o,f);if(f==null)this.setCurrent(e,g,!0),this.queue.drain();else if(f.next=g,v<=0){var h=f.animationEnd-f.animationStart;h!=0?(f.loop?v+=h*(1+(f.trackTime/h|0)):v+=Math.max(h,f.trackTime),v-=this.data.getMix(f.animation,s)):v=f.trackTime}return g.delay=v,g},t.prototype.setEmptyAnimation=function(e,s){var o=this.setAnimationWith(e,t.emptyAnimation,!1);return o.mixDuration=s,o.trackEnd=s,o},t.prototype.addEmptyAnimation=function(e,s,o){o<=0&&(o-=s);var v=this.addAnimationWith(e,t.emptyAnimation,!1,o);return v.mixDuration=s,v.trackEnd=s,v},t.prototype.setEmptyAnimations=function(e){var s=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var o=0,v=this.tracks.length;o<v;o++){var f=this.tracks[o];f!=null&&this.setEmptyAnimation(f.trackIndex,e)}this.queue.drainDisabled=s,this.queue.drain()},t.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(i.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},t.prototype.trackEntry=function(e,s,o,v){var f=this.trackEntryPool.obtain();return f.trackIndex=e,f.animation=s,f.loop=o,f.holdPrevious=!1,f.eventThreshold=0,f.attachmentThreshold=0,f.drawOrderThreshold=0,f.animationStart=0,f.animationEnd=s.duration,f.animationLast=-1,f.nextAnimationLast=-1,f.delay=0,f.trackTime=0,f.trackLast=-1,f.nextTrackLast=-1,f.trackEnd=Number.MAX_VALUE,f.timeScale=1,f.alpha=1,f.interruptAlpha=1,f.mixTime=0,f.mixDuration=v==null?0:this.data.getMix(v.animation,s),f.mixBlend=i.MixBlend.replace,f},t.prototype.disposeNext=function(e){for(var s=e.next;s!=null;)this.queue.dispose(s),s=s.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,s=this.tracks.length;e<s;e++){var o=this.tracks[e];if(o!=null){for(;o.mixingFrom!=null;)o=o.mixingFrom;do(o.mixingFrom==null||o.mixBlend!=i.MixBlend.add)&&this.computeHold(o),o=o.mixingTo;while(o!=null)}}},t.prototype.computeHold=function(e){var s=e.mixingTo,o=e.animation.timelines,v=e.animation.timelines.length,f=i.Utils.setArraySize(e.timelineMode,v);e.timelineHoldMix.length=0;var g=i.Utils.setArraySize(e.timelineHoldMix,v),h=this.propertyIDs;if(s!=null&&s.holdPrevious){for(var c=0;c<v;c++)f[c]=h.add(o[c].getPropertyId())?t.HOLD_FIRST:t.HOLD_SUBSEQUENT;return}t:for(var c=0;c<v;c++){var u=o[c],y=u.getPropertyId();if(!h.add(y))f[c]=t.SUBSEQUENT;else if(s==null||u instanceof i.AttachmentTimeline||u instanceof i.DrawOrderTimeline||u instanceof i.EventTimeline||!s.animation.hasTimeline(y))f[c]=t.FIRST;else{for(var p=s.mixingTo;p!=null;p=p.mixingTo)if(!p.animation.hasTimeline(y)){if(e.mixDuration>0){f[c]=t.HOLD_MIX,g[c]=p;continue t}break}f[c]=t.HOLD_FIRST}}},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(e==null)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var s=this.listeners.indexOf(e);s>=0&&this.listeners.splice(s,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.emptyAnimation=new i.Animation("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD_SUBSEQUENT=2,t.HOLD_FIRST=3,t.HOLD_MIX=4,t.SETUP=1,t.CURRENT=2,t}();i.AnimationState=L;var m=function(){function t(){this.mixBlend=i.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t}();i.TrackEntry=m;var n=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(r.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(r.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(r.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(r.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(r.complete),this.objects.push(e)},t.prototype.event=function(e,s){this.objects.push(r.event),this.objects.push(e),this.objects.push(s)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,s=this.animState.listeners,o=0;o<e.length;o+=2){var v=e[o],f=e[o+1];switch(v){case r.start:f.listener!=null&&f.listener.start&&f.listener.start(f);for(var g=0;g<s.length;g++)s[g].start&&s[g].start(f);break;case r.interrupt:f.listener!=null&&f.listener.interrupt&&f.listener.interrupt(f);for(var g=0;g<s.length;g++)s[g].interrupt&&s[g].interrupt(f);break;case r.end:f.listener!=null&&f.listener.end&&f.listener.end(f);for(var g=0;g<s.length;g++)s[g].end&&s[g].end(f);case r.dispose:f.listener!=null&&f.listener.dispose&&f.listener.dispose(f);for(var g=0;g<s.length;g++)s[g].dispose&&s[g].dispose(f);this.animState.trackEntryPool.free(f);break;case r.complete:f.listener!=null&&f.listener.complete&&f.listener.complete(f);for(var g=0;g<s.length;g++)s[g].complete&&s[g].complete(f);break;case r.event:var h=e[o+++2];f.listener!=null&&f.listener.event&&f.listener.event(f,h);for(var g=0;g<s.length;g++)s[g].event&&s[g].event(f,h);break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();i.EventQueue=n;var r;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"})(r=i.EventType||(i.EventType={}));var a=function(){function t(){}return t.prototype.start=function(e){},t.prototype.interrupt=function(e){},t.prototype.end=function(e){},t.prototype.dispose=function(e){},t.prototype.complete=function(e){},t.prototype.event=function(e,s){},t}();i.AnimationStateAdapter=a})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n){if(this.animationToMixTime={},this.defaultMix=0,n==null)throw new Error("skeletonData cannot be null.");this.skeletonData=n}return m.prototype.setMix=function(n,r,a){var t=this.skeletonData.findAnimation(n);if(t==null)throw new Error("Animation not found: "+n);var e=this.skeletonData.findAnimation(r);if(e==null)throw new Error("Animation not found: "+r);this.setMixWith(t,e,a)},m.prototype.setMixWith=function(n,r,a){if(n==null)throw new Error("from cannot be null.");if(r==null)throw new Error("to cannot be null.");var t=n.name+"."+r.name;this.animationToMixTime[t]=a},m.prototype.getMix=function(n,r){var a=n.name+"."+r.name,t=this.animationToMixTime[a];return t===void 0?this.defaultMix:t},m}();i.AnimationStateData=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r){r===void 0&&(r=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=n,this.pathPrefix=r}return m.prototype.downloadText=function(n,r,a){var t=new XMLHttpRequest;t.overrideMimeType("text/html"),this.rawDataUris[n]&&(n=this.rawDataUris[n]),t.open("GET",n,!0),t.onload=function(){t.status==200?r(t.responseText):a(t.status,t.responseText)},t.onerror=function(){a(t.status,t.responseText)},t.send()},m.prototype.downloadBinary=function(n,r,a){var t=new XMLHttpRequest;this.rawDataUris[n]&&(n=this.rawDataUris[n]),t.open("GET",n,!0),t.responseType="arraybuffer",t.onload=function(){t.status==200?r(new Uint8Array(t.response)):a(t.status,t.responseText)},t.onerror=function(){a(t.status,t.responseText)},t.send()},m.prototype.setRawDataURI=function(n,r){this.rawDataUris[this.pathPrefix+n]=r},m.prototype.loadBinary=function(n,r,a){var t=this;r===void 0&&(r=null),a===void 0&&(a=null),n=this.pathPrefix+n,this.toLoad++,this.downloadBinary(n,function(e){t.assets[n]=e,r&&r(n,e),t.toLoad--,t.loaded++},function(e,s){t.errors[n]="Couldn't load binary "+n+": status "+status+", "+s,a&&a(n,"Couldn't load binary "+n+": status "+status+", "+s),t.toLoad--,t.loaded++})},m.prototype.loadText=function(n,r,a){var t=this;r===void 0&&(r=null),a===void 0&&(a=null),n=this.pathPrefix+n,this.toLoad++,this.downloadText(n,function(e){t.assets[n]=e,r&&r(n,e),t.toLoad--,t.loaded++},function(e,s){t.errors[n]="Couldn't load text "+n+": status "+status+", "+s,a&&a(n,"Couldn't load text "+n+": status "+status+", "+s),t.toLoad--,t.loaded++})},m.prototype.loadTexture=function(n,r,a){var t=this;r===void 0&&(r=null),a===void 0&&(a=null),n=this.pathPrefix+n;var e=n;this.toLoad++;var s=new Image;s.crossOrigin="anonymous",s.onload=function(o){var v=t.textureLoader(s);t.assets[e]=v,t.toLoad--,t.loaded++,r&&r(n,s)},s.onerror=function(o){t.errors[n]="Couldn't load image "+n,t.toLoad--,t.loaded++,a&&a(n,"Couldn't load image "+n)},this.rawDataUris[n]&&(n=this.rawDataUris[n]),s.src=n},m.prototype.loadTextureAtlas=function(n,r,a){var t=this;r===void 0&&(r=null),a===void 0&&(a=null);var e=n.lastIndexOf("/")>=0?n.substring(0,n.lastIndexOf("/")):"";n=this.pathPrefix+n,this.toLoad++,this.downloadText(n,function(s){var o={count:0},v=new Array;try{var f=new i.TextureAtlas(s,function(p){v.push(e==""?p:e+"/"+p);var T=document.createElement("img");return T.width=16,T.height=16,new i.FakeTexture(T)})}catch(p){var g=p;t.errors[n]="Couldn't load texture atlas "+n+": "+g.message,a&&a(n,"Couldn't load texture atlas "+n+": "+g.message),t.toLoad--,t.loaded++;return}for(var h=function(p){var T=!1;t.loadTexture(p,function(P,x){if(o.count++,o.count==v.length)if(T)t.errors[n]="Couldn't load texture atlas page "+P+"} of atlas "+n,a&&a(n,"Couldn't load texture atlas page "+P+" of atlas "+n),t.toLoad--,t.loaded++;else try{var I=new i.TextureAtlas(s,function(l){return t.get(e==""?l:e+"/"+l)});t.assets[n]=I,r&&r(n,I),t.toLoad--,t.loaded++}catch(l){var w=l;t.errors[n]="Couldn't load texture atlas "+n+": "+w.message,a&&a(n,"Couldn't load texture atlas "+n+": "+w.message),t.toLoad--,t.loaded++}},function(P,x){T=!0,o.count++,o.count==v.length&&(t.errors[n]="Couldn't load texture atlas page "+P+"} of atlas "+n,a&&a(n,"Couldn't load texture atlas page "+P+" of atlas "+n),t.toLoad--,t.loaded++)})},c=0,u=v;c<u.length;c++){var y=u[c];h(y)}},function(s,o){t.errors[n]="Couldn't load texture atlas "+n+": status "+status+", "+o,a&&a(n,"Couldn't load texture atlas "+n+": status "+status+", "+o),t.toLoad--,t.loaded++})},m.prototype.get=function(n){return n=this.pathPrefix+n,this.assets[n]},m.prototype.remove=function(n){n=this.pathPrefix+n;var r=this.assets[n];r.dispose&&r.dispose(),this.assets[n]=null},m.prototype.removeAll=function(){for(var n in this.assets){var r=this.assets[n];r.dispose&&r.dispose()}this.assets={}},m.prototype.isLoadingComplete=function(){return this.toLoad==0},m.prototype.getToLoad=function(){return this.toLoad},m.prototype.getLoaded=function(){return this.loaded},m.prototype.dispose=function(){this.removeAll()},m.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},m.prototype.getErrors=function(){return this.errors},m}();i.AssetManager=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n){this.atlas=n}return m.prototype.newRegionAttachment=function(n,r,a){var t=this.atlas.findRegion(a);if(t==null)throw new Error("Region not found in atlas: "+a+" (region attachment: "+r+")");t.renderObject=t;var e=new i.RegionAttachment(r);return e.setRegion(t),e},m.prototype.newMeshAttachment=function(n,r,a){var t=this.atlas.findRegion(a);if(t==null)throw new Error("Region not found in atlas: "+a+" (mesh attachment: "+r+")");t.renderObject=t;var e=new i.MeshAttachment(r);return e.region=t,e},m.prototype.newBoundingBoxAttachment=function(n,r){return new i.BoundingBoxAttachment(r)},m.prototype.newPathAttachment=function(n,r){return new i.PathAttachment(r)},m.prototype.newPointAttachment=function(n,r){return new i.PointAttachment(r)},m.prototype.newClippingAttachment=function(n,r){return new i.ClippingAttachment(r)},m}();i.AtlasAttachmentLoader=L})(spine||(spine={}));var spine;(function(i){var L;(function(m){m[m.Normal=0]="Normal",m[m.Additive=1]="Additive",m[m.Multiply=2]="Multiply",m[m.Screen=3]="Screen"})(L=i.BlendMode||(i.BlendMode={}))})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r,a){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=n,this.skeleton=r,this.parent=a,this.setToSetupPose()}return m.prototype.isActive=function(){return this.active},m.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},m.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},m.prototype.updateWorldTransformWith=function(n,r,a,t,e,s,o){this.ax=n,this.ay=r,this.arotation=a,this.ascaleX=t,this.ascaleY=e,this.ashearX=s,this.ashearY=o,this.appliedValid=!0;var v=this.parent;if(v==null){var f=this.skeleton,g=a+90+o,h=f.scaleX,c=f.scaleY;this.a=i.MathUtils.cosDeg(a+s)*t*h,this.b=i.MathUtils.cosDeg(g)*e*h,this.c=i.MathUtils.sinDeg(a+s)*t*c,this.d=i.MathUtils.sinDeg(g)*e*c,this.worldX=n*h+f.x,this.worldY=r*c+f.y;return}var u=v.a,y=v.b,p=v.c,T=v.d;switch(this.worldX=u*n+y*r+v.worldX,this.worldY=p*n+T*r+v.worldY,this.data.transformMode){case i.TransformMode.Normal:{var g=a+90+o,P=i.MathUtils.cosDeg(a+s)*t,x=i.MathUtils.cosDeg(g)*e,I=i.MathUtils.sinDeg(a+s)*t,w=i.MathUtils.sinDeg(g)*e;this.a=u*P+y*I,this.b=u*x+y*w,this.c=p*P+T*I,this.d=p*x+T*w;return}case i.TransformMode.OnlyTranslation:{var g=a+90+o;this.a=i.MathUtils.cosDeg(a+s)*t,this.b=i.MathUtils.cosDeg(g)*e,this.c=i.MathUtils.sinDeg(a+s)*t,this.d=i.MathUtils.sinDeg(g)*e;break}case i.TransformMode.NoRotationOrReflection:{var l=u*u+p*p,E=0;l>1e-4?(l=Math.abs(u*T-y*p)/l,u/=this.skeleton.scaleX,p/=this.skeleton.scaleY,y=p*l,T=u*l,E=Math.atan2(p,u)*i.MathUtils.radDeg):(u=0,p=0,E=90-Math.atan2(T,y)*i.MathUtils.radDeg);var C=a+s-E,S=a+o-E+90,P=i.MathUtils.cosDeg(C)*t,x=i.MathUtils.cosDeg(S)*e,I=i.MathUtils.sinDeg(C)*t,w=i.MathUtils.sinDeg(S)*e;this.a=u*P-y*I,this.b=u*x-y*w,this.c=p*P+T*I,this.d=p*x+T*w;break}case i.TransformMode.NoScale:case i.TransformMode.NoScaleOrReflection:{var F=i.MathUtils.cosDeg(a),R=i.MathUtils.sinDeg(a),V=(u*F+y*R)/this.skeleton.scaleX,N=(p*F+T*R)/this.skeleton.scaleY,l=Math.sqrt(V*V+N*N);l>1e-5&&(l=1/l),V*=l,N*=l,l=Math.sqrt(V*V+N*N),this.data.transformMode==i.TransformMode.NoScale&&u*T-y*p<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(l=-l);var A=Math.PI/2+Math.atan2(N,V),d=Math.cos(A)*l,M=Math.sin(A)*l,P=i.MathUtils.cosDeg(s)*t,x=i.MathUtils.cosDeg(90+o)*e,I=i.MathUtils.sinDeg(s)*t,w=i.MathUtils.sinDeg(90+o)*e;this.a=V*P+d*I,this.b=V*x+d*w,this.c=N*P+M*I,this.d=N*x+M*w;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},m.prototype.setToSetupPose=function(){var n=this.data;this.x=n.x,this.y=n.y,this.rotation=n.rotation,this.scaleX=n.scaleX,this.scaleY=n.scaleY,this.shearX=n.shearX,this.shearY=n.shearY},m.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*i.MathUtils.radDeg},m.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*i.MathUtils.radDeg},m.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},m.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},m.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var n=this.parent;if(n==null){this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*i.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*i.MathUtils.radDeg;return}var r=n.a,a=n.b,t=n.c,e=n.d,s=1/(r*e-a*t),o=this.worldX-n.worldX,v=this.worldY-n.worldY;this.ax=o*e*s-v*a*s,this.ay=v*r*s-o*t*s;var f=s*e,g=s*r,h=s*a,c=s*t,u=f*this.a-h*this.c,y=f*this.b-h*this.d,p=g*this.c-c*this.a,T=g*this.d-c*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+p*p),this.ascaleX>1e-4){var P=u*T-y*p;this.ascaleY=P/this.ascaleX,this.ashearY=Math.atan2(u*y+p*T,P)*i.MathUtils.radDeg,this.arotation=Math.atan2(p,u)*i.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(y*y+T*T),this.ashearY=0,this.arotation=90-Math.atan2(T,y)*i.MathUtils.radDeg},m.prototype.worldToLocal=function(n){var r=this.a,a=this.b,t=this.c,e=this.d,s=1/(r*e-a*t),o=n.x-this.worldX,v=n.y-this.worldY;return n.x=o*e*s-v*a*s,n.y=v*r*s-o*t*s,n},m.prototype.localToWorld=function(n){var r=n.x,a=n.y;return n.x=r*this.a+a*this.b+this.worldX,n.y=r*this.c+a*this.d+this.worldY,n},m.prototype.worldToLocalRotation=function(n){var r=i.MathUtils.sinDeg(n),a=i.MathUtils.cosDeg(n);return Math.atan2(this.a*r-this.c*a,this.d*a-this.b*r)*i.MathUtils.radDeg+this.rotation-this.shearX},m.prototype.localToWorldRotation=function(n){n-=this.rotation-this.shearX;var r=i.MathUtils.sinDeg(n),a=i.MathUtils.cosDeg(n);return Math.atan2(a*this.c+r*this.d,a*this.a+r*this.b)*i.MathUtils.radDeg},m.prototype.rotateWorld=function(n){var r=this.a,a=this.b,t=this.c,e=this.d,s=i.MathUtils.cosDeg(n),o=i.MathUtils.sinDeg(n);this.a=s*r-o*t,this.b=s*a-o*e,this.c=o*r+s*t,this.d=o*a+s*e,this.appliedValid=!1},m}();i.Bone=L})(spine||(spine={}));var spine;(function(i){var L=function(){function n(r,a,t){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=m.Normal,this.skinRequired=!1,this.color=new i.Color,r<0)throw new Error("index must be >= 0.");if(a==null)throw new Error("name cannot be null.");this.index=r,this.name=a,this.parent=t}return n}();i.BoneData=L;var m;(function(n){n[n.Normal=0]="Normal",n[n.OnlyTranslation=1]="OnlyTranslation",n[n.NoRotationOrReflection=2]="NoRotationOrReflection",n[n.NoScale=3]="NoScale",n[n.NoScaleOrReflection=4]="NoScaleOrReflection"})(m=i.TransformMode||(i.TransformMode={}))})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r,a){this.name=n,this.order=r,this.skinRequired=a}return m}();i.ConstraintData=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r){if(r==null)throw new Error("data cannot be null.");this.time=n,this.data=r}return m}();i.Event=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n){this.name=n}return m}();i.EventData=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=n,this.mix=n.mix,this.softness=n.softness,this.bendDirection=n.bendDirection,this.compress=n.compress,this.stretch=n.stretch,this.bones=new Array;for(var a=0;a<n.bones.length;a++)this.bones.push(r.findBone(n.bones[a].name));this.target=r.findBone(n.target.name)}return m.prototype.isActive=function(){return this.active},m.prototype.apply=function(){this.update()},m.prototype.update=function(){var n=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],n.worldX,n.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],n.worldX,n.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},m.prototype.apply1=function(n,r,a,t,e,s,o){n.appliedValid||n.updateAppliedTransform();var v=n.parent,f=v.a,g=v.b,h=v.c,c=v.d,u=-n.ashearX-n.arotation,y=0,p=0;switch(n.data.transformMode){case i.TransformMode.OnlyTranslation:y=r-n.worldX,p=a-n.worldY;break;case i.TransformMode.NoRotationOrReflection:var T=Math.abs(f*c-g*h)/(f*f+h*h),P=f/n.skeleton.scaleX,x=h/n.skeleton.scaleY;g=-x*T*n.skeleton.scaleX,c=P*T*n.skeleton.scaleY,u+=Math.atan2(x,P)*i.MathUtils.radDeg;default:var I=r-v.worldX,w=a-v.worldY,l=f*c-g*h;y=(I*c-w*g)/l-n.ax,p=(w*f-I*h)/l-n.ay}u+=Math.atan2(p,y)*i.MathUtils.radDeg,n.ascaleX<0&&(u+=180),u>180?u-=360:u<-180&&(u+=360);var E=n.ascaleX,C=n.ascaleY;if(t||e){switch(n.data.transformMode){case i.TransformMode.NoScale:case i.TransformMode.NoScaleOrReflection:y=r-n.worldX,p=a-n.worldY}var S=n.data.length*E,F=Math.sqrt(y*y+p*p);if(t&&F<S||e&&F>S&&S>1e-4){var T=(F/S-1)*o+1;E*=T,s&&(C*=T)}}n.updateWorldTransformWith(n.ax,n.ay,n.arotation+u*o,E,C,n.ashearX,n.ashearY)},m.prototype.apply2=function(n,r,a,t,e,s,o,v){if(v==0){r.updateWorldTransform();return}n.appliedValid||n.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var f=n.ax,g=n.ay,h=n.ascaleX,c=h,u=n.ascaleY,y=r.ascaleX,p=0,T=0,P=0;h<0?(h=-h,p=180,P=-1):(p=0,P=1),u<0&&(u=-u,P=-P),y<0?(y=-y,T=180):T=0;var x=r.ax,I=0,w=0,l=0,E=n.a,C=n.b,S=n.c,F=n.d,R=Math.abs(h-u)<=1e-4;R?(I=r.ay,w=E*x+C*I+n.worldX,l=S*x+F*I+n.worldY):(I=0,w=E*x+n.worldX,l=S*x+n.worldY);var V=n.parent;E=V.a,C=V.b,S=V.c,F=V.d;var N=1/(E*F-C*S),A=w-V.worldX,d=l-V.worldY,M=(A*F-d*C)*N-f,U=(d*E-A*S)*N-g,b=Math.sqrt(M*M+U*U),Y=r.data.length*y,D,O;if(b<1e-4){this.apply1(n,a,t,!1,s,!1,v),r.updateWorldTransformWith(x,I,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}A=a-V.worldX,d=t-V.worldY;var B=(A*F-d*C)*N-f,X=(d*E-A*S)*N-g,W=B*B+X*X;if(o!=0){o*=h*(y+1)/2;var k=Math.sqrt(W),_=k-b-Y*h+o;if(_>0){var q=Math.min(1,_/(o*2))-1;q=(_-o*(1-q*q))/k,B-=q*B,X-=q*X,W=B*B+X*X}}t:if(R){Y*=h;var H=(W-b*b-Y*Y)/(2*b*Y);H<-1?H=-1:H>1&&(H=1,s&&(c*=(Math.sqrt(W)/(b+Y)-1)*v+1)),O=Math.acos(H)*e,E=b+Y*H,C=Y*Math.sin(O),D=Math.atan2(X*E-B*C,B*E+X*C)}else{E=h*Y,C=u*Y;var j=E*E,Z=C*C,K=Math.atan2(X,B);S=Z*b*b+j*W-j*Z;var G=-2*Z*b,z=Z-j;if(F=G*G-4*z*S,F>=0){var J=Math.sqrt(F);G<0&&(J=-J),J=-(G+J)/2;var at=J/z,et=S/J,$=Math.abs(at)<Math.abs(et)?at:et;if($*$<=W){d=Math.sqrt(W-$*$)*e,D=K-Math.atan2(d,$),O=Math.atan2(d/u,($-b)/h);break t}}var nt=i.MathUtils.PI,tt=b-E,rt=tt*tt,Q=0,lt=0,ot=b+E,ut=ot*ot,st=0;S=-E*b/(j-Z),S>=-1&&S<=1&&(S=Math.acos(S),A=E*Math.cos(S)+b,d=C*Math.sin(S),F=A*A+d*d,F<rt&&(nt=S,rt=F,tt=A,Q=d),F>ut&&(lt=S,ut=F,ot=A,st=d)),W<=(rt+ut)/2?(D=K-Math.atan2(Q*e,tt),O=nt*e):(D=K-Math.atan2(st*e,ot),O=lt*e)}var ht=Math.atan2(I,x)*P,it=n.arotation;D=(D-ht)*i.MathUtils.radDeg+p-it,D>180?D-=360:D<-180&&(D+=360),n.updateWorldTransformWith(f,g,it+D*v,c,n.ascaleY,0,0),it=r.arotation,O=((O+ht)*i.MathUtils.radDeg-r.ashearX)*P+T-it,O>180?O-=360:O<-180&&(O+=360),r.updateWorldTransformWith(x,I,it+O*v,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},m}();i.IkConstraint=L})(spine||(spine={}));var spine;(function(i){var L=function(m){__extends(n,m);function n(r){var a=m.call(this,r,0,!1)||this;return a.bones=new Array,a.bendDirection=1,a.compress=!1,a.stretch=!1,a.uniform=!1,a.mix=1,a.softness=0,a}return n}(i.ConstraintData);i.IkConstraintData=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=n,this.bones=new Array;for(var a=0,t=n.bones.length;a<t;a++)this.bones.push(r.findBone(n.bones[a].name));this.target=r.findSlot(n.target.name),this.position=n.position,this.spacing=n.spacing,this.rotateMix=n.rotateMix,this.translateMix=n.translateMix}return m.prototype.isActive=function(){return this.active},m.prototype.apply=function(){this.update()},m.prototype.update=function(){var n=this.target.getAttachment();if(n instanceof i.PathAttachment){var r=this.rotateMix,a=this.translateMix,t=a>0,e=r>0;if(!(!t&&!e)){var s=this.data,o=s.spacingMode==i.SpacingMode.Percent,v=s.rotateMode,f=v==i.RotateMode.Tangent,g=v==i.RotateMode.ChainScale,h=this.bones.length,c=f?h:h+1,u=this.bones,y=i.Utils.setArraySize(this.spaces,c),p=null,T=this.spacing;if(g||!o){g&&(p=i.Utils.setArraySize(this.lengths,h));for(var P=s.spacingMode==i.SpacingMode.Length,x=0,I=c-1;x<I;){var w=u[x],l=w.data.length;if(l<m.epsilon)g&&(p[x]=0),y[++x]=0;else if(o){if(g){var E=l*w.a,C=l*w.c,S=Math.sqrt(E*E+C*C);p[x]=S}y[++x]=T}else{var E=l*w.a,C=l*w.c,F=Math.sqrt(E*E+C*C);g&&(p[x]=F),y[++x]=(P?l+T:T)*F/l}}}else for(var x=1;x<c;x++)y[x]=T;var R=this.computeWorldPositions(n,c,f,s.positionMode==i.PositionMode.Percent,o),V=R[0],N=R[1],A=s.offsetRotation,d=!1;if(A==0)d=v==i.RotateMode.Chain;else{d=!1;var M=this.target.bone;A*=M.a*M.d-M.b*M.c>0?i.MathUtils.degRad:-i.MathUtils.degRad}for(var x=0,M=3;x<h;x++,M+=3){var w=u[x];w.worldX+=(V-w.worldX)*a,w.worldY+=(N-w.worldY)*a;var E=R[M],C=R[M+1],U=E-V,b=C-N;if(g){var Y=p[x];if(Y!=0){var D=(Math.sqrt(U*U+b*b)/Y-1)*r+1;w.a*=D,w.c*=D}}if(V=E,N=C,e){var O=w.a,B=w.b,X=w.c,W=w.d,k=0,_=0,q=0;if(f?k=R[M-1]:y[x+1]==0?k=R[M+2]:k=Math.atan2(b,U),k-=Math.atan2(X,O),d){_=Math.cos(k),q=Math.sin(k);var H=w.data.length;V+=(H*(_*O-q*X)-U)*r,N+=(H*(q*O+_*X)-b)*r}else k+=A;k>i.MathUtils.PI?k-=i.MathUtils.PI2:k<-i.MathUtils.PI&&(k+=i.MathUtils.PI2),k*=r,_=Math.cos(k),q=Math.sin(k),w.a=_*O-q*X,w.b=_*B-q*W,w.c=q*O+_*X,w.d=q*B+_*W}w.appliedValid=!1}}}},m.prototype.computeWorldPositions=function(n,r,a,t,e){var s=this.target,o=this.position,v=this.spaces,f=i.Utils.setArraySize(this.positions,r*3+2),g=null,h=n.closed,c=n.worldVerticesLength,u=c/6,y=m.NONE;if(!n.constantSpeed){var p=n.lengths;u-=h?1:2;var T=p[u];if(t&&(o*=T),e)for(var P=1;P<r;P++)v[P]*=T;g=i.Utils.setArraySize(this.world,8);for(var P=0,x=0,I=0;P<r;P++,x+=3){var w=v[P];o+=w;var l=o;if(h)l%=T,l<0&&(l+=T),I=0;else if(l<0){y!=m.BEFORE&&(y=m.BEFORE,n.computeWorldVertices(s,2,4,g,0,2)),this.addBeforePosition(l,g,0,f,x);continue}else if(l>T){y!=m.AFTER&&(y=m.AFTER,n.computeWorldVertices(s,c-6,4,g,0,2)),this.addAfterPosition(l-T,g,0,f,x);continue}for(;;I++){var E=p[I];if(!(l>E)){if(I==0)l/=E;else{var C=p[I-1];l=(l-C)/(E-C)}break}}I!=y&&(y=I,h&&I==u?(n.computeWorldVertices(s,c-4,4,g,0,2),n.computeWorldVertices(s,0,4,g,4,2)):n.computeWorldVertices(s,I*6+2,8,g,0,2)),this.addCurvePosition(l,g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],f,x,a||P>0&&w==0)}return f}h?(c+=2,g=i.Utils.setArraySize(this.world,c),n.computeWorldVertices(s,2,c-4,g,0,2),n.computeWorldVertices(s,0,2,g,c-4,2),g[c-2]=g[0],g[c-1]=g[1]):(u--,c-=4,g=i.Utils.setArraySize(this.world,c),n.computeWorldVertices(s,2,c,g,0,2));for(var S=i.Utils.setArraySize(this.curves,u),F=0,R=g[0],V=g[1],N=0,A=0,d=0,M=0,U=0,b=0,Y=0,D=0,O=0,B=0,X=0,W=0,k=0,_=0,P=0,q=2;P<u;P++,q+=6)N=g[q],A=g[q+1],d=g[q+2],M=g[q+3],U=g[q+4],b=g[q+5],Y=(R-N*2+d)*.1875,D=(V-A*2+M)*.1875,O=((N-d)*3-R+U)*.09375,B=((A-M)*3-V+b)*.09375,X=Y*2+O,W=D*2+B,k=(N-R)*.75+Y+O*.16666667,_=(A-V)*.75+D+B*.16666667,F+=Math.sqrt(k*k+_*_),k+=X,_+=W,X+=O,W+=B,F+=Math.sqrt(k*k+_*_),k+=X,_+=W,F+=Math.sqrt(k*k+_*_),k+=X+O,_+=W+B,F+=Math.sqrt(k*k+_*_),S[P]=F,R=U,V=b;if(t?o*=F:o*=F/n.lengths[u-1],e)for(var P=1;P<r;P++)v[P]*=F;for(var H=this.segments,j=0,P=0,x=0,I=0,Z=0;P<r;P++,x+=3){var w=v[P];o+=w;var l=o;if(h)l%=F,l<0&&(l+=F),I=0;else if(l<0){this.addBeforePosition(l,g,0,f,x);continue}else if(l>F){this.addAfterPosition(l-F,g,c-4,f,x);continue}for(;;I++){var K=S[I];if(!(l>K)){if(I==0)l/=K;else{var C=S[I-1];l=(l-C)/(K-C)}break}}if(I!=y){y=I;var G=I*6;for(R=g[G],V=g[G+1],N=g[G+2],A=g[G+3],d=g[G+4],M=g[G+5],U=g[G+6],b=g[G+7],Y=(R-N*2+d)*.03,D=(V-A*2+M)*.03,O=((N-d)*3-R+U)*.006,B=((A-M)*3-V+b)*.006,X=Y*2+O,W=D*2+B,k=(N-R)*.3+Y+O*.16666667,_=(A-V)*.3+D+B*.16666667,j=Math.sqrt(k*k+_*_),H[0]=j,G=1;G<8;G++)k+=X,_+=W,X+=O,W+=B,j+=Math.sqrt(k*k+_*_),H[G]=j;k+=X,_+=W,j+=Math.sqrt(k*k+_*_),H[8]=j,k+=X+O,_+=W+B,j+=Math.sqrt(k*k+_*_),H[9]=j,Z=0}for(l*=j;;Z++){var z=H[Z];if(!(l>z)){if(Z==0)l/=z;else{var C=H[Z-1];l=Z+(l-C)/(z-C)}break}}this.addCurvePosition(l*.1,R,V,N,A,d,M,U,b,f,x,a||P>0&&w==0)}return f},m.prototype.addBeforePosition=function(n,r,a,t,e){var s=r[a],o=r[a+1],v=r[a+2]-s,f=r[a+3]-o,g=Math.atan2(f,v);t[e]=s+n*Math.cos(g),t[e+1]=o+n*Math.sin(g),t[e+2]=g},m.prototype.addAfterPosition=function(n,r,a,t,e){var s=r[a+2],o=r[a+3],v=s-r[a],f=o-r[a+1],g=Math.atan2(f,v);t[e]=s+n*Math.cos(g),t[e+1]=o+n*Math.sin(g),t[e+2]=g},m.prototype.addCurvePosition=function(n,r,a,t,e,s,o,v,f,g,h,c){if(n==0||isNaN(n)){g[h]=r,g[h+1]=a,g[h+2]=Math.atan2(e-a,t-r);return}var u=n*n,y=u*n,p=1-n,T=p*p,P=T*p,x=p*n,I=x*3,w=p*I,l=I*n,E=r*P+t*w+s*l+v*y,C=a*P+e*w+o*l+f*y;g[h]=E,g[h+1]=C,c&&(n<.001?g[h+2]=Math.atan2(e-a,t-r):g[h+2]=Math.atan2(C-(a*T+e*x*2+o*u),E-(r*T+t*x*2+s*u)))},m.NONE=-1,m.BEFORE=-2,m.AFTER=-3,m.epsilon=1e-5,m}();i.PathConstraint=L})(spine||(spine={}));var spine;(function(i){var L=function(a){__extends(t,a);function t(e){var s=a.call(this,e,0,!1)||this;return s.bones=new Array,s}return t}(i.ConstraintData);i.PathConstraintData=L;var m;(function(a){a[a.Fixed=0]="Fixed",a[a.Percent=1]="Percent"})(m=i.PositionMode||(i.PositionMode={}));var n;(function(a){a[a.Length=0]="Length",a[a.Fixed=1]="Fixed",a[a.Percent=2]="Percent"})(n=i.SpacingMode||(i.SpacingMode={}));var r;(function(a){a[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale"})(r=i.RotateMode||(i.RotateMode={}))})(spine||(spine={}));var spine;(function(i){var L=function(){function n(r){this.toLoad=new Array,this.assets={},this.clientId=r}return n.prototype.loaded=function(){var r=0;for(var a in this.assets)r++;return r},n}(),m=function(){function n(r){r===void 0&&(r=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=r}return n.prototype.queueAsset=function(r,a,t){var e=this.clientAssets[r];return e==null&&(e=new L(r),this.clientAssets[r]=e),a!==null&&(e.textureLoader=a),e.toLoad.push(t),this.queuedAssets[t]===t?!1:(this.queuedAssets[t]=t,!0)},n.prototype.loadText=function(r,a){var t=this;if(a=this.pathPrefix+a,!!this.queueAsset(r,null,a)){var e=new XMLHttpRequest;e.overrideMimeType("text/html"),e.onreadystatechange=function(){e.readyState==XMLHttpRequest.DONE&&(e.status>=200&&e.status<300?t.rawAssets[a]=e.responseText:t.errors[a]="Couldn't load text "+a+": status "+e.status+", "+e.responseText)},e.open("GET",a,!0),e.send()}},n.prototype.loadJson=function(r,a){var t=this;if(a=this.pathPrefix+a,!!this.queueAsset(r,null,a)){var e=new XMLHttpRequest;e.overrideMimeType("text/html"),e.onreadystatechange=function(){e.readyState==XMLHttpRequest.DONE&&(e.status>=200&&e.status<300?t.rawAssets[a]=JSON.parse(e.responseText):t.errors[a]="Couldn't load text "+a+": status "+e.status+", "+e.responseText)},e.open("GET",a,!0),e.send()}},n.prototype.loadTexture=function(r,a,t){var e=this;if(t=this.pathPrefix+t,!!this.queueAsset(r,a,t)){var s=!!(typeof window!="undefined"&&typeof navigator!="undefined"&&window.document),o=!s&&typeof importScripts!="undefined";if(o){var v={mode:"cors"};fetch(t,v).then(function(g){return g.ok||(e.errors[t]="Couldn't load image "+t),g.blob()}).then(function(g){return createImageBitmap(g,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(g){e.rawAssets[t]=g})}else{var f=new Image;f.crossOrigin="anonymous",f.onload=function(g){e.rawAssets[t]=f},f.onerror=function(g){e.errors[t]="Couldn't load image "+t},f.src=t}}},n.prototype.get=function(r,a){a=this.pathPrefix+a;var t=this.clientAssets[r];return t==null?!0:t.assets[a]},n.prototype.updateClientAssets=function(r){for(var a=!!(typeof window!="undefined"&&typeof navigator!="undefined"&&window.document),t=!a&&typeof importScripts!="undefined",e=0;e<r.toLoad.length;e++){var s=r.toLoad[e],o=r.assets[s];if(o==null){var v=this.rawAssets[s];if(v==null)continue;t?v instanceof ImageBitmap?r.assets[s]=r.textureLoader(v):r.assets[s]=v:v instanceof HTMLImageElement?r.assets[s]=r.textureLoader(v):r.assets[s]=v}}},n.prototype.isLoadingComplete=function(r){var a=this.clientAssets[r];return a==null?!0:(this.updateClientAssets(a),a.toLoad.length==a.loaded())},n.prototype.dispose=function(){},n.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},n.prototype.getErrors=function(){return this.errors},n}();i.SharedAssetManager=m})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,n==null)throw new Error("data cannot be null.");this.data=n,this.bones=new Array;for(var r=0;r<n.bones.length;r++){var a=n.bones[r],t=void 0;if(a.parent==null)t=new i.Bone(a,this,null);else{var e=this.bones[a.parent.index];t=new i.Bone(a,this,e),e.children.push(t)}this.bones.push(t)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<n.slots.length;r++){var s=n.slots[r],t=this.bones[s.boneData.index],o=new i.Slot(s,t);this.slots.push(o),this.drawOrder.push(o)}this.ikConstraints=new Array;for(var r=0;r<n.ikConstraints.length;r++){var v=n.ikConstraints[r];this.ikConstraints.push(new i.IkConstraint(v,this))}this.transformConstraints=new Array;for(var r=0;r<n.transformConstraints.length;r++){var f=n.transformConstraints[r];this.transformConstraints.push(new i.TransformConstraint(f,this))}this.pathConstraints=new Array;for(var r=0;r<n.pathConstraints.length;r++){var g=n.pathConstraints[r];this.pathConstraints.push(new i.PathConstraint(g,this))}this.color=new i.Color(1,1,1,1),this.updateCache()}return m.prototype.updateCache=function(){var n=this._updateCache;n.length=0,this.updateCacheReset.length=0;for(var r=this.bones,a=0,t=r.length;a<t;a++){var e=r[a];e.sorted=e.data.skinRequired,e.active=!e.sorted}if(this.skin!=null)for(var s=this.skin.bones,a=0,t=this.skin.bones.length;a<t;a++){var e=this.bones[s[a].index];do e.sorted=!1,e.active=!0,e=e.parent;while(e!=null)}var o=this.ikConstraints,v=this.transformConstraints,f=this.pathConstraints,g=o.length,h=v.length,c=f.length,u=g+h+c;t:for(var a=0;a<u;a++){for(var y=0;y<g;y++){var p=o[y];if(p.data.order==a){this.sortIkConstraint(p);continue t}}for(var y=0;y<h;y++){var p=v[y];if(p.data.order==a){this.sortTransformConstraint(p);continue t}}for(var y=0;y<c;y++){var p=f[y];if(p.data.order==a){this.sortPathConstraint(p);continue t}}}for(var a=0,t=r.length;a<t;a++)this.sortBone(r[a])},m.prototype.sortIkConstraint=function(n){if(n.active=n.target.isActive()&&(!n.data.skinRequired||this.skin!=null&&i.Utils.contains(this.skin.constraints,n.data,!0)),!!n.active){var r=n.target;this.sortBone(r);var a=n.bones,t=a[0];if(this.sortBone(t),a.length>1){var e=a[a.length-1];this._updateCache.indexOf(e)>-1||this.updateCacheReset.push(e)}this._updateCache.push(n),this.sortReset(t.children),a[a.length-1].sorted=!0}},m.prototype.sortPathConstraint=function(n){if(n.active=n.target.bone.isActive()&&(!n.data.skinRequired||this.skin!=null&&i.Utils.contains(this.skin.constraints,n.data,!0)),!!n.active){var r=n.target,a=r.data.index,t=r.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,a,t),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,a,t);for(var e=0,s=this.data.skins.length;e<s;e++)this.sortPathConstraintAttachment(this.data.skins[e],a,t);var o=r.getAttachment();o instanceof i.PathAttachment&&this.sortPathConstraintAttachmentWith(o,t);for(var v=n.bones,f=v.length,e=0;e<f;e++)this.sortBone(v[e]);this._updateCache.push(n);for(var e=0;e<f;e++)this.sortReset(v[e].children);for(var e=0;e<f;e++)v[e].sorted=!0}},m.prototype.sortTransformConstraint=function(n){if(n.active=n.target.isActive()&&(!n.data.skinRequired||this.skin!=null&&i.Utils.contains(this.skin.constraints,n.data,!0)),!!n.active){this.sortBone(n.target);var r=n.bones,a=r.length;if(n.data.local)for(var t=0;t<a;t++){var e=r[t];this.sortBone(e.parent),this._updateCache.indexOf(e)>-1||this.updateCacheReset.push(e)}else for(var t=0;t<a;t++)this.sortBone(r[t]);this._updateCache.push(n);for(var s=0;s<a;s++)this.sortReset(r[s].children);for(var s=0;s<a;s++)r[s].sorted=!0}},m.prototype.sortPathConstraintAttachment=function(n,r,a){var t=n.attachments[r];if(!!t)for(var e in t)this.sortPathConstraintAttachmentWith(t[e],a)},m.prototype.sortPathConstraintAttachmentWith=function(n,r){if(n instanceof i.PathAttachment){var a=n.bones;if(a==null)this.sortBone(r);else for(var t=this.bones,e=0;e<a.length;)for(var s=a[e++],o=e+s;e<o;e++){var v=a[e];this.sortBone(t[v])}}},m.prototype.sortBone=function(n){if(!n.sorted){var r=n.parent;r!=null&&this.sortBone(r),n.sorted=!0,this._updateCache.push(n)}},m.prototype.sortReset=function(n){for(var r=0,a=n.length;r<a;r++){var t=n[r];!t.active||(t.sorted&&this.sortReset(t.children),t.sorted=!1)}},m.prototype.updateWorldTransform=function(){for(var n=this.updateCacheReset,r=0,a=n.length;r<a;r++){var t=n[r];t.ax=t.x,t.ay=t.y,t.arotation=t.rotation,t.ascaleX=t.scaleX,t.ascaleY=t.scaleY,t.ashearX=t.shearX,t.ashearY=t.shearY,t.appliedValid=!0}for(var e=this._updateCache,r=0,a=e.length;r<a;r++)e[r].update()},m.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},m.prototype.setBonesToSetupPose=function(){for(var n=this.bones,r=0,a=n.length;r<a;r++)n[r].setToSetupPose();for(var t=this.ikConstraints,r=0,a=t.length;r<a;r++){var e=t[r];e.mix=e.data.mix,e.softness=e.data.softness,e.bendDirection=e.data.bendDirection,e.compress=e.data.compress,e.stretch=e.data.stretch}for(var s=this.transformConstraints,r=0,a=s.length;r<a;r++){var e=s[r],o=e.data;e.rotateMix=o.rotateMix,e.translateMix=o.translateMix,e.scaleMix=o.scaleMix,e.shearMix=o.shearMix}for(var v=this.pathConstraints,r=0,a=v.length;r<a;r++){var e=v[r],o=e.data;e.position=o.position,e.spacing=o.spacing,e.rotateMix=o.rotateMix,e.translateMix=o.translateMix}},m.prototype.setSlotsToSetupPose=function(){var n=this.slots;i.Utils.arrayCopy(n,0,this.drawOrder,0,n.length);for(var r=0,a=n.length;r<a;r++)n[r].setToSetupPose()},m.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},m.prototype.findBone=function(n){if(n==null)throw new Error("boneName cannot be null.");for(var r=this.bones,a=0,t=r.length;a<t;a++){var e=r[a];if(e.data.name==n)return e}return null},m.prototype.findBoneIndex=function(n){if(n==null)throw new Error("boneName cannot be null.");for(var r=this.bones,a=0,t=r.length;a<t;a++)if(r[a].data.name==n)return a;return-1},m.prototype.findSlot=function(n){if(n==null)throw new Error("slotName cannot be null.");for(var r=this.slots,a=0,t=r.length;a<t;a++){var e=r[a];if(e.data.name==n)return e}return null},m.prototype.findSlotIndex=function(n){if(n==null)throw new Error("slotName cannot be null.");for(var r=this.slots,a=0,t=r.length;a<t;a++)if(r[a].data.name==n)return a;return-1},m.prototype.setSkinByName=function(n){var r=this.data.findSkin(n);if(r==null)throw new Error("Skin not found: "+n);this.setSkin(r)},m.prototype.setSkin=function(n){if(n!=this.skin){if(n!=null)if(this.skin!=null)n.attachAll(this,this.skin);else for(var r=this.slots,a=0,t=r.length;a<t;a++){var e=r[a],s=e.data.attachmentName;if(s!=null){var o=n.getAttachment(a,s);o!=null&&e.setAttachment(o)}}this.skin=n,this.updateCache()}},m.prototype.getAttachmentByName=function(n,r){return this.getAttachment(this.data.findSlotIndex(n),r)},m.prototype.getAttachment=function(n,r){if(r==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var a=this.skin.getAttachment(n,r);if(a!=null)return a}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(n,r):null},m.prototype.setAttachment=function(n,r){if(n==null)throw new Error("slotName cannot be null.");for(var a=this.slots,t=0,e=a.length;t<e;t++){var s=a[t];if(s.data.name==n){var o=null;if(r!=null&&(o=this.getAttachment(t,r),o==null))throw new Error("Attachment not found: "+r+", for slot: "+n);s.setAttachment(o);return}}throw new Error("Slot not found: "+n)},m.prototype.findIkConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,a=0,t=r.length;a<t;a++){var e=r[a];if(e.data.name==n)return e}return null},m.prototype.findTransformConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,a=0,t=r.length;a<t;a++){var e=r[a];if(e.data.name==n)return e}return null},m.prototype.findPathConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,a=0,t=r.length;a<t;a++){var e=r[a];if(e.data.name==n)return e}return null},m.prototype.getBounds=function(n,r,a){if(a===void 0&&(a=new Array(2)),n==null)throw new Error("offset cannot be null.");if(r==null)throw new Error("size cannot be null.");for(var t=this.drawOrder,e=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY,f=0,g=t.length;f<g;f++){var h=t[f];if(!!h.bone.active){var c=0,u=null,y=h.getAttachment();if(y instanceof i.RegionAttachment)c=8,u=i.Utils.setArraySize(a,c,0),y.computeWorldVertices(h.bone,u,0,2);else if(y instanceof i.MeshAttachment){var p=y;c=p.worldVerticesLength,u=i.Utils.setArraySize(a,c,0),p.computeWorldVertices(h,0,c,u,0,2)}if(u!=null)for(var T=0,P=u.length;T<P;T+=2){var x=u[T],I=u[T+1];e=Math.min(e,x),s=Math.min(s,I),o=Math.max(o,x),v=Math.max(v,I)}}}n.set(e,s),r.set(o-e,v-s)},m.prototype.update=function(n){this.time+=n},m}();i.Skeleton=L})(spine||(spine={}));var spine;(function(i){var L=function(){function a(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return a.prototype.readSkeletonData=function(t){var e=this.scale,s=new i.SkeletonData;s.name="";var o=new m(t);if(s.hash=o.readString(),s.version=o.readString(),s.version=="3.8.75")throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");s.x=o.readFloat(),s.y=o.readFloat(),s.width=o.readFloat(),s.height=o.readFloat();var v=o.readBoolean();v&&(s.fps=o.readFloat(),s.imagesPath=o.readString(),s.audioPath=o.readString());var f=0;f=o.readInt(!0);for(var g=0;g<f;g++)o.strings.push(o.readString());f=o.readInt(!0);for(var g=0;g<f;g++){var h=o.readString(),c=g==0?null:s.bones[o.readInt(!0)],u=new i.BoneData(g,h,c);u.rotation=o.readFloat(),u.x=o.readFloat()*e,u.y=o.readFloat()*e,u.scaleX=o.readFloat(),u.scaleY=o.readFloat(),u.shearX=o.readFloat(),u.shearY=o.readFloat(),u.length=o.readFloat()*e,u.transformMode=a.TransformModeValues[o.readInt(!0)],u.skinRequired=o.readBoolean(),v&&i.Color.rgba8888ToColor(u.color,o.readInt32()),s.bones.push(u)}f=o.readInt(!0);for(var g=0;g<f;g++){var y=o.readString(),p=s.bones[o.readInt(!0)],u=new i.SlotData(g,y,p);i.Color.rgba8888ToColor(u.color,o.readInt32());var T=o.readInt32();T!=-1&&i.Color.rgb888ToColor(u.darkColor=new i.Color,T),u.attachmentName=o.readStringRef(),u.blendMode=a.BlendModeValues[o.readInt(!0)],s.slots.push(u)}f=o.readInt(!0);for(var g=0,P=void 0;g<f;g++){var u=new i.IkConstraintData(o.readString());u.order=o.readInt(!0),u.skinRequired=o.readBoolean(),P=o.readInt(!0);for(var x=0;x<P;x++)u.bones.push(s.bones[o.readInt(!0)]);u.target=s.bones[o.readInt(!0)],u.mix=o.readFloat(),u.softness=o.readFloat()*e,u.bendDirection=o.readByte(),u.compress=o.readBoolean(),u.stretch=o.readBoolean(),u.uniform=o.readBoolean(),s.ikConstraints.push(u)}f=o.readInt(!0);for(var g=0,P=void 0;g<f;g++){var u=new i.TransformConstraintData(o.readString());u.order=o.readInt(!0),u.skinRequired=o.readBoolean(),P=o.readInt(!0);for(var x=0;x<P;x++)u.bones.push(s.bones[o.readInt(!0)]);u.target=s.bones[o.readInt(!0)],u.local=o.readBoolean(),u.relative=o.readBoolean(),u.offsetRotation=o.readFloat(),u.offsetX=o.readFloat()*e,u.offsetY=o.readFloat()*e,u.offsetScaleX=o.readFloat(),u.offsetScaleY=o.readFloat(),u.offsetShearY=o.readFloat(),u.rotateMix=o.readFloat(),u.translateMix=o.readFloat(),u.scaleMix=o.readFloat(),u.shearMix=o.readFloat(),s.transformConstraints.push(u)}f=o.readInt(!0);for(var g=0,P=void 0;g<f;g++){var u=new i.PathConstraintData(o.readString());u.order=o.readInt(!0),u.skinRequired=o.readBoolean(),P=o.readInt(!0);for(var x=0;x<P;x++)u.bones.push(s.bones[o.readInt(!0)]);u.target=s.slots[o.readInt(!0)],u.positionMode=a.PositionModeValues[o.readInt(!0)],u.spacingMode=a.SpacingModeValues[o.readInt(!0)],u.rotateMode=a.RotateModeValues[o.readInt(!0)],u.offsetRotation=o.readFloat(),u.position=o.readFloat(),u.positionMode==i.PositionMode.Fixed&&(u.position*=e),u.spacing=o.readFloat(),(u.spacingMode==i.SpacingMode.Length||u.spacingMode==i.SpacingMode.Fixed)&&(u.spacing*=e),u.rotateMix=o.readFloat(),u.translateMix=o.readFloat(),s.pathConstraints.push(u)}var I=this.readSkin(o,s,!0,v);I!=null&&(s.defaultSkin=I,s.skins.push(I));{var g=s.skins.length;for(i.Utils.setArraySize(s.skins,f=g+o.readInt(!0));g<f;g++)s.skins[g]=this.readSkin(o,s,!1,v)}f=this.linkedMeshes.length;for(var g=0;g<f;g++){var w=this.linkedMeshes[g],l=w.skin==null?s.defaultSkin:s.findSkin(w.skin);if(l==null)throw new Error("Skin not found: "+w.skin);var E=l.getAttachment(w.slotIndex,w.parent);if(E==null)throw new Error("Parent mesh not found: "+w.parent);w.mesh.deformAttachment=w.inheritDeform?E:w.mesh,w.mesh.setParentMesh(E),w.mesh.updateUVs()}this.linkedMeshes.length=0,f=o.readInt(!0);for(var g=0;g<f;g++){var u=new i.EventData(o.readStringRef());u.intValue=o.readInt(!1),u.floatValue=o.readFloat(),u.stringValue=o.readString(),u.audioPath=o.readString(),u.audioPath!=null&&(u.volume=o.readFloat(),u.balance=o.readFloat()),s.events.push(u)}f=o.readInt(!0);for(var g=0;g<f;g++)s.animations.push(this.readAnimation(o,o.readString(),s));return s},a.prototype.readSkin=function(t,e,s,o){var v=null,f=0;if(s){if(f=t.readInt(!0),f==0)return null;v=new i.Skin("default")}else{v=new i.Skin(t.readStringRef()),v.bones.length=t.readInt(!0);for(var g=0,h=v.bones.length;g<h;g++)v.bones[g]=e.bones[t.readInt(!0)];for(var g=0,h=t.readInt(!0);g<h;g++)v.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var g=0,h=t.readInt(!0);g<h;g++)v.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var g=0,h=t.readInt(!0);g<h;g++)v.constraints.push(e.pathConstraints[t.readInt(!0)]);f=t.readInt(!0)}for(var g=0;g<f;g++)for(var c=t.readInt(!0),u=0,y=t.readInt(!0);u<y;u++){var p=t.readStringRef(),T=this.readAttachment(t,e,v,c,p,o);T!=null&&v.setAttachment(c,p,T)}return v},a.prototype.readAttachment=function(t,e,s,o,v,f){var g=this.scale,h=t.readStringRef();h==null&&(h=v);var c=t.readByte(),u=a.AttachmentTypeValues[c];switch(u){case i.AttachmentType.Region:{var y=t.readStringRef(),p=t.readFloat(),T=t.readFloat(),P=t.readFloat(),x=t.readFloat(),I=t.readFloat(),w=t.readFloat(),l=t.readFloat(),E=t.readInt32();y==null&&(y=h);var C=this.attachmentLoader.newRegionAttachment(s,h,y);return C==null?null:(C.path=y,C.x=T*g,C.y=P*g,C.scaleX=x,C.scaleY=I,C.rotation=p,C.width=w*g,C.height=l*g,i.Color.rgba8888ToColor(C.color,E),C.updateOffset(),C)}case i.AttachmentType.BoundingBox:{var S=t.readInt(!0),F=this.readVertices(t,S),E=f?t.readInt32():0,R=this.attachmentLoader.newBoundingBoxAttachment(s,h);return R==null?null:(R.worldVerticesLength=S<<1,R.vertices=F.vertices,R.bones=F.bones,f&&i.Color.rgba8888ToColor(R.color,E),R)}case i.AttachmentType.Mesh:{var y=t.readStringRef(),E=t.readInt32(),S=t.readInt(!0),V=this.readFloatArray(t,S<<1,1),N=this.readShortArray(t),F=this.readVertices(t,S),A=t.readInt(!0),d=null,w=0,l=0;f&&(d=this.readShortArray(t),w=t.readFloat(),l=t.readFloat()),y==null&&(y=h);var M=this.attachmentLoader.newMeshAttachment(s,h,y);return M==null?null:(M.path=y,i.Color.rgba8888ToColor(M.color,E),M.bones=F.bones,M.vertices=F.vertices,M.worldVerticesLength=S<<1,M.triangles=N,M.regionUVs=V,M.updateUVs(),M.hullLength=A<<1,f&&(M.edges=d,M.width=w*g,M.height=l*g),M)}case i.AttachmentType.LinkedMesh:{var y=t.readStringRef(),E=t.readInt32(),U=t.readStringRef(),b=t.readStringRef(),Y=t.readBoolean(),w=0,l=0;f&&(w=t.readFloat(),l=t.readFloat()),y==null&&(y=h);var M=this.attachmentLoader.newMeshAttachment(s,h,y);return M==null?null:(M.path=y,i.Color.rgba8888ToColor(M.color,E),f&&(M.width=w*g,M.height=l*g),this.linkedMeshes.push(new n(M,U,o,b,Y)),M)}case i.AttachmentType.Path:{for(var D=t.readBoolean(),O=t.readBoolean(),S=t.readInt(!0),F=this.readVertices(t,S),B=i.Utils.newArray(S/3,0),X=0,W=B.length;X<W;X++)B[X]=t.readFloat()*g;var E=f?t.readInt32():0,y=this.attachmentLoader.newPathAttachment(s,h);return y==null?null:(y.closed=D,y.constantSpeed=O,y.worldVerticesLength=S<<1,y.vertices=F.vertices,y.bones=F.bones,y.lengths=B,f&&i.Color.rgba8888ToColor(y.color,E),y)}case i.AttachmentType.Point:{var p=t.readFloat(),T=t.readFloat(),P=t.readFloat(),E=f?t.readInt32():0,k=this.attachmentLoader.newPointAttachment(s,h);return k==null?null:(k.x=T*g,k.y=P*g,k.rotation=p,f&&i.Color.rgba8888ToColor(k.color,E),k)}case i.AttachmentType.Clipping:{var _=t.readInt(!0),S=t.readInt(!0),F=this.readVertices(t,S),E=f?t.readInt32():0,q=this.attachmentLoader.newClippingAttachment(s,h);return q==null?null:(q.endSlot=e.slots[_],q.worldVerticesLength=S<<1,q.vertices=F.vertices,q.bones=F.bones,f&&i.Color.rgba8888ToColor(q.color,E),q)}}return null},a.prototype.readVertices=function(t,e){var s=e<<1,o=new r,v=this.scale;if(!t.readBoolean())return o.vertices=this.readFloatArray(t,s,v),o;for(var f=new Array,g=new Array,h=0;h<e;h++){var c=t.readInt(!0);g.push(c);for(var u=0;u<c;u++)g.push(t.readInt(!0)),f.push(t.readFloat()*v),f.push(t.readFloat()*v),f.push(t.readFloat())}return o.vertices=i.Utils.toFloatArray(f),o.bones=g,o},a.prototype.readFloatArray=function(t,e,s){var o=new Array(e);if(s==1)for(var v=0;v<e;v++)o[v]=t.readFloat();else for(var v=0;v<e;v++)o[v]=t.readFloat()*s;return o},a.prototype.readShortArray=function(t){for(var e=t.readInt(!0),s=new Array(e),o=0;o<e;o++)s[o]=t.readShort();return s},a.prototype.readAnimation=function(t,e,s){for(var o=new Array,v=this.scale,f=0,g=new i.Color,h=new i.Color,c=0,u=t.readInt(!0);c<u;c++)for(var y=t.readInt(!0),p=0,T=t.readInt(!0);p<T;p++){var P=t.readByte(),x=t.readInt(!0);switch(P){case a.SLOT_ATTACHMENT:{var I=new i.AttachmentTimeline(x);I.slotIndex=y;for(var w=0;w<x;w++)I.setFrame(w,t.readFloat(),t.readStringRef());o.push(I),f=Math.max(f,I.frames[x-1]);break}case a.SLOT_COLOR:{var I=new i.ColorTimeline(x);I.slotIndex=y;for(var w=0;w<x;w++){var l=t.readFloat();i.Color.rgba8888ToColor(g,t.readInt32()),I.setFrame(w,l,g.r,g.g,g.b,g.a),w<x-1&&this.readCurve(t,w,I)}o.push(I),f=Math.max(f,I.frames[(x-1)*i.ColorTimeline.ENTRIES]);break}case a.SLOT_TWO_COLOR:{var I=new i.TwoColorTimeline(x);I.slotIndex=y;for(var w=0;w<x;w++){var l=t.readFloat();i.Color.rgba8888ToColor(g,t.readInt32()),i.Color.rgb888ToColor(h,t.readInt32()),I.setFrame(w,l,g.r,g.g,g.b,g.a,h.r,h.g,h.b),w<x-1&&this.readCurve(t,w,I)}o.push(I),f=Math.max(f,I.frames[(x-1)*i.TwoColorTimeline.ENTRIES]);break}}}for(var c=0,u=t.readInt(!0);c<u;c++)for(var E=t.readInt(!0),p=0,T=t.readInt(!0);p<T;p++){var P=t.readByte(),x=t.readInt(!0);switch(P){case a.BONE_ROTATE:{var I=new i.RotateTimeline(x);I.boneIndex=E;for(var w=0;w<x;w++)I.setFrame(w,t.readFloat(),t.readFloat()),w<x-1&&this.readCurve(t,w,I);o.push(I),f=Math.max(f,I.frames[(x-1)*i.RotateTimeline.ENTRIES]);break}case a.BONE_TRANSLATE:case a.BONE_SCALE:case a.BONE_SHEAR:{var I=void 0,C=1;P==a.BONE_SCALE?I=new i.ScaleTimeline(x):P==a.BONE_SHEAR?I=new i.ShearTimeline(x):(I=new i.TranslateTimeline(x),C=v),I.boneIndex=E;for(var w=0;w<x;w++)I.setFrame(w,t.readFloat(),t.readFloat()*C,t.readFloat()*C),w<x-1&&this.readCurve(t,w,I);o.push(I),f=Math.max(f,I.frames[(x-1)*i.TranslateTimeline.ENTRIES]);break}}}for(var c=0,u=t.readInt(!0);c<u;c++){var S=t.readInt(!0),x=t.readInt(!0),I=new i.IkConstraintTimeline(x);I.ikConstraintIndex=S;for(var w=0;w<x;w++)I.setFrame(w,t.readFloat(),t.readFloat(),t.readFloat()*v,t.readByte(),t.readBoolean(),t.readBoolean()),w<x-1&&this.readCurve(t,w,I);o.push(I),f=Math.max(f,I.frames[(x-1)*i.IkConstraintTimeline.ENTRIES])}for(var c=0,u=t.readInt(!0);c<u;c++){var S=t.readInt(!0),x=t.readInt(!0),I=new i.TransformConstraintTimeline(x);I.transformConstraintIndex=S;for(var w=0;w<x;w++)I.setFrame(w,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),w<x-1&&this.readCurve(t,w,I);o.push(I),f=Math.max(f,I.frames[(x-1)*i.TransformConstraintTimeline.ENTRIES])}for(var c=0,u=t.readInt(!0);c<u;c++)for(var S=t.readInt(!0),F=s.pathConstraints[S],p=0,T=t.readInt(!0);p<T;p++){var P=t.readByte(),x=t.readInt(!0);switch(P){case a.PATH_POSITION:case a.PATH_SPACING:{var I=void 0,C=1;P==a.PATH_SPACING?(I=new i.PathConstraintSpacingTimeline(x),(F.spacingMode==i.SpacingMode.Length||F.spacingMode==i.SpacingMode.Fixed)&&(C=v)):(I=new i.PathConstraintPositionTimeline(x),F.positionMode==i.PositionMode.Fixed&&(C=v)),I.pathConstraintIndex=S;for(var w=0;w<x;w++)I.setFrame(w,t.readFloat(),t.readFloat()*C),w<x-1&&this.readCurve(t,w,I);o.push(I),f=Math.max(f,I.frames[(x-1)*i.PathConstraintPositionTimeline.ENTRIES]);break}case a.PATH_MIX:{var I=new i.PathConstraintMixTimeline(x);I.pathConstraintIndex=S;for(var w=0;w<x;w++)I.setFrame(w,t.readFloat(),t.readFloat(),t.readFloat()),w<x-1&&this.readCurve(t,w,I);o.push(I),f=Math.max(f,I.frames[(x-1)*i.PathConstraintMixTimeline.ENTRIES]);break}}}for(var c=0,u=t.readInt(!0);c<u;c++)for(var R=s.skins[t.readInt(!0)],p=0,T=t.readInt(!0);p<T;p++)for(var y=t.readInt(!0),V=0,N=t.readInt(!0);V<N;V++){var A=R.getAttachment(y,t.readStringRef()),d=A.bones!=null,M=A.vertices,U=d?M.length/3*2:M.length,x=t.readInt(!0),I=new i.DeformTimeline(x);I.slotIndex=y,I.attachment=A;for(var w=0;w<x;w++){var l=t.readFloat(),b=void 0,Y=t.readInt(!0);if(Y==0)b=d?i.Utils.newFloatArray(U):M;else{b=i.Utils.newFloatArray(U);var D=t.readInt(!0);if(Y+=D,v==1)for(var O=D;O<Y;O++)b[O]=t.readFloat();else for(var O=D;O<Y;O++)b[O]=t.readFloat()*v;if(!d)for(var O=0,B=b.length;O<B;O++)b[O]+=M[O]}I.setFrame(w,l,b),w<x-1&&this.readCurve(t,w,I)}o.push(I),f=Math.max(f,I.frames[x-1])}var X=t.readInt(!0);if(X>0){for(var I=new i.DrawOrderTimeline(X),W=s.slots.length,c=0;c<X;c++){for(var l=t.readFloat(),k=t.readInt(!0),_=i.Utils.newArray(W,0),p=W-1;p>=0;p--)_[p]=-1;for(var q=i.Utils.newArray(W-k,0),H=0,j=0,p=0;p<k;p++){for(var y=t.readInt(!0);H!=y;)q[j++]=H++;_[H+t.readInt(!0)]=H++}for(;H<W;)q[j++]=H++;for(var p=W-1;p>=0;p--)_[p]==-1&&(_[p]=q[--j]);I.setFrame(c,l,_)}o.push(I),f=Math.max(f,I.frames[X-1])}var Z=t.readInt(!0);if(Z>0){for(var I=new i.EventTimeline(Z),c=0;c<Z;c++){var l=t.readFloat(),K=s.events[t.readInt(!0)],G=new i.Event(l,K);G.intValue=t.readInt(!1),G.floatValue=t.readFloat(),G.stringValue=t.readBoolean()?t.readString():K.stringValue,G.data.audioPath!=null&&(G.volume=t.readFloat(),G.balance=t.readFloat()),I.setFrame(c,G)}o.push(I),f=Math.max(f,I.frames[Z-1])}return new i.Animation(e,o,f)},a.prototype.readCurve=function(t,e,s){switch(t.readByte()){case a.CURVE_STEPPED:s.setStepped(e);break;case a.CURVE_BEZIER:this.setCurve(s,e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat());break}},a.prototype.setCurve=function(t,e,s,o,v,f){t.setCurve(e,s,o,v,f)},a.AttachmentTypeValues=[0,1,2,3,4,5,6],a.TransformModeValues=[i.TransformMode.Normal,i.TransformMode.OnlyTranslation,i.TransformMode.NoRotationOrReflection,i.TransformMode.NoScale,i.TransformMode.NoScaleOrReflection],a.PositionModeValues=[i.PositionMode.Fixed,i.PositionMode.Percent],a.SpacingModeValues=[i.SpacingMode.Length,i.SpacingMode.Fixed,i.SpacingMode.Percent],a.RotateModeValues=[i.RotateMode.Tangent,i.RotateMode.Chain,i.RotateMode.ChainScale],a.BlendModeValues=[i.BlendMode.Normal,i.BlendMode.Additive,i.BlendMode.Multiply,i.BlendMode.Screen],a.BONE_ROTATE=0,a.BONE_TRANSLATE=1,a.BONE_SCALE=2,a.BONE_SHEAR=3,a.SLOT_ATTACHMENT=0,a.SLOT_COLOR=1,a.SLOT_TWO_COLOR=2,a.PATH_POSITION=0,a.PATH_SPACING=1,a.PATH_MIX=2,a.CURVE_LINEAR=0,a.CURVE_STEPPED=1,a.CURVE_BEZIER=2,a}();i.SkeletonBinary=L;var m=function(){function a(t,e,s,o){e===void 0&&(e=new Array),s===void 0&&(s=0),o===void 0&&(o=new DataView(t.buffer)),this.strings=e,this.index=s,this.buffer=o}return a.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},a.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},a.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},a.prototype.readInt=function(t){var e=this.readByte(),s=e&127;return(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<7,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<14,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<21,(e&128)!=0&&(e=this.readByte(),s|=(e&127)<<28)))),t?s:s>>>1^-(s&1)},a.prototype.readStringRef=function(){var t=this.readInt(!0);return t==0?null:this.strings[t-1]},a.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",s=0,o=0;o<t;){var v=this.readByte();switch(v>>4){case 12:case 13:e+=String.fromCharCode((v&31)<<6|this.readByte()&63),o+=2;break;case 14:e+=String.fromCharCode((v&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),o+=3;break;default:e+=String.fromCharCode(v),o++}}return e},a.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},a.prototype.readBoolean=function(){return this.readByte()!=0},a}(),n=function(){function a(t,e,s,o,v){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=o,this.inheritDeform=v}return a}(),r=function(){function a(t,e){t===void 0&&(t=null),e===void 0&&(e=null),this.bones=t,this.vertices=e}return a}()})(spine||(spine={}));var spine;(function(i){var L=function(){function m(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new i.Pool(function(){return i.Utils.newFloatArray(16)})}return m.prototype.update=function(n,r){if(n==null)throw new Error("skeleton cannot be null.");var a=this.boundingBoxes,t=this.polygons,e=this.polygonPool,s=n.slots,o=s.length;a.length=0,e.freeAll(t),t.length=0;for(var v=0;v<o;v++){var f=s[v];if(!!f.bone.active){var g=f.getAttachment();if(g instanceof i.BoundingBoxAttachment){var h=g;a.push(h);var c=e.obtain();c.length!=h.worldVerticesLength&&(c=i.Utils.newFloatArray(h.worldVerticesLength)),t.push(c),h.computeWorldVertices(f,0,h.worldVerticesLength,c,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},m.prototype.aabbCompute=function(){for(var n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,e=this.polygons,s=0,o=e.length;s<o;s++)for(var v=e[s],f=v,g=0,h=v.length;g<h;g+=2){var c=f[g],u=f[g+1];n=Math.min(n,c),r=Math.min(r,u),a=Math.max(a,c),t=Math.max(t,u)}this.minX=n,this.minY=r,this.maxX=a,this.maxY=t},m.prototype.aabbContainsPoint=function(n,r){return n>=this.minX&&n<=this.maxX&&r>=this.minY&&r<=this.maxY},m.prototype.aabbIntersectsSegment=function(n,r,a,t){var e=this.minX,s=this.minY,o=this.maxX,v=this.maxY;if(n<=e&&a<=e||r<=s&&t<=s||n>=o&&a>=o||r>=v&&t>=v)return!1;var f=(t-r)/(a-n),g=f*(e-n)+r;if(g>s&&g<v||(g=f*(o-n)+r,g>s&&g<v))return!0;var h=(s-r)/f+n;return!!(h>e&&h<o||(h=(v-r)/f+n,h>e&&h<o))},m.prototype.aabbIntersectsSkeleton=function(n){return this.minX<n.maxX&&this.maxX>n.minX&&this.minY<n.maxY&&this.maxY>n.minY},m.prototype.containsPoint=function(n,r){for(var a=this.polygons,t=0,e=a.length;t<e;t++)if(this.containsPointPolygon(a[t],n,r))return this.boundingBoxes[t];return null},m.prototype.containsPointPolygon=function(n,r,a){for(var t=n,e=n.length,s=e-2,o=!1,v=0;v<e;v+=2){var f=t[v+1],g=t[s+1];if(f<a&&g>=a||g<a&&f>=a){var h=t[v];h+(a-f)/(g-f)*(t[s]-h)<r&&(o=!o)}s=v}return o},m.prototype.intersectsSegment=function(n,r,a,t){for(var e=this.polygons,s=0,o=e.length;s<o;s++)if(this.intersectsSegmentPolygon(e[s],n,r,a,t))return this.boundingBoxes[s];return null},m.prototype.intersectsSegmentPolygon=function(n,r,a,t,e){for(var s=n,o=n.length,v=r-t,f=a-e,g=r*e-a*t,h=s[o-2],c=s[o-1],u=0;u<o;u+=2){var y=s[u],p=s[u+1],T=h*p-c*y,P=h-y,x=c-p,I=v*x-f*P,w=(g*P-v*T)/I;if((w>=h&&w<=y||w>=y&&w<=h)&&(w>=r&&w<=t||w>=t&&w<=r)){var l=(g*x-f*T)/I;if((l>=c&&l<=p||l>=p&&l<=c)&&(l>=a&&l<=e||l>=e&&l<=a))return!0}h=y,c=p}return!1},m.prototype.getPolygon=function(n){if(n==null)throw new Error("boundingBox cannot be null.");var r=this.boundingBoxes.indexOf(n);return r==-1?null:this.polygons[r]},m.prototype.getWidth=function(){return this.maxX-this.minX},m.prototype.getHeight=function(){return this.maxY-this.minY},m}();i.SkeletonBounds=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(){this.triangulator=new i.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return m.prototype.clipStart=function(n,r){if(this.clipAttachment!=null)return 0;this.clipAttachment=r;var a=r.worldVerticesLength,t=i.Utils.setArraySize(this.clippingPolygon,a);r.computeWorldVertices(n,0,a,t,0,2);var e=this.clippingPolygon;m.makeClockwise(e);for(var s=this.clippingPolygons=this.triangulator.decompose(e,this.triangulator.triangulate(e)),o=0,v=s.length;o<v;o++){var f=s[o];m.makeClockwise(f),f.push(f[0]),f.push(f[1])}return s.length},m.prototype.clipEndWithSlot=function(n){this.clipAttachment!=null&&this.clipAttachment.endSlot==n.data&&this.clipEnd()},m.prototype.clipEnd=function(){this.clipAttachment!=null&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},m.prototype.isClipping=function(){return this.clipAttachment!=null},m.prototype.clipTriangles=function(n,r,a,t,e,s,o,v){var f=this.clipOutput,g=this.clippedVertices,h=this.clippedTriangles,c=this.clippingPolygons,u=this.clippingPolygons.length,y=v?12:8,p=0;g.length=0,h.length=0;t:for(var T=0;T<t;T+=3){var P=a[T]<<1,x=n[P],I=n[P+1],w=e[P],l=e[P+1];P=a[T+1]<<1;var E=n[P],C=n[P+1],S=e[P],F=e[P+1];P=a[T+2]<<1;for(var R=n[P],V=n[P+1],N=e[P],A=e[P+1],d=0;d<u;d++){var M=g.length;if(this.clip(x,I,E,C,R,V,c[d],f)){var U=f.length;if(U==0)continue;for(var b=C-V,Y=R-E,D=x-R,O=V-I,B=1/(b*D+Y*(I-V)),X=U>>1,W=this.clipOutput,k=i.Utils.setArraySize(g,M+X*y),_=0;_<U;_+=2){var q=W[_],H=W[_+1];k[M]=q,k[M+1]=H,k[M+2]=s.r,k[M+3]=s.g,k[M+4]=s.b,k[M+5]=s.a;var j=q-R,Z=H-V,K=(b*j+Y*Z)*B,G=(O*j+D*Z)*B,z=1-K-G;k[M+6]=w*K+S*G+N*z,k[M+7]=l*K+F*G+A*z,v&&(k[M+8]=o.r,k[M+9]=o.g,k[M+10]=o.b,k[M+11]=o.a),M+=y}M=h.length;var J=i.Utils.setArraySize(h,M+3*(X-2));X--;for(var _=1;_<X;_++)J[M]=p,J[M+1]=p+_,J[M+2]=p+_+1,M+=3;p+=X+1}else{var k=i.Utils.setArraySize(g,M+3*y);k[M]=x,k[M+1]=I,k[M+2]=s.r,k[M+3]=s.g,k[M+4]=s.b,k[M+5]=s.a,v?(k[M+6]=w,k[M+7]=l,k[M+8]=o.r,k[M+9]=o.g,k[M+10]=o.b,k[M+11]=o.a,k[M+12]=E,k[M+13]=C,k[M+14]=s.r,k[M+15]=s.g,k[M+16]=s.b,k[M+17]=s.a,k[M+18]=S,k[M+19]=F,k[M+20]=o.r,k[M+21]=o.g,k[M+22]=o.b,k[M+23]=o.a,k[M+24]=R,k[M+25]=V,k[M+26]=s.r,k[M+27]=s.g,k[M+28]=s.b,k[M+29]=s.a,k[M+30]=N,k[M+31]=A,k[M+32]=o.r,k[M+33]=o.g,k[M+34]=o.b,k[M+35]=o.a):(k[M+6]=w,k[M+7]=l,k[M+8]=E,k[M+9]=C,k[M+10]=s.r,k[M+11]=s.g,k[M+12]=s.b,k[M+13]=s.a,k[M+14]=S,k[M+15]=F,k[M+16]=R,k[M+17]=V,k[M+18]=s.r,k[M+19]=s.g,k[M+20]=s.b,k[M+21]=s.a,k[M+22]=N,k[M+23]=A),M=h.length;var J=i.Utils.setArraySize(h,M+3);J[M]=p,J[M+1]=p+1,J[M+2]=p+2,p+=3;continue t}}}},m.prototype.clip=function(n,r,a,t,e,s,o,v){var f=v,g=!1,h=null;o.length%4>=2?(h=v,v=this.scratch):h=this.scratch,h.length=0,h.push(n),h.push(r),h.push(a),h.push(t),h.push(e),h.push(s),h.push(n),h.push(r),v.length=0;for(var c=o,u=o.length-4,y=0;;y+=2){for(var p=c[y],T=c[y+1],P=c[y+2],x=c[y+3],I=p-P,w=T-x,l=h,E=h.length-2,C=v.length,S=0;S<E;S+=2){var F=l[S],R=l[S+1],V=l[S+2],N=l[S+3],A=I*(N-x)-w*(V-P)>0;if(I*(R-x)-w*(F-P)>0){if(A){v.push(V),v.push(N);continue}var d=N-R,M=V-F,U=d*(P-p)-M*(x-T);if(Math.abs(U)>1e-6){var b=(M*(T-R)-d*(p-F))/U;v.push(p+(P-p)*b),v.push(T+(x-T)*b)}else v.push(p),v.push(T)}else if(A){var d=N-R,M=V-F,U=d*(P-p)-M*(x-T);if(Math.abs(U)>1e-6){var b=(M*(T-R)-d*(p-F))/U;v.push(p+(P-p)*b),v.push(T+(x-T)*b)}else v.push(p),v.push(T);v.push(V),v.push(N)}g=!0}if(C==v.length)return f.length=0,!0;if(v.push(v[0]),v.push(v[1]),y==u)break;var Y=v;v=h,v.length=0,h=Y}if(f!=v){f.length=0;for(var y=0,D=v.length-2;y<D;y++)f[y]=v[y]}else f.length=f.length-2;return g},m.makeClockwise=function(n){for(var r=n,a=n.length,t=r[a-2]*r[1]-r[0]*r[a-1],e=0,s=0,o=0,v=0,f=0,g=a-3;f<g;f+=2)e=r[f],s=r[f+1],o=r[f+2],v=r[f+3],t+=e*v-o*s;if(!(t<0))for(var f=0,h=a-2,g=a>>1;f<g;f+=2){var c=r[f],u=r[f+1],y=h-f;r[f]=r[y],r[f+1]=r[y+1],r[y]=c,r[y+1]=u}},m}();i.SkeletonClipping=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return m.prototype.findBone=function(n){if(n==null)throw new Error("boneName cannot be null.");for(var r=this.bones,a=0,t=r.length;a<t;a++){var e=r[a];if(e.name==n)return e}return null},m.prototype.findBoneIndex=function(n){if(n==null)throw new Error("boneName cannot be null.");for(var r=this.bones,a=0,t=r.length;a<t;a++)if(r[a].name==n)return a;return-1},m.prototype.findSlot=function(n){if(n==null)throw new Error("slotName cannot be null.");for(var r=this.slots,a=0,t=r.length;a<t;a++){var e=r[a];if(e.name==n)return e}return null},m.prototype.findSlotIndex=function(n){if(n==null)throw new Error("slotName cannot be null.");for(var r=this.slots,a=0,t=r.length;a<t;a++)if(r[a].name==n)return a;return-1},m.prototype.findSkin=function(n){if(n==null)throw new Error("skinName cannot be null.");for(var r=this.skins,a=0,t=r.length;a<t;a++){var e=r[a];if(e.name==n)return e}return null},m.prototype.findEvent=function(n){if(n==null)throw new Error("eventDataName cannot be null.");for(var r=this.events,a=0,t=r.length;a<t;a++){var e=r[a];if(e.name==n)return e}return null},m.prototype.findAnimation=function(n){if(n==null)throw new Error("animationName cannot be null.");for(var r=this.animations,a=0,t=r.length;a<t;a++){var e=r[a];if(e.name==n)return e}return null},m.prototype.findIkConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,a=0,t=r.length;a<t;a++){var e=r[a];if(e.name==n)return e}return null},m.prototype.findTransformConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,a=0,t=r.length;a<t;a++){var e=r[a];if(e.name==n)return e}return null},m.prototype.findPathConstraint=function(n){if(n==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,a=0,t=r.length;a<t;a++){var e=r[a];if(e.name==n)return e}return null},m.prototype.findPathConstraintIndex=function(n){if(n==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,a=0,t=r.length;a<t;a++)if(r[a].name==n)return a;return-1},m}();i.SkeletonData=L})(spine||(spine={}));var spine;(function(i){var L=function(){function n(r){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=r}return n.prototype.readSkeletonData=function(r){var a=this.scale,t=new i.SkeletonData,e=typeof r=="string"?JSON.parse(r):r,s=e.skeleton;if(s!=null){if(t.hash=s.hash,t.version=s.spine,t.version=="3.8.75")throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");t.x=s.x,t.y=s.y,t.width=s.width,t.height=s.height,t.fps=s.fps,t.imagesPath=s.images}if(e.bones)for(var o=0;o<e.bones.length;o++){var v=e.bones[o],f=null,g=this.getValue(v,"parent",null);if(g!=null&&(f=t.findBone(g),f==null))throw new Error("Parent bone not found: "+g);var h=new i.BoneData(t.bones.length,v.name,f);h.length=this.getValue(v,"length",0)*a,h.x=this.getValue(v,"x",0)*a,h.y=this.getValue(v,"y",0)*a,h.rotation=this.getValue(v,"rotation",0),h.scaleX=this.getValue(v,"scaleX",1),h.scaleY=this.getValue(v,"scaleY",1),h.shearX=this.getValue(v,"shearX",0),h.shearY=this.getValue(v,"shearY",0),h.transformMode=n.transformModeFromString(this.getValue(v,"transform","normal")),h.skinRequired=this.getValue(v,"skin",!1),t.bones.push(h)}if(e.slots)for(var o=0;o<e.slots.length;o++){var c=e.slots[o],u=c.name,y=c.bone,p=t.findBone(y);if(p==null)throw new Error("Slot bone not found: "+y);var h=new i.SlotData(t.slots.length,u,p),T=this.getValue(c,"color",null);T!=null&&h.color.setFromString(T);var P=this.getValue(c,"dark",null);P!=null&&(h.darkColor=new i.Color(1,1,1,1),h.darkColor.setFromString(P)),h.attachmentName=this.getValue(c,"attachment",null),h.blendMode=n.blendModeFromString(this.getValue(c,"blend","normal")),t.slots.push(h)}if(e.ik)for(var o=0;o<e.ik.length;o++){var x=e.ik[o],h=new i.IkConstraintData(x.name);h.order=this.getValue(x,"order",0),h.skinRequired=this.getValue(x,"skin",!1);for(var I=0;I<x.bones.length;I++){var y=x.bones[I],w=t.findBone(y);if(w==null)throw new Error("IK bone not found: "+y);h.bones.push(w)}var l=x.target;if(h.target=t.findBone(l),h.target==null)throw new Error("IK target bone not found: "+l);h.mix=this.getValue(x,"mix",1),h.softness=this.getValue(x,"softness",0)*a,h.bendDirection=this.getValue(x,"bendPositive",!0)?1:-1,h.compress=this.getValue(x,"compress",!1),h.stretch=this.getValue(x,"stretch",!1),h.uniform=this.getValue(x,"uniform",!1),t.ikConstraints.push(h)}if(e.transform)for(var o=0;o<e.transform.length;o++){var x=e.transform[o],h=new i.TransformConstraintData(x.name);h.order=this.getValue(x,"order",0),h.skinRequired=this.getValue(x,"skin",!1);for(var I=0;I<x.bones.length;I++){var y=x.bones[I],w=t.findBone(y);if(w==null)throw new Error("Transform constraint bone not found: "+y);h.bones.push(w)}var l=x.target;if(h.target=t.findBone(l),h.target==null)throw new Error("Transform constraint target bone not found: "+l);h.local=this.getValue(x,"local",!1),h.relative=this.getValue(x,"relative",!1),h.offsetRotation=this.getValue(x,"rotation",0),h.offsetX=this.getValue(x,"x",0)*a,h.offsetY=this.getValue(x,"y",0)*a,h.offsetScaleX=this.getValue(x,"scaleX",0),h.offsetScaleY=this.getValue(x,"scaleY",0),h.offsetShearY=this.getValue(x,"shearY",0),h.rotateMix=this.getValue(x,"rotateMix",1),h.translateMix=this.getValue(x,"translateMix",1),h.scaleMix=this.getValue(x,"scaleMix",1),h.shearMix=this.getValue(x,"shearMix",1),t.transformConstraints.push(h)}if(e.path)for(var o=0;o<e.path.length;o++){var x=e.path[o],h=new i.PathConstraintData(x.name);h.order=this.getValue(x,"order",0),h.skinRequired=this.getValue(x,"skin",!1);for(var I=0;I<x.bones.length;I++){var y=x.bones[I],w=t.findBone(y);if(w==null)throw new Error("Transform constraint bone not found: "+y);h.bones.push(w)}var l=x.target;if(h.target=t.findSlot(l),h.target==null)throw new Error("Path target slot not found: "+l);h.positionMode=n.positionModeFromString(this.getValue(x,"positionMode","percent")),h.spacingMode=n.spacingModeFromString(this.getValue(x,"spacingMode","length")),h.rotateMode=n.rotateModeFromString(this.getValue(x,"rotateMode","tangent")),h.offsetRotation=this.getValue(x,"rotation",0),h.position=this.getValue(x,"position",0),h.positionMode==i.PositionMode.Fixed&&(h.position*=a),h.spacing=this.getValue(x,"spacing",0),(h.spacingMode==i.SpacingMode.Length||h.spacingMode==i.SpacingMode.Fixed)&&(h.spacing*=a),h.rotateMix=this.getValue(x,"rotateMix",1),h.translateMix=this.getValue(x,"translateMix",1),t.pathConstraints.push(h)}if(e.skins)for(var o=0;o<e.skins.length;o++){var E=e.skins[o],C=new i.Skin(E.name);if(E.bones)for(var S=0;S<E.bones.length;S++){var w=t.findBone(E.bones[S]);if(w==null)throw new Error("Skin bone not found: "+E.bones[o]);C.bones.push(w)}if(E.ik)for(var S=0;S<E.ik.length;S++){var F=t.findIkConstraint(E.ik[S]);if(F==null)throw new Error("Skin IK constraint not found: "+E.ik[o]);C.constraints.push(F)}if(E.transform)for(var S=0;S<E.transform.length;S++){var F=t.findTransformConstraint(E.transform[S]);if(F==null)throw new Error("Skin transform constraint not found: "+E.transform[o]);C.constraints.push(F)}if(E.path)for(var S=0;S<E.path.length;S++){var F=t.findPathConstraint(E.path[S]);if(F==null)throw new Error("Skin path constraint not found: "+E.path[o]);C.constraints.push(F)}for(var u in E.attachments){var R=t.findSlot(u);if(R==null)throw new Error("Slot not found: "+u);var c=E.attachments[u];for(var V in c){var N=this.readAttachment(c[V],C,R.index,V,t);N!=null&&C.setAttachment(R.index,V,N)}}t.skins.push(C),C.name=="default"&&(t.defaultSkin=C)}for(var o=0,A=this.linkedMeshes.length;o<A;o++){var d=this.linkedMeshes[o],C=d.skin==null?t.defaultSkin:t.findSkin(d.skin);if(C==null)throw new Error("Skin not found: "+d.skin);var M=C.getAttachment(d.slotIndex,d.parent);if(M==null)throw new Error("Parent mesh not found: "+d.parent);d.mesh.deformAttachment=d.inheritDeform?M:d.mesh,d.mesh.setParentMesh(M),d.mesh.updateUVs()}if(this.linkedMeshes.length=0,e.events)for(var U in e.events){var b=e.events[U],h=new i.EventData(U);h.intValue=this.getValue(b,"int",0),h.floatValue=this.getValue(b,"float",0),h.stringValue=this.getValue(b,"string",""),h.audioPath=this.getValue(b,"audio",null),h.audioPath!=null&&(h.volume=this.getValue(b,"volume",1),h.balance=this.getValue(b,"balance",0)),t.events.push(h)}if(e.animations)for(var Y in e.animations){var D=e.animations[Y];this.readAnimation(D,Y,t)}return t},n.prototype.readAttachment=function(r,a,t,e,s){var o=this.scale;e=this.getValue(r,"name",e);var v=this.getValue(r,"type","region");switch(v){case"region":{var f=this.getValue(r,"path",e),g=this.attachmentLoader.newRegionAttachment(a,e,f);if(g==null)return null;g.path=f,g.x=this.getValue(r,"x",0)*o,g.y=this.getValue(r,"y",0)*o,g.scaleX=this.getValue(r,"scaleX",1),g.scaleY=this.getValue(r,"scaleY",1),g.rotation=this.getValue(r,"rotation",0),g.width=r.width*o,g.height=r.height*o;var h=this.getValue(r,"color",null);return h!=null&&g.color.setFromString(h),g.updateOffset(),g}case"boundingbox":{var c=this.attachmentLoader.newBoundingBoxAttachment(a,e);if(c==null)return null;this.readVertices(r,c,r.vertexCount<<1);var h=this.getValue(r,"color",null);return h!=null&&c.color.setFromString(h),c}case"mesh":case"linkedmesh":{var f=this.getValue(r,"path",e),u=this.attachmentLoader.newMeshAttachment(a,e,f);if(u==null)return null;u.path=f;var h=this.getValue(r,"color",null);h!=null&&u.color.setFromString(h),u.width=this.getValue(r,"width",0)*o,u.height=this.getValue(r,"height",0)*o;var y=this.getValue(r,"parent",null);if(y!=null)return this.linkedMeshes.push(new m(u,this.getValue(r,"skin",null),t,y,this.getValue(r,"deform",!0))),u;var p=r.uvs;return this.readVertices(r,u,p.length),u.triangles=r.triangles,u.regionUVs=p,u.updateUVs(),u.edges=this.getValue(r,"edges",null),u.hullLength=this.getValue(r,"hull",0)*2,u}case"path":{var f=this.attachmentLoader.newPathAttachment(a,e);if(f==null)return null;f.closed=this.getValue(r,"closed",!1),f.constantSpeed=this.getValue(r,"constantSpeed",!0);var T=r.vertexCount;this.readVertices(r,f,T<<1);for(var P=i.Utils.newArray(T/3,0),x=0;x<r.lengths.length;x++)P[x]=r.lengths[x]*o;f.lengths=P;var h=this.getValue(r,"color",null);return h!=null&&f.color.setFromString(h),f}case"point":{var I=this.attachmentLoader.newPointAttachment(a,e);if(I==null)return null;I.x=this.getValue(r,"x",0)*o,I.y=this.getValue(r,"y",0)*o,I.rotation=this.getValue(r,"rotation",0);var h=this.getValue(r,"color",null);return h!=null&&I.color.setFromString(h),I}case"clipping":{var w=this.attachmentLoader.newClippingAttachment(a,e);if(w==null)return null;var l=this.getValue(r,"end",null);if(l!=null){var E=s.findSlot(l);if(E==null)throw new Error("Clipping end slot not found: "+l);w.endSlot=E}var T=r.vertexCount;this.readVertices(r,w,T<<1);var h=this.getValue(r,"color",null);return h!=null&&w.color.setFromString(h),w}}return null},n.prototype.readVertices=function(r,a,t){var e=this.scale;a.worldVerticesLength=t;var s=r.vertices;if(t==s.length){var o=i.Utils.toFloatArray(s);if(e!=1)for(var v=0,f=s.length;v<f;v++)o[v]*=e;a.vertices=o;return}for(var g=new Array,h=new Array,v=0,f=s.length;v<f;){var c=s[v++];h.push(c);for(var u=v+c*4;v<u;v+=4)h.push(s[v]),g.push(s[v+1]*e),g.push(s[v+2]*e),g.push(s[v+3])}a.bones=h,a.vertices=i.Utils.toFloatArray(g)},n.prototype.readAnimation=function(r,a,t){var e=this.scale,s=new Array,o=0;if(r.slots)for(var v in r.slots){var f=r.slots[v],g=t.findSlotIndex(v);if(g==-1)throw new Error("Slot not found: "+v);for(var h in f){var c=f[h];if(h=="attachment"){var u=new i.AttachmentTimeline(c.length);u.slotIndex=g;for(var y=0,p=0;p<c.length;p++){var T=c[p];u.setFrame(y++,this.getValue(T,"time",0),T.name)}s.push(u),o=Math.max(o,u.frames[u.getFrameCount()-1])}else if(h=="color"){var u=new i.ColorTimeline(c.length);u.slotIndex=g;for(var y=0,p=0;p<c.length;p++){var T=c[p],P=new i.Color;P.setFromString(T.color),u.setFrame(y,this.getValue(T,"time",0),P.r,P.g,P.b,P.a),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*i.ColorTimeline.ENTRIES])}else if(h=="twoColor"){var u=new i.TwoColorTimeline(c.length);u.slotIndex=g;for(var y=0,p=0;p<c.length;p++){var T=c[p],x=new i.Color,I=new i.Color;x.setFromString(T.light),I.setFromString(T.dark),u.setFrame(y,this.getValue(T,"time",0),x.r,x.g,x.b,x.a,I.r,I.g,I.b),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*i.TwoColorTimeline.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+h+" ("+v+")")}}if(r.bones)for(var w in r.bones){var l=r.bones[w],E=t.findBoneIndex(w);if(E==-1)throw new Error("Bone not found: "+w);for(var h in l){var c=l[h];if(h==="rotate"){var u=new i.RotateTimeline(c.length);u.boneIndex=E;for(var y=0,p=0;p<c.length;p++){var T=c[p];u.setFrame(y,this.getValue(T,"time",0),this.getValue(T,"angle",0)),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*i.RotateTimeline.ENTRIES])}else if(h==="translate"||h==="scale"||h==="shear"){var u=null,C=1,S=0;h==="scale"?(u=new i.ScaleTimeline(c.length),S=1):h==="shear"?u=new i.ShearTimeline(c.length):(u=new i.TranslateTimeline(c.length),C=e),u.boneIndex=E;for(var y=0,p=0;p<c.length;p++){var T=c[p],F=this.getValue(T,"x",S),R=this.getValue(T,"y",S);u.setFrame(y,this.getValue(T,"time",0),F*C,R*C),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*i.TranslateTimeline.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+h+" ("+w+")")}}if(r.ik)for(var V in r.ik){var N=r.ik[V],A=t.findIkConstraint(V),u=new i.IkConstraintTimeline(N.length);u.ikConstraintIndex=t.ikConstraints.indexOf(A);for(var y=0,p=0;p<N.length;p++){var T=N[p];u.setFrame(y,this.getValue(T,"time",0),this.getValue(T,"mix",1),this.getValue(T,"softness",0)*e,this.getValue(T,"bendPositive",!0)?1:-1,this.getValue(T,"compress",!1),this.getValue(T,"stretch",!1)),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*i.IkConstraintTimeline.ENTRIES])}if(r.transform)for(var V in r.transform){var N=r.transform[V],A=t.findTransformConstraint(V),u=new i.TransformConstraintTimeline(N.length);u.transformConstraintIndex=t.transformConstraints.indexOf(A);for(var y=0,p=0;p<N.length;p++){var T=N[p];u.setFrame(y,this.getValue(T,"time",0),this.getValue(T,"rotateMix",1),this.getValue(T,"translateMix",1),this.getValue(T,"scaleMix",1),this.getValue(T,"shearMix",1)),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*i.TransformConstraintTimeline.ENTRIES])}if(r.path)for(var V in r.path){var N=r.path[V],d=t.findPathConstraintIndex(V);if(d==-1)throw new Error("Path constraint not found: "+V);var M=t.pathConstraints[d];for(var h in N){var c=N[h];if(h==="position"||h==="spacing"){var u=null,C=1;h==="spacing"?(u=new i.PathConstraintSpacingTimeline(c.length),(M.spacingMode==i.SpacingMode.Length||M.spacingMode==i.SpacingMode.Fixed)&&(C=e)):(u=new i.PathConstraintPositionTimeline(c.length),M.positionMode==i.PositionMode.Fixed&&(C=e)),u.pathConstraintIndex=d;for(var y=0,p=0;p<c.length;p++){var T=c[p];u.setFrame(y,this.getValue(T,"time",0),this.getValue(T,h,0)*C),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*i.PathConstraintPositionTimeline.ENTRIES])}else if(h==="mix"){var u=new i.PathConstraintMixTimeline(c.length);u.pathConstraintIndex=d;for(var y=0,p=0;p<c.length;p++){var T=c[p];u.setFrame(y,this.getValue(T,"time",0),this.getValue(T,"rotateMix",1),this.getValue(T,"translateMix",1)),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*i.PathConstraintMixTimeline.ENTRIES])}}}if(r.deform)for(var U in r.deform){var b=r.deform[U],Y=t.findSkin(U);if(Y==null)throw new Error("Skin not found: "+U);for(var v in b){var f=b[v],g=t.findSlotIndex(v);if(g==-1)throw new Error("Slot not found: "+f.name);for(var h in f){var c=f[h],D=Y.getAttachment(g,h);if(D==null)throw new Error("Deform attachment not found: "+c.name);var O=D.bones!=null,B=D.vertices,X=O?B.length/3*2:B.length,u=new i.DeformTimeline(c.length);u.slotIndex=g,u.attachment=D;for(var y=0,W=0;W<c.length;W++){var T=c[W],k=void 0,_=this.getValue(T,"vertices",null);if(_==null)k=O?i.Utils.newFloatArray(X):B;else{k=i.Utils.newFloatArray(X);var q=this.getValue(T,"offset",0);if(i.Utils.arrayCopy(_,0,k,q,_.length),e!=1)for(var p=q,H=p+_.length;p<H;p++)k[p]*=e;if(!O)for(var p=0;p<X;p++)k[p]+=B[p]}u.setFrame(y,this.getValue(T,"time",0),k),this.readCurve(T,u,y),y++}s.push(u),o=Math.max(o,u.frames[u.getFrameCount()-1])}}}var j=r.drawOrder;if(j==null&&(j=r.draworder),j!=null){for(var u=new i.DrawOrderTimeline(j.length),Z=t.slots.length,y=0,W=0;W<j.length;W++){var K=j[W],G=null,z=this.getValue(K,"offsets",null);if(z!=null){G=i.Utils.newArray(Z,-1);for(var J=i.Utils.newArray(Z-z.length,0),at=0,et=0,p=0;p<z.length;p++){var $=z[p],g=t.findSlotIndex($.slot);if(g==-1)throw new Error("Slot not found: "+$.slot);for(;at!=g;)J[et++]=at++;G[at+$.offset]=at++}for(;at<Z;)J[et++]=at++;for(var p=Z-1;p>=0;p--)G[p]==-1&&(G[p]=J[--et])}u.setFrame(y++,this.getValue(K,"time",0),G)}s.push(u),o=Math.max(o,u.frames[u.getFrameCount()-1])}if(r.events){for(var u=new i.EventTimeline(r.events.length),y=0,p=0;p<r.events.length;p++){var nt=r.events[p],tt=t.findEvent(nt.name);if(tt==null)throw new Error("Event not found: "+nt.name);var rt=new i.Event(i.Utils.toSinglePrecision(this.getValue(nt,"time",0)),tt);rt.intValue=this.getValue(nt,"int",tt.intValue),rt.floatValue=this.getValue(nt,"float",tt.floatValue),rt.stringValue=this.getValue(nt,"string",tt.stringValue),rt.data.audioPath!=null&&(rt.volume=this.getValue(nt,"volume",1),rt.balance=this.getValue(nt,"balance",0)),u.setFrame(y++,rt)}s.push(u),o=Math.max(o,u.frames[u.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");t.animations.push(new i.Animation(a,s,o))},n.prototype.readCurve=function(r,a,t){if(!!r.hasOwnProperty("curve"))if(r.curve=="stepped")a.setStepped(t);else{var e=r.curve;a.setCurve(t,e,this.getValue(r,"c2",0),this.getValue(r,"c3",1),this.getValue(r,"c4",1))}},n.prototype.getValue=function(r,a,t){return r[a]!==void 0?r[a]:t},n.blendModeFromString=function(r){if(r=r.toLowerCase(),r=="normal")return i.BlendMode.Normal;if(r=="additive")return i.BlendMode.Additive;if(r=="multiply")return i.BlendMode.Multiply;if(r=="screen")return i.BlendMode.Screen;throw new Error("Unknown blend mode: "+r)},n.positionModeFromString=function(r){if(r=r.toLowerCase(),r=="fixed")return i.PositionMode.Fixed;if(r=="percent")return i.PositionMode.Percent;throw new Error("Unknown position mode: "+r)},n.spacingModeFromString=function(r){if(r=r.toLowerCase(),r=="length")return i.SpacingMode.Length;if(r=="fixed")return i.SpacingMode.Fixed;if(r=="percent")return i.SpacingMode.Percent;throw new Error("Unknown position mode: "+r)},n.rotateModeFromString=function(r){if(r=r.toLowerCase(),r=="tangent")return i.RotateMode.Tangent;if(r=="chain")return i.RotateMode.Chain;if(r=="chainscale")return i.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+r)},n.transformModeFromString=function(r){if(r=r.toLowerCase(),r=="normal")return i.TransformMode.Normal;if(r=="onlytranslation")return i.TransformMode.OnlyTranslation;if(r=="norotationorreflection")return i.TransformMode.NoRotationOrReflection;if(r=="noscale")return i.TransformMode.NoScale;if(r=="noscaleorreflection")return i.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+r)},n}();i.SkeletonJson=L;var m=function(){function n(r,a,t,e,s){this.mesh=r,this.skin=a,this.slotIndex=t,this.parent=e,this.inheritDeform=s}return n}()})(spine||(spine={}));var spine;(function(i){var L=function(){function n(r,a,t){this.slotIndex=r,this.name=a,this.attachment=t}return n}();i.SkinEntry=L;var m=function(){function n(r){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,r==null)throw new Error("name cannot be null.");this.name=r}return n.prototype.setAttachment=function(r,a,t){if(t==null)throw new Error("attachment cannot be null.");var e=this.attachments;r>=e.length&&(e.length=r+1),e[r]||(e[r]={}),e[r][a]=t},n.prototype.addSkin=function(r){for(var a=0;a<r.bones.length;a++){for(var t=r.bones[a],e=!1,s=0;s<this.bones.length;s++)if(this.bones[s]==t){e=!0;break}e||this.bones.push(t)}for(var a=0;a<r.constraints.length;a++){for(var o=r.constraints[a],e=!1,s=0;s<this.constraints.length;s++)if(this.constraints[s]==o){e=!0;break}e||this.constraints.push(o)}for(var v=r.getAttachments(),a=0;a<v.length;a++){var f=v[a];this.setAttachment(f.slotIndex,f.name,f.attachment)}},n.prototype.copySkin=function(r){for(var a=0;a<r.bones.length;a++){for(var t=r.bones[a],e=!1,s=0;s<this.bones.length;s++)if(this.bones[s]==t){e=!0;break}e||this.bones.push(t)}for(var a=0;a<r.constraints.length;a++){for(var o=r.constraints[a],e=!1,s=0;s<this.constraints.length;s++)if(this.constraints[s]==o){e=!0;break}e||this.constraints.push(o)}for(var v=r.getAttachments(),a=0;a<v.length;a++){var f=v[a];f.attachment!=null&&(f.attachment instanceof i.MeshAttachment?(f.attachment=f.attachment.newLinkedMesh(),this.setAttachment(f.slotIndex,f.name,f.attachment)):(f.attachment=f.attachment.copy(),this.setAttachment(f.slotIndex,f.name,f.attachment)))}},n.prototype.getAttachment=function(r,a){var t=this.attachments[r];return t?t[a]:null},n.prototype.removeAttachment=function(r,a){var t=this.attachments[r];t&&(t[a]=null)},n.prototype.getAttachments=function(){for(var r=new Array,a=0;a<this.attachments.length;a++){var t=this.attachments[a];if(t)for(var e in t){var s=t[e];s&&r.push(new L(a,e,s))}}return r},n.prototype.getAttachmentsForSlot=function(r,a){var t=this.attachments[r];if(t)for(var e in t){var s=t[e];s&&a.push(new L(r,e,s))}},n.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},n.prototype.attachAll=function(r,a){for(var t=0,e=0;e<r.slots.length;e++){var s=r.slots[e],o=s.getAttachment();if(o&&t<a.attachments.length){var v=a.attachments[t];for(var f in v){var g=v[f];if(o==g){var h=this.getAttachment(t,f);h!=null&&s.setAttachment(h);break}}}t++}},n}();i.Skin=m})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r){if(this.deform=new Array,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=n,this.bone=r,this.color=new i.Color,this.darkColor=n.darkColor==null?null:new i.Color,this.setToSetupPose()}return m.prototype.getSkeleton=function(){return this.bone.skeleton},m.prototype.getAttachment=function(){return this.attachment},m.prototype.setAttachment=function(n){this.attachment!=n&&(this.attachment=n,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},m.prototype.setAttachmentTime=function(n){this.attachmentTime=this.bone.skeleton.time-n},m.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},m.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},m}();i.Slot=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r,a){if(this.color=new i.Color(1,1,1,1),n<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(a==null)throw new Error("boneData cannot be null.");this.index=n,this.name=r,this.boneData=a}return m}();i.SlotData=L})(spine||(spine={}));var spine;(function(i){var L=function(){function t(e){this._image=e}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(e){switch(e.toLowerCase()){case"nearest":return m.Nearest;case"linear":return m.Linear;case"mipmap":return m.MipMap;case"mipmapnearestnearest":return m.MipMapNearestNearest;case"mipmaplinearnearest":return m.MipMapLinearNearest;case"mipmapnearestlinear":return m.MipMapNearestLinear;case"mipmaplinearlinear":return m.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+e)}},t.wrapFromString=function(e){switch(e.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+e)}},t}();i.Texture=L;var m;(function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"})(m=i.TextureFilter||(i.TextureFilter={}));var n;(function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"})(n=i.TextureWrap||(i.TextureWrap={}));var r=function(){function t(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}return t}();i.TextureRegion=r;var a=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setFilters=function(s,o){},e.prototype.setWraps=function(s,o){},e.prototype.dispose=function(){},e}(L);i.FakeTexture=a})(spine||(spine={}));var spine;(function(i){var L=function(){function a(t,e){this.pages=new Array,this.regions=new Array,this.load(t,e)}return a.prototype.load=function(t,e){if(e==null)throw new Error("textureLoader cannot be null.");for(var s=new m(t),o=new Array(4),v=null;;){var f=s.readLine();if(f==null)break;if(f=f.trim(),f.length==0)v=null;else if(v){var h=new r;h.name=f,h.page=v;var c=s.readValue();c.toLocaleLowerCase()=="true"?h.degrees=90:c.toLocaleLowerCase()=="false"?h.degrees=0:h.degrees=parseFloat(c),h.rotate=h.degrees==90,s.readTuple(o);var u=parseInt(o[0]),y=parseInt(o[1]);s.readTuple(o);var p=parseInt(o[0]),T=parseInt(o[1]);h.u=u/v.width,h.v=y/v.height,h.rotate?(h.u2=(u+T)/v.width,h.v2=(y+p)/v.height):(h.u2=(u+p)/v.width,h.v2=(y+T)/v.height),h.x=u,h.y=y,h.width=Math.abs(p),h.height=Math.abs(T),s.readTuple(o)==4&&s.readTuple(o)==4&&s.readTuple(o),h.originalWidth=parseInt(o[0]),h.originalHeight=parseInt(o[1]),s.readTuple(o),h.offsetX=parseInt(o[0]),h.offsetY=parseInt(o[1]),h.index=parseInt(s.readValue()),h.texture=v.texture,this.regions.push(h)}else{v=new n,v.name=f,s.readTuple(o)==2&&(v.width=parseInt(o[0]),v.height=parseInt(o[1]),s.readTuple(o)),s.readTuple(o),v.minFilter=i.Texture.filterFromString(o[0]),v.magFilter=i.Texture.filterFromString(o[1]);var g=s.readValue();v.uWrap=i.TextureWrap.ClampToEdge,v.vWrap=i.TextureWrap.ClampToEdge,g=="x"?v.uWrap=i.TextureWrap.Repeat:g=="y"?v.vWrap=i.TextureWrap.Repeat:g=="xy"&&(v.uWrap=v.vWrap=i.TextureWrap.Repeat),v.texture=e(f),v.texture.setFilters(v.minFilter,v.magFilter),v.texture.setWraps(v.uWrap,v.vWrap),v.width=v.texture.getImage().width,v.height=v.texture.getImage().height,this.pages.push(v)}}},a.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},a.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},a}();i.TextureAtlas=L;var m=function(){function a(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return a.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},a.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(e==-1)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},a.prototype.readTuple=function(t){var e=this.readLine(),s=e.indexOf(":");if(s==-1)throw new Error("Invalid line: "+e);for(var o=0,v=s+1;o<3;o++){var f=e.indexOf(",",v);if(f==-1)break;t[o]=e.substr(v,f-v).trim(),v=f+1}return t[o]=e.substring(v).trim(),o+1},a}(),n=function(){function a(){}return a}();i.TextureAtlasPage=n;var r=function(a){__extends(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t}(i.TextureRegion);i.TextureAtlasRegion=r})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new i.Vector2,this.active=!1,n==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=n,this.rotateMix=n.rotateMix,this.translateMix=n.translateMix,this.scaleMix=n.scaleMix,this.shearMix=n.shearMix,this.bones=new Array;for(var a=0;a<n.bones.length;a++)this.bones.push(r.findBone(n.bones[a].name));this.target=r.findBone(n.target.name)}return m.prototype.isActive=function(){return this.active},m.prototype.apply=function(){this.update()},m.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},m.prototype.applyAbsoluteWorld=function(){for(var n=this.rotateMix,r=this.translateMix,a=this.scaleMix,t=this.shearMix,e=this.target,s=e.a,o=e.b,v=e.c,f=e.d,g=s*f-o*v>0?i.MathUtils.degRad:-i.MathUtils.degRad,h=this.data.offsetRotation*g,c=this.data.offsetShearY*g,u=this.bones,y=0,p=u.length;y<p;y++){var T=u[y],P=!1;if(n!=0){var x=T.a,I=T.b,w=T.c,l=T.d,E=Math.atan2(v,s)-Math.atan2(w,x)+h;E>i.MathUtils.PI?E-=i.MathUtils.PI2:E<-i.MathUtils.PI&&(E+=i.MathUtils.PI2),E*=n;var C=Math.cos(E),S=Math.sin(E);T.a=C*x-S*w,T.b=C*I-S*l,T.c=S*x+C*w,T.d=S*I+C*l,P=!0}if(r!=0){var F=this.temp;e.localToWorld(F.set(this.data.offsetX,this.data.offsetY)),T.worldX+=(F.x-T.worldX)*r,T.worldY+=(F.y-T.worldY)*r,P=!0}if(a>0){var R=Math.sqrt(T.a*T.a+T.c*T.c),V=Math.sqrt(s*s+v*v);R>1e-5&&(R=(R+(V-R+this.data.offsetScaleX)*a)/R),T.a*=R,T.c*=R,R=Math.sqrt(T.b*T.b+T.d*T.d),V=Math.sqrt(o*o+f*f),R>1e-5&&(R=(R+(V-R+this.data.offsetScaleY)*a)/R),T.b*=R,T.d*=R,P=!0}if(t>0){var I=T.b,l=T.d,N=Math.atan2(l,I),E=Math.atan2(f,o)-Math.atan2(v,s)-(N-Math.atan2(T.c,T.a));E>i.MathUtils.PI?E-=i.MathUtils.PI2:E<-i.MathUtils.PI&&(E+=i.MathUtils.PI2),E=N+(E+c)*t;var R=Math.sqrt(I*I+l*l);T.b=Math.cos(E)*R,T.d=Math.sin(E)*R,P=!0}P&&(T.appliedValid=!1)}},m.prototype.applyRelativeWorld=function(){for(var n=this.rotateMix,r=this.translateMix,a=this.scaleMix,t=this.shearMix,e=this.target,s=e.a,o=e.b,v=e.c,f=e.d,g=s*f-o*v>0?i.MathUtils.degRad:-i.MathUtils.degRad,h=this.data.offsetRotation*g,c=this.data.offsetShearY*g,u=this.bones,y=0,p=u.length;y<p;y++){var T=u[y],P=!1;if(n!=0){var x=T.a,I=T.b,w=T.c,l=T.d,E=Math.atan2(v,s)+h;E>i.MathUtils.PI?E-=i.MathUtils.PI2:E<-i.MathUtils.PI&&(E+=i.MathUtils.PI2),E*=n;var C=Math.cos(E),S=Math.sin(E);T.a=C*x-S*w,T.b=C*I-S*l,T.c=S*x+C*w,T.d=S*I+C*l,P=!0}if(r!=0){var F=this.temp;e.localToWorld(F.set(this.data.offsetX,this.data.offsetY)),T.worldX+=F.x*r,T.worldY+=F.y*r,P=!0}if(a>0){var R=(Math.sqrt(s*s+v*v)-1+this.data.offsetScaleX)*a+1;T.a*=R,T.c*=R,R=(Math.sqrt(o*o+f*f)-1+this.data.offsetScaleY)*a+1,T.b*=R,T.d*=R,P=!0}if(t>0){var E=Math.atan2(f,o)-Math.atan2(v,s);E>i.MathUtils.PI?E-=i.MathUtils.PI2:E<-i.MathUtils.PI&&(E+=i.MathUtils.PI2);var I=T.b,l=T.d;E=Math.atan2(l,I)+(E-i.MathUtils.PI/2+c)*t;var R=Math.sqrt(I*I+l*l);T.b=Math.cos(E)*R,T.d=Math.sin(E)*R,P=!0}P&&(T.appliedValid=!1)}},m.prototype.applyAbsoluteLocal=function(){var n=this.rotateMix,r=this.translateMix,a=this.scaleMix,t=this.shearMix,e=this.target;e.appliedValid||e.updateAppliedTransform();for(var s=this.bones,o=0,v=s.length;o<v;o++){var f=s[o];f.appliedValid||f.updateAppliedTransform();var g=f.arotation;if(n!=0){var h=e.arotation-g+this.data.offsetRotation;h-=(16384-(16384.499999999996-h/360|0))*360,g+=h*n}var c=f.ax,u=f.ay;r!=0&&(c+=(e.ax-c+this.data.offsetX)*r,u+=(e.ay-u+this.data.offsetY)*r);var y=f.ascaleX,p=f.ascaleY;a!=0&&(y>1e-5&&(y=(y+(e.ascaleX-y+this.data.offsetScaleX)*a)/y),p>1e-5&&(p=(p+(e.ascaleY-p+this.data.offsetScaleY)*a)/p));var T=f.ashearY;if(t!=0){var h=e.ashearY-T+this.data.offsetShearY;h-=(16384-(16384.499999999996-h/360|0))*360,f.shearY+=h*t}f.updateWorldTransformWith(c,u,g,y,p,f.ashearX,T)}},m.prototype.applyRelativeLocal=function(){var n=this.rotateMix,r=this.translateMix,a=this.scaleMix,t=this.shearMix,e=this.target;e.appliedValid||e.updateAppliedTransform();for(var s=this.bones,o=0,v=s.length;o<v;o++){var f=s[o];f.appliedValid||f.updateAppliedTransform();var g=f.arotation;n!=0&&(g+=(e.arotation+this.data.offsetRotation)*n);var h=f.ax,c=f.ay;r!=0&&(h+=(e.ax+this.data.offsetX)*r,c+=(e.ay+this.data.offsetY)*r);var u=f.ascaleX,y=f.ascaleY;a!=0&&(u>1e-5&&(u*=(e.ascaleX-1+this.data.offsetScaleX)*a+1),y>1e-5&&(y*=(e.ascaleY-1+this.data.offsetScaleY)*a+1));var p=f.ashearY;t!=0&&(p+=(e.ashearY+this.data.offsetShearY)*t),f.updateWorldTransformWith(h,c,g,u,y,f.ashearX,p)}},m}();i.TransformConstraint=L})(spine||(spine={}));var spine;(function(i){var L=function(m){__extends(n,m);function n(r){var a=m.call(this,r,0,!1)||this;return a.bones=new Array,a.rotateMix=0,a.translateMix=0,a.scaleMix=0,a.shearMix=0,a.offsetRotation=0,a.offsetX=0,a.offsetY=0,a.offsetScaleX=0,a.offsetScaleY=0,a.offsetShearY=0,a.relative=!1,a.local=!1,a}return n}(i.ConstraintData);i.TransformConstraintData=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new i.Pool(function(){return new Array}),this.polygonIndicesPool=new i.Pool(function(){return new Array})}return m.prototype.triangulate=function(n){var r=n,a=n.length>>1,t=this.indicesArray;t.length=0;for(var e=0;e<a;e++)t[e]=e;var s=this.isConcaveArray;s.length=0;for(var e=0,o=a;e<o;++e)s[e]=m.isConcave(e,a,r,t);var v=this.triangles;for(v.length=0;a>3;){for(var f=a-1,e=0,g=1;;){t:if(!s[e]){for(var h=t[f]<<1,c=t[e]<<1,u=t[g]<<1,y=r[h],p=r[h+1],T=r[c],P=r[c+1],x=r[u],I=r[u+1],w=(g+1)%a;w!=f;w=(w+1)%a)if(!!s[w]){var l=t[w]<<1,E=r[l],C=r[l+1];if(m.positiveArea(x,I,y,p,E,C)&&m.positiveArea(y,p,T,P,E,C)&&m.positiveArea(T,P,x,I,E,C))break t}break}if(g==0){do{if(!s[e])break;e--}while(e>0);break}f=e,e=g,g=(g+1)%a}v.push(t[(a+e-1)%a]),v.push(t[e]),v.push(t[(e+1)%a]),t.splice(e,1),s.splice(e,1),a--;var S=(a+e-1)%a,F=e==a?0:e;s[S]=m.isConcave(S,a,r,t),s[F]=m.isConcave(F,a,r,t)}return a==3&&(v.push(t[2]),v.push(t[0]),v.push(t[1])),v},m.prototype.decompose=function(n,r){var a=n,t=this.convexPolygons;this.polygonPool.freeAll(t),t.length=0;var e=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(e),e.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var o=this.polygonPool.obtain();o.length=0;for(var v=-1,f=0,g=0,h=r.length;g<h;g+=3){var c=r[g]<<1,u=r[g+1]<<1,y=r[g+2]<<1,p=a[c],T=a[c+1],P=a[u],x=a[u+1],I=a[y],w=a[y+1],l=!1;if(v==c){var E=o.length-4,C=m.winding(o[E],o[E+1],o[E+2],o[E+3],I,w),S=m.winding(I,w,o[0],o[1],o[2],o[3]);C==f&&S==f&&(o.push(I),o.push(w),s.push(y),l=!0)}l||(o.length>0?(t.push(o),e.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),o=this.polygonPool.obtain(),o.length=0,o.push(p),o.push(T),o.push(P),o.push(x),o.push(I),o.push(w),s=this.polygonIndicesPool.obtain(),s.length=0,s.push(c),s.push(u),s.push(y),f=m.winding(p,T,P,x,I,w),v=c)}o.length>0&&(t.push(o),e.push(s));for(var g=0,h=t.length;g<h;g++)if(s=e[g],s.length!=0){var F=s[0],R=s[s.length-1];o=t[g];for(var E=o.length-4,V=o[E],N=o[E+1],A=o[E+2],d=o[E+3],M=o[0],U=o[1],b=o[2],Y=o[3],D=m.winding(V,N,A,d,M,U),O=0;O<h;O++)if(O!=g){var B=e[O];if(B.length==3){var X=B[0],W=B[1],k=B[2],_=t[O],I=_[_.length-2],w=_[_.length-1];if(!(X!=F||W!=R)){var C=m.winding(V,N,A,d,I,w),S=m.winding(I,w,M,U,b,Y);C==D&&S==D&&(_.length=0,B.length=0,o.push(I),o.push(w),s.push(k),V=A,N=d,A=I,d=w,O=0)}}}}for(var g=t.length-1;g>=0;g--)o=t[g],o.length==0&&(t.splice(g,1),this.polygonPool.free(o),s=e[g],e.splice(g,1),this.polygonIndicesPool.free(s));return t},m.isConcave=function(n,r,a,t){var e=t[(r+n-1)%r]<<1,s=t[n]<<1,o=t[(n+1)%r]<<1;return!this.positiveArea(a[e],a[e+1],a[s],a[s+1],a[o],a[o+1])},m.positiveArea=function(n,r,a,t,e,s){return n*(s-t)+a*(r-s)+e*(t-r)>=0},m.winding=function(n,r,a,t,e,s){var o=a-n,v=t-r;return e*v-s*o+o*r-n*v>=0?1:-1},m}();i.Triangulator=L})(spine||(spine={}));var spine;(function(i){var L=function(){function h(){this.array=new Array}return h.prototype.add=function(c){var u=this.contains(c);return this.array[c|0]=c|0,!u},h.prototype.contains=function(c){return this.array[c|0]!=null},h.prototype.remove=function(c){this.array[c|0]=void 0},h.prototype.clear=function(){this.array.length=0},h}();i.IntSet=L;var m=function(){function h(c,u,y,p){c===void 0&&(c=0),u===void 0&&(u=0),y===void 0&&(y=0),p===void 0&&(p=0),this.r=c,this.g=u,this.b=y,this.a=p}return h.prototype.set=function(c,u,y,p){return this.r=c,this.g=u,this.b=y,this.a=p,this.clamp(),this},h.prototype.setFromColor=function(c){return this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this},h.prototype.setFromString=function(c){return c=c.charAt(0)=="#"?c.substr(1):c,this.r=parseInt(c.substr(0,2),16)/255,this.g=parseInt(c.substr(2,2),16)/255,this.b=parseInt(c.substr(4,2),16)/255,this.a=(c.length!=8?255:parseInt(c.substr(6,2),16))/255,this},h.prototype.add=function(c,u,y,p){return this.r+=c,this.g+=u,this.b+=y,this.a+=p,this.clamp(),this},h.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},h.rgba8888ToColor=function(c,u){c.r=((u&4278190080)>>>24)/255,c.g=((u&16711680)>>>16)/255,c.b=((u&65280)>>>8)/255,c.a=(u&255)/255},h.rgb888ToColor=function(c,u){c.r=((u&16711680)>>>16)/255,c.g=((u&65280)>>>8)/255,c.b=(u&255)/255},h.WHITE=new h(1,1,1,1),h.RED=new h(1,0,0,1),h.GREEN=new h(0,1,0,1),h.BLUE=new h(0,0,1,1),h.MAGENTA=new h(1,0,1,1),h}();i.Color=m;var n=function(){function h(){}return h.clamp=function(c,u,y){return c<u?u:c>y?y:c},h.cosDeg=function(c){return Math.cos(c*h.degRad)},h.sinDeg=function(c){return Math.sin(c*h.degRad)},h.signum=function(c){return c>0?1:c<0?-1:0},h.toInt=function(c){return c>0?Math.floor(c):Math.ceil(c)},h.cbrt=function(c){var u=Math.pow(Math.abs(c),1/3);return c<0?-u:u},h.randomTriangular=function(c,u){return h.randomTriangularWith(c,u,(c+u)*.5)},h.randomTriangularWith=function(c,u,y){var p=Math.random(),T=u-c;return p<=(y-c)/T?c+Math.sqrt(p*T*(y-c)):u-Math.sqrt((1-p)*T*(u-y))},h.PI=3.1415927,h.PI2=h.PI*2,h.radiansToDegrees=180/h.PI,h.radDeg=h.radiansToDegrees,h.degreesToRadians=h.PI/180,h.degRad=h.degreesToRadians,h}();i.MathUtils=n;var r=function(){function h(){}return h.prototype.apply=function(c,u,y){return c+(u-c)*this.applyInternal(y)},h}();i.Interpolation=r;var a=function(h){__extends(c,h);function c(u){var y=h.call(this)||this;return y.power=2,y.power=u,y}return c.prototype.applyInternal=function(u){return u<=.5?Math.pow(u*2,this.power)/2:Math.pow((u-1)*2,this.power)/(this.power%2==0?-2:2)+1},c}(r);i.Pow=a;var t=function(h){__extends(c,h);function c(u){return h.call(this,u)||this}return c.prototype.applyInternal=function(u){return Math.pow(u-1,this.power)*(this.power%2==0?-1:1)+1},c}(a);i.PowOut=t;var e=function(){function h(){}return h.arrayCopy=function(c,u,y,p,T){for(var P=u,x=p;P<u+T;P++,x++)y[x]=c[P]},h.setArraySize=function(c,u,y){y===void 0&&(y=0);var p=c.length;if(p==u)return c;if(c.length=u,p<u)for(var T=p;T<u;T++)c[T]=y;return c},h.ensureArrayCapacity=function(c,u,y){return y===void 0&&(y=0),c.length>=u?c:h.setArraySize(c,u,y)},h.newArray=function(c,u){for(var y=new Array(c),p=0;p<c;p++)y[p]=u;return y},h.newFloatArray=function(c){if(h.SUPPORTS_TYPED_ARRAYS)return new Float32Array(c);for(var u=new Array(c),y=0;y<u.length;y++)u[y]=0;return u},h.newShortArray=function(c){if(h.SUPPORTS_TYPED_ARRAYS)return new Int16Array(c);for(var u=new Array(c),y=0;y<u.length;y++)u[y]=0;return u},h.toFloatArray=function(c){return h.SUPPORTS_TYPED_ARRAYS?new Float32Array(c):c},h.toSinglePrecision=function(c){return h.SUPPORTS_TYPED_ARRAYS?Math.fround(c):c},h.webkit602BugfixHelper=function(c,u){},h.contains=function(c,u,y){y===void 0&&(y=!0);for(var p=0;p<c.length;p++)if(c[p]==u)return!0;return!1},h.SUPPORTS_TYPED_ARRAYS=typeof Float32Array!="undefined",h}();i.Utils=e;var s=function(){function h(){}return h.logBones=function(c){for(var u=0;u<c.bones.length;u++){var y=c.bones[u];console.log(y.data.name+", "+y.a+", "+y.b+", "+y.c+", "+y.d+", "+y.worldX+", "+y.worldY)}},h}();i.DebugUtils=s;var o=function(){function h(c){this.items=new Array,this.instantiator=c}return h.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},h.prototype.free=function(c){c.reset&&c.reset(),this.items.push(c)},h.prototype.freeAll=function(c){for(var u=0;u<c.length;u++)this.free(c[u])},h.prototype.clear=function(){this.items.length=0},h}();i.Pool=o;var v=function(){function h(c,u){c===void 0&&(c=0),u===void 0&&(u=0),this.x=c,this.y=u}return h.prototype.set=function(c,u){return this.x=c,this.y=u,this},h.prototype.length=function(){var c=this.x,u=this.y;return Math.sqrt(c*c+u*u)},h.prototype.normalize=function(){var c=this.length();return c!=0&&(this.x/=c,this.y/=c),this},h}();i.Vector2=v;var f=function(){function h(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return h.prototype.update=function(){var c=Date.now()/1e3;this.delta=c-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=c,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},h}();i.TimeKeeper=f;var g=function(){function h(c){c===void 0&&(c=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(c)}return h.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},h.prototype.addValue=function(c){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=c,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},h.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var c=0,u=0;u<this.values.length;u++)c+=this.values[u];this.mean=c/this.values.length,this.dirty=!1}return this.mean}else return 0},h}();i.WindowedMean=g})(spine||(spine={})),function(){Math.fround||(Math.fround=function(i){return function(L){return i[0]=L,i[0]}}(new Float32Array(1)))}();var spine;(function(i){var L=function(){function n(r){if(r==null)throw new Error("name cannot be null.");this.name=r}return n}();i.Attachment=L;var m=function(n){__extends(r,n);function r(a){var t=n.call(this,a)||this;return t.id=(r.nextID++&65535)<<11,t.worldVerticesLength=0,t.deformAttachment=t,t}return r.prototype.computeWorldVertices=function(a,t,e,s,o,v){e=o+(e>>1)*v;var f=a.bone.skeleton,g=a.deform,h=this.vertices,c=this.bones;if(c==null){g.length>0&&(h=g);for(var u=a.bone,y=u.worldX,p=u.worldY,T=u.a,P=u.b,x=u.c,I=u.d,w=t,l=o;l<e;w+=2,l+=v){var E=h[w],C=h[w+1];s[l]=E*T+C*P+y,s[l+1]=E*x+C*I+p}return}for(var S=0,F=0,R=0;R<t;R+=2){var V=c[S];S+=V+1,F+=V}var N=f.bones;if(g.length==0)for(var l=o,P=F*3;l<e;l+=v){var A=0,d=0,V=c[S++];for(V+=S;S<V;S++,P+=3){var u=N[c[S]],E=h[P],C=h[P+1],M=h[P+2];A+=(E*u.a+C*u.b+u.worldX)*M,d+=(E*u.c+C*u.d+u.worldY)*M}s[l]=A,s[l+1]=d}else for(var U=g,l=o,P=F*3,b=F<<1;l<e;l+=v){var A=0,d=0,V=c[S++];for(V+=S;S<V;S++,P+=3,b+=2){var u=N[c[S]],E=h[P]+U[b],C=h[P+1]+U[b+1],M=h[P+2];A+=(E*u.a+C*u.b+u.worldX)*M,d+=(E*u.c+C*u.d+u.worldY)*M}s[l]=A,s[l+1]=d}},r.prototype.copyTo=function(a){this.bones!=null?(a.bones=new Array(this.bones.length),i.Utils.arrayCopy(this.bones,0,a.bones,0,this.bones.length)):a.bones=null,this.vertices!=null?(a.vertices=i.Utils.newFloatArray(this.vertices.length),i.Utils.arrayCopy(this.vertices,0,a.vertices,0,this.vertices.length)):a.vertices=null,a.worldVerticesLength=this.worldVerticesLength,a.deformAttachment=this.deformAttachment},r.nextID=0,r}(L);i.VertexAttachment=m})(spine||(spine={}));var spine;(function(i){var L;(function(m){m[m.Region=0]="Region",m[m.BoundingBox=1]="BoundingBox",m[m.Mesh=2]="Mesh",m[m.LinkedMesh=3]="LinkedMesh",m[m.Path=4]="Path",m[m.Point=5]="Point",m[m.Clipping=6]="Clipping"})(L=i.AttachmentType||(i.AttachmentType={}))})(spine||(spine={}));var spine;(function(i){var L=function(m){__extends(n,m);function n(r){var a=m.call(this,r)||this;return a.color=new i.Color(1,1,1,1),a}return n.prototype.copy=function(){var r=new n(this.name);return this.copyTo(r),r.color.setFromColor(this.color),r},n}(i.VertexAttachment);i.BoundingBoxAttachment=L})(spine||(spine={}));var spine;(function(i){var L=function(m){__extends(n,m);function n(r){var a=m.call(this,r)||this;return a.color=new i.Color(.2275,.2275,.8078,1),a}return n.prototype.copy=function(){var r=new n(this.name);return this.copyTo(r),r.endSlot=this.endSlot,r.color.setFromColor(this.color),r},n}(i.VertexAttachment);i.ClippingAttachment=L})(spine||(spine={}));var spine;(function(i){var L=function(m){__extends(n,m);function n(r){var a=m.call(this,r)||this;return a.color=new i.Color(1,1,1,1),a.tempColor=new i.Color(0,0,0,0),a}return n.prototype.updateUVs=function(){var r=this.regionUVs;(this.uvs==null||this.uvs.length!=r.length)&&(this.uvs=i.Utils.newFloatArray(r.length));var a=this.uvs,t=this.uvs.length,e=this.region.u,s=this.region.v,o=0,v=0;if(this.region instanceof i.TextureAtlasRegion){var f=this.region,g=f.texture.getImage().width,h=f.texture.getImage().height;switch(f.degrees){case 90:e-=(f.originalHeight-f.offsetY-f.height)/g,s-=(f.originalWidth-f.offsetX-f.width)/h,o=f.originalHeight/g,v=f.originalWidth/h;for(var c=0;c<t;c+=2)a[c]=e+r[c+1]*o,a[c+1]=s+(1-r[c])*v;return;case 180:e-=(f.originalWidth-f.offsetX-f.width)/g,s-=f.offsetY/h,o=f.originalWidth/g,v=f.originalHeight/h;for(var c=0;c<t;c+=2)a[c]=e+(1-r[c])*o,a[c+1]=s+(1-r[c+1])*v;return;case 270:e-=f.offsetY/g,s-=f.offsetX/h,o=f.originalHeight/g,v=f.originalWidth/h;for(var c=0;c<t;c+=2)a[c]=e+(1-r[c+1])*o,a[c+1]=s+r[c]*v;return}e-=f.offsetX/g,s-=(f.originalHeight-f.offsetY-f.height)/h,o=f.originalWidth/g,v=f.originalHeight/h}else this.region==null?(e=s=0,o=v=1):(o=this.region.u2-e,v=this.region.v2-s);for(var c=0;c<t;c+=2)a[c]=e+r[c]*o,a[c+1]=s+r[c+1]*v},n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(r){this.parentMesh=r,r!=null&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},n.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var r=new n(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Array(this.regionUVs.length),i.Utils.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.uvs=new Array(this.uvs.length),i.Utils.arrayCopy(this.uvs,0,r.uvs,0,this.uvs.length),r.triangles=new Array(this.triangles.length),i.Utils.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,this.edges!=null&&(r.edges=new Array(this.edges.length),i.Utils.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},n.prototype.newLinkedMesh=function(){var r=new n(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),r.deformAttachment=this.deformAttachment,r.setParentMesh(this.parentMesh!=null?this.parentMesh:this),r.updateUVs(),r},n}(i.VertexAttachment);i.MeshAttachment=L})(spine||(spine={}));var spine;(function(i){var L=function(m){__extends(n,m);function n(r){var a=m.call(this,r)||this;return a.closed=!1,a.constantSpeed=!1,a.color=new i.Color(1,1,1,1),a}return n.prototype.copy=function(){var r=new n(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),i.Utils.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},n}(i.VertexAttachment);i.PathAttachment=L})(spine||(spine={}));var spine;(function(i){var L=function(m){__extends(n,m);function n(r){var a=m.call(this,r)||this;return a.color=new i.Color(.38,.94,0,1),a}return n.prototype.computeWorldPosition=function(r,a){return a.x=this.x*r.a+this.y*r.b+r.worldX,a.y=this.x*r.c+this.y*r.d+r.worldY,a},n.prototype.computeWorldRotation=function(r){var a=i.MathUtils.cosDeg(this.rotation),t=i.MathUtils.sinDeg(this.rotation),e=a*r.a+t*r.b,s=a*r.c+t*r.d;return Math.atan2(s,e)*i.MathUtils.radDeg},n.prototype.copy=function(){var r=new n(this.name);return r.x=this.x,r.y=this.y,r.rotation=this.rotation,r.color.setFromColor(this.color),r},n}(i.VertexAttachment);i.PointAttachment=L})(spine||(spine={}));var spine;(function(i){var L=function(m){__extends(n,m);function n(r){var a=m.call(this,r)||this;return a.x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new i.Color(1,1,1,1),a.offset=i.Utils.newFloatArray(8),a.uvs=i.Utils.newFloatArray(8),a.tempColor=new i.Color(1,1,1,1),a}return n.prototype.updateOffset=function(){var r=this.width/this.region.originalWidth*this.scaleX,a=this.height/this.region.originalHeight*this.scaleY,t=-this.width/2*this.scaleX+this.region.offsetX*r,e=-this.height/2*this.scaleY+this.region.offsetY*a,s=t+this.region.width*r,o=e+this.region.height*a,v=this.rotation*Math.PI/180,f=Math.cos(v),g=Math.sin(v),h=t*f+this.x,c=t*g,u=e*f+this.y,y=e*g,p=s*f+this.x,T=s*g,P=o*f+this.y,x=o*g,I=this.offset;I[n.OX1]=h-y,I[n.OY1]=u+c,I[n.OX2]=h-x,I[n.OY2]=P+c,I[n.OX3]=p-x,I[n.OY3]=P+T,I[n.OX4]=p-y,I[n.OY4]=u+T},n.prototype.setRegion=function(r){this.region=r;var a=this.uvs;r.rotate?(a[2]=r.u,a[3]=r.v2,a[4]=r.u,a[5]=r.v,a[6]=r.u2,a[7]=r.v,a[0]=r.u2,a[1]=r.v2):(a[0]=r.u,a[1]=r.v2,a[2]=r.u,a[3]=r.v,a[4]=r.u2,a[5]=r.v,a[6]=r.u2,a[7]=r.v2)},n.prototype.computeWorldVertices=function(r,a,t,e){var s=this.offset,o=r.worldX,v=r.worldY,f=r.a,g=r.b,h=r.c,c=r.d,u=0,y=0;u=s[n.OX1],y=s[n.OY1],a[t]=u*f+y*g+o,a[t+1]=u*h+y*c+v,t+=e,u=s[n.OX2],y=s[n.OY2],a[t]=u*f+y*g+o,a[t+1]=u*h+y*c+v,t+=e,u=s[n.OX3],y=s[n.OY3],a[t]=u*f+y*g+o,a[t+1]=u*h+y*c+v,t+=e,u=s[n.OX4],y=s[n.OY4],a[t]=u*f+y*g+o,a[t+1]=u*h+y*c+v},n.prototype.copy=function(){var r=new n(this.name);return r.region=this.region,r.rendererObject=this.rendererObject,r.path=this.path,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,i.Utils.arrayCopy(this.uvs,0,r.uvs,0,8),i.Utils.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r},n.OX1=0,n.OY1=1,n.OX2=2,n.OY2=3,n.OX3=4,n.OY3=5,n.OX4=6,n.OY4=7,n.X1=0,n.Y1=1,n.C1R=2,n.C1G=3,n.C1B=4,n.C1A=5,n.U1=6,n.V1=7,n.X2=8,n.Y2=9,n.C2R=10,n.C2G=11,n.C2B=12,n.C2A=13,n.U2=14,n.V2=15,n.X3=16,n.Y3=17,n.C3R=18,n.C3G=19,n.C3B=20,n.C3A=21,n.U3=22,n.V3=23,n.X4=24,n.Y4=25,n.C4R=26,n.C4G=27,n.C4B=28,n.C4A=29,n.U4=30,n.V4=31,n}(i.Attachment);i.RegionAttachment=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n,r){this.jitterX=0,this.jitterY=0,this.jitterX=n,this.jitterY=r}return m.prototype.begin=function(n){},m.prototype.transform=function(n,r,a,t){n.x+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY),n.y+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},m.prototype.end=function(){},m}();i.JitterEffect=L})(spine||(spine={}));var spine;(function(i){var L=function(){function m(n){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=n}return m.prototype.begin=function(n){this.worldX=n.x+this.centerX,this.worldY=n.y+this.centerY},m.prototype.transform=function(n,r,a,t){var e=this.angle*i.MathUtils.degreesToRadians,s=n.x-this.worldX,o=n.y-this.worldY,v=Math.sqrt(s*s+o*o);if(v<this.radius){var f=m.interpolation.apply(0,e,(this.radius-v)/this.radius),g=Math.cos(f),h=Math.sin(f);n.x=g*s-h*o+this.worldX,n.y=h*s+g*o+this.worldY}},m.prototype.end=function(){},m.interpolation=new i.PowOut(2),m}();i.SwirlEffect=L})(spine||(spine={}));var spine;(function(i){var L;(function(m){var n=function(r){__extends(a,r);function a(t){return t===void 0&&(t=""),r.call(this,function(e){return new i.canvas.CanvasTexture(e)},t)||this}return a}(i.AssetManager);m.AssetManager=n})(L=i.canvas||(i.canvas={}))})(spine||(spine={}));var spine;(function(i){var L;(function(m){var n=function(r){__extends(a,r);function a(t){return r.call(this,t)||this}return a.prototype.setFilters=function(t,e){},a.prototype.setWraps=function(t,e){},a.prototype.dispose=function(){},a}(i.Texture);m.CanvasTexture=n})(L=i.canvas||(i.canvas={}))})(spine||(spine={}));var spine;(function(i){var L;(function(m){var n=function(){function r(a){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=i.Utils.newFloatArray(8*1024),this.tempColor=new i.Color,this.ctx=a}return r.prototype.draw=function(a){this.triangleRendering?this.drawTriangles(a):this.drawImages(a)},r.prototype.drawImages=function(a){var t=this.ctx,e=a.drawOrder;this.debugRendering&&(t.strokeStyle="green"),t.save();for(var s=0,o=e.length;s<o;s++){var v=e[s];if(!!v.bone.active){var f=v.getAttachment(),g=null,h=null,c=null;if(f instanceof i.RegionAttachment)g=f,h=g.region,c=h.texture.getImage();else continue;var u=v.bone.skeleton,y=u.color,p=v.color,T=g.color,P=y.a*p.a*T.a,x=this.tempColor;x.set(y.r*p.r*T.r,y.g*p.g*T.g,y.b*p.b*T.b,P);var I=f,w=v.bone,l=h.width,E=h.height;t.save(),t.transform(w.a,w.c,w.b,w.d,w.worldX,w.worldY),t.translate(f.offset[0],f.offset[1]),t.rotate(f.rotation*Math.PI/180);var C=I.width/l;if(t.scale(C*f.scaleX,C*f.scaleY),t.translate(l/2,E/2),f.region.rotate){var S=l;l=E,E=S,t.rotate(-Math.PI/2)}t.scale(1,-1),t.translate(-l/2,-E/2),(x.r!=1||x.g!=1||x.b!=1||x.a!=1)&&(t.globalAlpha=x.a),t.drawImage(c,h.x,h.y,l,E,0,0,l,E),this.debugRendering&&t.strokeRect(0,0,l,E),t.restore()}}t.restore()},r.prototype.drawTriangles=function(a){for(var t=null,e=this.vertices,s=null,o=a.drawOrder,v=0,f=o.length;v<f;v++){var g=o[v],h=g.getAttachment(),c=null,u=null;if(h instanceof i.RegionAttachment){var y=h;e=this.computeRegionVertices(g,y,!1),s=r.QUAD_TRIANGLES,u=y.region,c=u.texture.getImage()}else if(h instanceof i.MeshAttachment){var p=h;e=this.computeMeshVertices(g,p,!1),s=p.triangles,c=p.region.renderObject.texture.getImage()}else continue;if(c!=null){var T=g.data.blendMode;T!=t&&(t=T);var P=g.bone.skeleton,x=P.color,I=g.color,w=h.color,l=x.a*I.a*w.a,E=this.tempColor;E.set(x.r*I.r*w.r,x.g*I.g*w.g,x.b*I.b*w.b,l);var C=this.ctx;(E.r!=1||E.g!=1||E.b!=1||E.a!=1)&&(C.globalAlpha=E.a);for(var S=0;S<s.length;S+=3){var F=s[S]*8,R=s[S+1]*8,V=s[S+2]*8,N=e[F],A=e[F+1],d=e[F+6],M=e[F+7],U=e[R],b=e[R+1],Y=e[R+6],D=e[R+7],O=e[V],B=e[V+1],X=e[V+6],W=e[V+7];this.drawTriangle(c,N,A,d,M,U,b,Y,D,O,B,X,W),this.debugRendering&&(C.strokeStyle="green",C.beginPath(),C.moveTo(N,A),C.lineTo(U,b),C.lineTo(O,B),C.lineTo(N,A),C.stroke())}}}this.ctx.globalAlpha=1},r.prototype.drawTriangle=function(a,t,e,s,o,v,f,g,h,c,u,y,p){var T=this.ctx;s*=a.width,o*=a.height,g*=a.width,h*=a.height,y*=a.width,p*=a.height,T.beginPath(),T.moveTo(t,e),T.lineTo(v,f),T.lineTo(c,u),T.closePath(),v-=t,f-=e,c-=t,u-=e,g-=s,h-=o,y-=s,p-=o;var P=1/(g*p-y*h),x=(p*v-h*c)*P,I=(p*f-h*u)*P,w=(g*c-y*v)*P,l=(g*u-y*f)*P,E=t-x*s-w*o,C=e-I*s-l*o;T.save(),T.transform(x,I,w,l,E,C),T.clip(),T.drawImage(a,0,0),T.restore()},r.prototype.computeRegionVertices=function(a,t,e){var s=a.bone.skeleton,o=s.color,v=a.color,f=t.color,g=o.a*v.a*f.a,h=e?g:1,c=this.tempColor;c.set(o.r*v.r*f.r*h,o.g*v.g*f.g*h,o.b*v.b*f.b*h,g),t.computeWorldVertices(a.bone,this.vertices,0,r.VERTEX_SIZE);var u=this.vertices,y=t.uvs;return u[i.RegionAttachment.C1R]=c.r,u[i.RegionAttachment.C1G]=c.g,u[i.RegionAttachment.C1B]=c.b,u[i.RegionAttachment.C1A]=c.a,u[i.RegionAttachment.U1]=y[0],u[i.RegionAttachment.V1]=y[1],u[i.RegionAttachment.C2R]=c.r,u[i.RegionAttachment.C2G]=c.g,u[i.RegionAttachment.C2B]=c.b,u[i.RegionAttachment.C2A]=c.a,u[i.RegionAttachment.U2]=y[2],u[i.RegionAttachment.V2]=y[3],u[i.RegionAttachment.C3R]=c.r,u[i.RegionAttachment.C3G]=c.g,u[i.RegionAttachment.C3B]=c.b,u[i.RegionAttachment.C3A]=c.a,u[i.RegionAttachment.U3]=y[4],u[i.RegionAttachment.V3]=y[5],u[i.RegionAttachment.C4R]=c.r,u[i.RegionAttachment.C4G]=c.g,u[i.RegionAttachment.C4B]=c.b,u[i.RegionAttachment.C4A]=c.a,u[i.RegionAttachment.U4]=y[6],u[i.RegionAttachment.V4]=y[7],u},r.prototype.computeMeshVertices=function(a,t,e){var s=a.bone.skeleton,o=s.color,v=a.color,f=t.color,g=o.a*v.a*f.a,h=e?g:1,c=this.tempColor;c.set(o.r*v.r*f.r*h,o.g*v.g*f.g*h,o.b*v.b*f.b*h,g);var u=t.worldVerticesLength/2;this.vertices.length<t.worldVerticesLength&&(this.vertices=i.Utils.newFloatArray(t.worldVerticesLength));var y=this.vertices;t.computeWorldVertices(a,0,t.worldVerticesLength,y,0,r.VERTEX_SIZE);for(var p=t.uvs,T=0,P=u,x=0,I=2;T<P;T++)y[I++]=c.r,y[I++]=c.g,y[I++]=c.b,y[I++]=c.a,y[I++]=p[x++],y[I++]=p[x++],I+=2;return y},r.QUAD_TRIANGLES=[0,1,2,2,3,0],r.VERTEX_SIZE=2+2+4,r}();m.SkeletonRenderer=n})(L=i.canvas||(i.canvas={}))})(spine||(spine={}));
